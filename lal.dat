diff -r ./cicecore/cicedynB/dynamics/ice_dyn_eap.F90 /data/tar/git_cice/CICE/cicecore/cicedynB/dynamics/ice_dyn_eap.F90
349,355c349,355
<             call icepack_ice_strength(ncat=ncat,                 &
<                                       aice     = aice    (i,j,  iblk), & 
<                                       vice     = vice    (i,j,  iblk), & 
<                                       aice0    = aice0   (i,j,  iblk), & 
<                                       aicen    = aicen   (i,j,:,iblk), &  
<                                       vicen    = vicen   (i,j,:,iblk), & 
<                                       strength = strength(i,j,  iblk) )
---
>             call icepack_ice_strength (ncat,                 &
>                                       aice    (i,j,  iblk), & 
>                                       vice    (i,j,  iblk), & 
>                                       aice0   (i,j,  iblk), & 
>                                       aicen   (i,j,:,iblk), &  
>                                       vicen   (i,j,:,iblk), & 
>                                       strength(i,j,  iblk) )
diff -r ./cicecore/cicedynB/dynamics/ice_dyn_evp.F90 /data/tar/git_cice/CICE/cicecore/cicedynB/dynamics/ice_dyn_evp.F90
289,295c289,295
<             call icepack_ice_strength(ncat     = ncat,                 &
<                                       aice     = aice    (i,j,  iblk), & 
<                                       vice     = vice    (i,j,  iblk), & 
<                                       aice0    = aice0   (i,j,  iblk), & 
<                                       aicen    = aicen   (i,j,:,iblk), &  
<                                       vicen    = vicen   (i,j,:,iblk), & 
<                                       strength = strength(i,j,  iblk) )
---
>             call icepack_ice_strength (ncat,                 &
>                                       aice    (i,j,  iblk), & 
>                                       vice    (i,j,  iblk), & 
>                                       aice0   (i,j,  iblk), & 
>                                       aicen   (i,j,:,iblk), &  
>                                       vicen   (i,j,:,iblk), & 
>                                       strength(i,j,  iblk) )
diff -r ./cicecore/cicedynB/dynamics/ice_transport_driver.F90 /data/tar/git_cice/CICE/cicecore/cicedynB/dynamics/ice_transport_driver.F90
1682,1690c1682,1688
<             call icepack_compute_tracers(ntrcr=ntrcr, trcr_depend=trcr_depend(:),    &
<                                          atrcrn = work (ij,narrays+1:narrays+ntrcr), &
<                                          aicen  = aicen(i,j,n),            &
<                                          vicen  = vicen(i,j,n),            &
<                                          vsnon  = vsnon(i,j,n),            &
<                                          trcr_base     = trcr_base(:,:),   &
<                                          n_trcr_strata = n_trcr_strata(:), &
<                                          nt_strata     = nt_strata(:,:),   &
<                                          trcrn  = trcrn(i,j,:,n))
---
>             call icepack_compute_tracers (ntrcr,        trcr_depend(:),     &
>                                          work (ij,narrays+1:narrays+ntrcr), &
>                                          aicen(i,j,n),                     &
>                                          vicen(i,j,n), vsnon(i,j,n),       &
>                                          trcr_base(:,:), n_trcr_strata(:), &
>                                          nt_strata(:,:), &
>                                          trcrn(i,j,:,n))
diff -r ./cicecore/cicedynB/general/ice_forcing.F90 /data/tar/git_cice/CICE/cicecore/cicedynB/general/ice_forcing.F90
242a243
>                                 trim(atm_data_type) /= 'hycom' .and. &
2322c2323
<       if(use_leap_years) days_per_year = 366 !overrides setting of 365 in ice_calendar
---
>       if (use_leap_years) days_per_year = 366 !overrides setting of 365 in ice_calendar
diff -r ./cicecore/cicedynB/general/ice_init.F90 /data/tar/git_cice/CICE/cicecore/cicedynB/general/ice_init.F90
1484,1498c1484,1498
<             call icepack_aggregate(ncat  = ncat,                  &
<                                    aicen = aicen(i,j,:,iblk),     &
<                                    trcrn = trcrn(i,j,:,:,iblk),   &
<                                    vicen = vicen(i,j,:,iblk),     &
<                                    vsnon = vsnon(i,j,:,iblk),     &
<                                    aice  = aice (i,j,  iblk),     &
<                                    trcr  = trcr (i,j,:,iblk),     &
<                                    vice  = vice (i,j,  iblk),     &
<                                    vsno  = vsno (i,j,  iblk),     &
<                                    aice0 = aice0(i,j,  iblk),     &
<                                    ntrcr = ntrcr,                 &
<                                    trcr_depend   = trcr_depend(:),   &
<                                    trcr_base     = trcr_base(:,:),   &
<                                    n_trcr_strata = n_trcr_strata(:), &
<                                    nt_strata     = nt_strata(:,:))
---
>          call icepack_aggregate (ncat,               &
>                                 aicen(i,j,:,iblk),   &
>                                 trcrn(i,j,:,:,iblk), &
>                                 vicen(i,j,:,iblk),   &
>                                 vsnon(i,j,:,iblk),   &
>                                 aice (i,j,  iblk),   &
>                                 trcr (i,j,:,iblk),   &
>                                 vice (i,j,  iblk),   &
>                                 vsno (i,j,  iblk),   &
>                                 aice0(i,j,  iblk),   &
>                                 ntrcr,               &
>                                 trcr_depend  (:),    &
>                                 trcr_base    (:,:),  &
>                                 n_trcr_strata(:),    &
>                                 nt_strata    (:,:))
1800,1805c1800,1804
<                call icepack_init_trcr(Tair  = Tair(i,j), Tf = Tf(i,j),  &
<                                       Sprofile = salinz(i,j,:),         &
<                                       Tprofile = Tmltz(i,j,:),          &
<                                       Tsfc  = Tsfc,                     &
<                                       nilyr = nilyr,     nslyr = nslyr, &
<                                       qin   = qin(:),    qsn = qsn(:))
---
>                call icepack_init_trcr(Tair(i,j),     Tf(i,j),      &
>                                      salinz(i,j,:), Tmltz(i,j,:), &
>                                      Tsfc,                        &
>                                      nilyr,         nslyr,        &
>                                      qin(:),        qsn(:))
diff -r ./cicecore/cicedynB/general/ice_step_mod.F90 /data/tar/git_cice/CICE/cicecore/cicedynB/general/ice_step_mod.F90
124,133c124,133
<             call icepack_prep_radiation (ncat=ncat, nilyr=nilyr, nslyr=nslyr,                 &
<                         scale_factor=scale_factor(i,j,iblk),                                  &
<                         aice     = aice    (i,j,    iblk), aicen    = aicen   (i,j,  :,iblk), &
<                         swvdr    = swvdr   (i,j,    iblk), swvdf    = swvdf   (i,j,    iblk), &
<                         swidr    = swidr   (i,j,    iblk), swidf    = swidf   (i,j,    iblk), &
<                         alvdr_ai = alvdr_ai(i,j,    iblk), alvdf_ai = alvdf_ai(i,j,    iblk), &
<                         alidr_ai = alidr_ai(i,j,    iblk), alidf_ai = alidf_ai(i,j,    iblk), &
<                         fswsfcn  = fswsfcn (i,j,  :,iblk), fswintn  = fswintn (i,j,  :,iblk), &
<                         fswthrun = fswthrun(i,j,  :,iblk), fswpenln = fswpenln(i,j,:,:,iblk), &
<                         Sswabsn  = Sswabsn (i,j,:,:,iblk), Iswabsn  = Iswabsn (i,j,:,:,iblk))
---
>             call icepack_prep_radiation (ncat, nilyr, nslyr,             &
>                         aice    (i,j,    iblk), aicen   (i,j,  :,iblk), &
>                         swvdr   (i,j,    iblk), swvdf   (i,j,    iblk), &
>                         swidr   (i,j,    iblk), swidf   (i,j,    iblk), &
>                         alvdr_ai(i,j,    iblk), alvdf_ai(i,j,    iblk), &
>                         alidr_ai(i,j,    iblk), alidf_ai(i,j,    iblk), &
>                         scale_factor(i,j,iblk),                         &
>                         fswsfcn (i,j,  :,iblk), fswintn (i,j,  :,iblk), &
>                         fswthrun(i,j,  :,iblk), fswpenln(i,j,:,:,iblk), &
>                         Sswabsn (i,j,:,:,iblk), Iswabsn (i,j,:,:,iblk))
287,407c287,358
<          call icepack_step_therm1(dt=dt, ncat=ncat,            &
<                       nilyr=nilyr, nslyr=nslyr, n_aero=n_aero, &
<                       aicen_init   = aicen_init  (i,j,:,iblk), &
<                       vicen_init   = vicen_init  (i,j,:,iblk), &
<                       vsnon_init   = vsnon_init  (i,j,:,iblk), &
<                       aice         = aice        (i,j,  iblk), &
<                       aicen        = aicen       (i,j,:,iblk), &
<                       vice         = vice        (i,j,  iblk), &
<                       vicen        = vicen       (i,j,:,iblk), &
<                       vsno         = vsno        (i,j,  iblk), &
<                       vsnon        = vsnon       (i,j,:,iblk), &
<                       uvel         = uvel        (i,j,  iblk), &
<                       vvel         = vvel        (i,j,  iblk), &
<                       Tsfc         = trcrn       (i,j,nt_Tsfc,:,iblk),                   &
<                       zqsn         = trcrn       (i,j,nt_qsno:nt_qsno+nslyr-1,:,iblk),   & 
<                       zqin         = trcrn       (i,j,nt_qice:nt_qice+nilyr-1,:,iblk),   & 
<                       zSin         = trcrn       (i,j,nt_sice:nt_sice+nilyr-1,:,iblk),   & 
<                       alvl         = trcrn       (i,j,nt_alvl,:,iblk),                   & 
<                       vlvl         = trcrn       (i,j,nt_vlvl,:,iblk),                   & 
<                       apnd         = trcrn       (i,j,nt_apnd,:,iblk),                   & 
<                       hpnd         = trcrn       (i,j,nt_hpnd,:,iblk),                   & 
<                       ipnd         = trcrn       (i,j,nt_ipnd,:,iblk),                   & 
<                       iage         = trcrn       (i,j,nt_iage,:,iblk),                   &
<                       FY           = trcrn       (i,j,nt_FY  ,:,iblk),                   & 
<                       aerosno      = aerosno     (:,:,:),      &
<                       aeroice      = aeroice     (:,:,:),      &
<                       uatm         = uatm        (i,j,  iblk), &
<                       vatm         = vatm        (i,j,  iblk), &
<                       wind         = wind        (i,j,  iblk), &
<                       zlvl         = zlvl        (i,j,  iblk), &
<                       Qa           = Qa          (i,j,  iblk), &
<                       rhoa         = rhoa        (i,j,  iblk), &
<                       Tair         = Tair        (i,j,  iblk), &
<                       Tref         = Tref        (i,j,  iblk), &
<                       Qref         = Qref        (i,j,  iblk), &
<                       Uref         = Uref        (i,j,  iblk), &
<                       Cdn_atm_ratio= Cdn_atm_ratio(i,j, iblk), &
<                       Cdn_ocn      = Cdn_ocn     (i,j,  iblk), &
<                       Cdn_ocn_skin = Cdn_ocn_skin(i,j,  iblk), &
<                       Cdn_ocn_floe = Cdn_ocn_floe(i,j,  iblk), &
<                       Cdn_ocn_keel = Cdn_ocn_keel(i,j,  iblk), &
<                       Cdn_atm      = Cdn_atm     (i,j,  iblk), &
<                       Cdn_atm_skin = Cdn_atm_skin(i,j,  iblk), &
<                       Cdn_atm_floe = Cdn_atm_floe(i,j,  iblk), &
<                       Cdn_atm_pond = Cdn_atm_pond(i,j,  iblk), &
<                       Cdn_atm_rdg  = Cdn_atm_rdg (i,j,  iblk), &
<                       hfreebd      = hfreebd     (i,j,  iblk), &
<                       hdraft       = hdraft      (i,j,  iblk), &
<                       hridge       = hridge      (i,j,  iblk), &
<                       distrdg      = distrdg     (i,j,  iblk), &
<                       hkeel        = hkeel       (i,j,  iblk), &
<                       dkeel        = dkeel       (i,j,  iblk), &
<                       lfloe        = lfloe       (i,j,  iblk), &
<                       dfloe        = dfloe       (i,j,  iblk), &
<                       strax        = strax       (i,j,  iblk), &
<                       stray        = stray       (i,j,  iblk), &
<                       strairxT     = strairxT    (i,j,  iblk), &
<                       strairyT     = strairyT    (i,j,  iblk), &
<                       potT         = potT        (i,j,  iblk), &
<                       sst          = sst         (i,j,  iblk), &
<                       sss          = sss         (i,j,  iblk), &
<                       Tf           = Tf          (i,j,  iblk), &
<                       strocnxT     = strocnxT    (i,j,  iblk), &
<                       strocnyT     = strocnyT    (i,j,  iblk), &
<                       fbot         = fbot        (i,j,  iblk), &
<                       Tbot         = Tbot        (i,j,  iblk), &
<                       Tsnice       = Tsnice       (i,j, iblk), &
<                       frzmlt       = frzmlt      (i,j,  iblk), &
<                       rside        = rside       (i,j,  iblk), &
<                       fsnow        = fsnow       (i,j,  iblk), &
<                       frain        = frain       (i,j,  iblk), &
<                       fpond        = fpond       (i,j,  iblk), &
<                       fsurf        = fsurf       (i,j,  iblk), &
<                       fsurfn       = fsurfn      (i,j,:,iblk), &
<                       fcondtop     = fcondtop    (i,j,  iblk), &
<                       fcondtopn    = fcondtopn   (i,j,:,iblk), &
<                       fcondbot     = fcondbot    (i,j,  iblk), &
<                       fcondbotn    = fcondbotn   (i,j,:,iblk), &
<                       fswsfcn      = fswsfcn     (i,j,:,iblk), &
<                       fswintn      = fswintn     (i,j,:,iblk), &
<                       fswthrun     = fswthrun    (i,j,:,iblk), &
<                       fswabs       = fswabs      (i,j,  iblk), &
<                       flwout       = flwout      (i,j,  iblk), &
<                       Sswabsn      = Sswabsn     (i,j,:,:,iblk), &
<                       Iswabsn      = Iswabsn     (i,j,:,:,iblk), &
<                       flw          = flw         (i,j,  iblk), &
<                       fsens        = fsens       (i,j,  iblk), &
<                       fsensn       = fsensn      (i,j,:,iblk), &
<                       flat         = flat        (i,j,  iblk), &
<                       flatn        = flatn       (i,j,:,iblk), &
<                       evap         = evap        (i,j,  iblk), &
<                       evaps        = evaps       (i,j,  iblk), &
<                       evapi        = evapi       (i,j,  iblk), &
<                       fresh        = fresh       (i,j,  iblk), &
<                       fsalt        = fsalt       (i,j,  iblk), &
<                       fhocn        = fhocn       (i,j,  iblk), &
<                       fswthru      = fswthru     (i,j,  iblk), &
<                       flatn_f      = flatn_f     (i,j,:,iblk), &
<                       fsensn_f     = fsensn_f    (i,j,:,iblk), &
<                       fsurfn_f     = fsurfn_f    (i,j,:,iblk), &
<                       fcondtopn_f  = fcondtopn_f (i,j,:,iblk), &
<                       faero_atm    = faero_atm   (i,j,1:n_aero,iblk), &
<                       faero_ocn    = faero_ocn   (i,j,1:n_aero,iblk), &
<                       dhsn         = dhsn        (i,j,:,iblk), &
<                       ffracn       = ffracn      (i,j,:,iblk), &
<                       meltt        = meltt       (i,j,  iblk), &
<                       melttn       = melttn      (i,j,:,iblk), &
<                       meltb        = meltb       (i,j,  iblk), &
<                       meltbn       = meltbn      (i,j,:,iblk), &
<                       melts        = melts       (i,j,  iblk), &
<                       meltsn       = meltsn      (i,j,:,iblk), &
<                       congel       = congel      (i,j,  iblk), &
<                       congeln      = congeln     (i,j,:,iblk), &
<                       snoice       = snoice      (i,j,  iblk), &
<                       snoicen      = snoicen     (i,j,:,iblk), &
<                       dsnown       = dsnown      (i,j,:,iblk), &
<                       lmask_n      = lmask_n     (i,j,  iblk), &
<                       lmask_s      = lmask_s     (i,j,  iblk), &
<                       mlt_onset    = mlt_onset   (i,j,  iblk), &
<                       frz_onset    = frz_onset   (i,j,  iblk), &
<                       yday=yday, prescribed_ice=prescribed_ice)
---
>          call icepack_step_therm1(dt, ncat, nilyr, nslyr, n_aero,                &
>                             aicen_init  (i,j,:,iblk),                           &
>                             vicen_init  (i,j,:,iblk), vsnon_init  (i,j,:,iblk), &
>                             aice        (i,j,  iblk), aicen       (i,j,:,iblk), &
>                             vice        (i,j,  iblk), vicen       (i,j,:,iblk), &
>                             vsno        (i,j,  iblk), vsnon       (i,j,:,iblk), &
>                             uvel        (i,j,  iblk), vvel        (i,j,  iblk), &
>                             trcrn       (i,j,nt_Tsfc,:,iblk),                   &
>                             trcrn       (i,j,nt_qsno:nt_qsno+nslyr-1,:,iblk),   & 
>                             trcrn       (i,j,nt_qice:nt_qice+nilyr-1,:,iblk),   & 
>                             trcrn       (i,j,nt_sice:nt_sice+nilyr-1,:,iblk),   & 
>                             trcrn       (i,j,nt_alvl,:,iblk),                   & 
>                             trcrn       (i,j,nt_vlvl,:,iblk),                   & 
>                             trcrn       (i,j,nt_apnd,:,iblk),                   & 
>                             trcrn       (i,j,nt_hpnd,:,iblk),                   & 
>                             trcrn       (i,j,nt_ipnd,:,iblk),                   & 
>                             trcrn       (i,j,nt_iage,:,iblk),                   &
>                             trcrn       (i,j,nt_FY  ,:,iblk),                   & 
>                             aerosno     (:,:,:),      aeroice     (:,:,:),      &
>                             uatm        (i,j,  iblk), vatm        (i,j,  iblk), &
>                             wind        (i,j,  iblk), zlvl        (i,j,  iblk), &
>                             Qa          (i,j,  iblk), rhoa        (i,j,  iblk), &
>                             Tair        (i,j,  iblk), Tref        (i,j,  iblk), &
>                             Qref        (i,j,  iblk), Uref        (i,j,  iblk), &
>                             Cdn_atm_ratio(i,j, iblk),                           &
>                             Cdn_ocn     (i,j,  iblk), Cdn_ocn_skin(i,j,  iblk), &
>                             Cdn_ocn_floe(i,j,  iblk), Cdn_ocn_keel(i,j,  iblk), &
>                             Cdn_atm     (i,j,  iblk), Cdn_atm_skin(i,j,  iblk), &
>                             Cdn_atm_floe(i,j,  iblk), Cdn_atm_pond(i,j,  iblk), &
>                             Cdn_atm_rdg (i,j,  iblk), hfreebd     (i,j,  iblk), &
>                             hdraft      (i,j,  iblk), hridge      (i,j,  iblk), &
>                             distrdg     (i,j,  iblk), hkeel       (i,j,  iblk), &
>                             dkeel       (i,j,  iblk), lfloe       (i,j,  iblk), &
>                             dfloe       (i,j,  iblk),                           &
>                             strax       (i,j,  iblk), stray       (i,j,  iblk), &
>                             strairxT    (i,j,  iblk), strairyT    (i,j,  iblk), &
>                             potT        (i,j,  iblk), sst         (i,j,  iblk), &
>                             sss         (i,j,  iblk), Tf          (i,j,  iblk), &
>                             strocnxT    (i,j,  iblk), strocnyT    (i,j,  iblk), &
>                             fbot        (i,j,  iblk),                           &
>                             Tbot        (i,j,  iblk), Tsnice       (i,j, iblk),  &
>                             frzmlt      (i,j,  iblk), rside       (i,j,  iblk), &
>                             fsnow       (i,j,  iblk), frain       (i,j,  iblk), &
>                             fpond       (i,j,  iblk),                           &
>                             fsurf       (i,j,  iblk), fsurfn      (i,j,:,iblk), &
>                             fcondtop    (i,j,  iblk), fcondtopn   (i,j,:,iblk), &
>                             fcondbot    (i,j,  iblk), fcondbotn   (i,j,:,iblk), &
>                             fswsfcn     (i,j,:,iblk), fswintn     (i,j,:,iblk), &
>                             fswthrun    (i,j,:,iblk), fswabs      (i,j,  iblk), &
>                             flwout      (i,j,  iblk),                           &
>                             Sswabsn   (i,j,:,:,iblk), Iswabsn   (i,j,:,:,iblk), &
>                             flw         (i,j,  iblk), &
>                             fsens       (i,j,  iblk), fsensn      (i,j,:,iblk), &
>                             flat        (i,j,  iblk), flatn       (i,j,:,iblk), &
>                             evap        (i,j,  iblk),                           &
>                             evaps       (i,j,  iblk), evapi       (i,j,  iblk), &
>                             fresh       (i,j,  iblk), fsalt       (i,j,  iblk), &
>                             fhocn       (i,j,  iblk), fswthru     (i,j,  iblk), &
>                             flatn_f     (i,j,:,iblk), fsensn_f    (i,j,:,iblk), &
>                             fsurfn_f    (i,j,:,iblk), fcondtopn_f (i,j,:,iblk), &
>                             faero_atm   (i,j,1:n_aero,iblk),                    &
>                             faero_ocn   (i,j,1:n_aero,iblk),                    &
>                             dhsn        (i,j,:,iblk), ffracn      (i,j,:,iblk), &
>                             meltt       (i,j,  iblk), melttn      (i,j,:,iblk), &
>                             meltb       (i,j,  iblk), meltbn      (i,j,:,iblk), &
>                             melts       (i,j,  iblk), meltsn      (i,j,:,iblk), &
>                             congel      (i,j,  iblk), congeln     (i,j,:,iblk), &
>                             snoice      (i,j,  iblk), snoicen     (i,j,:,iblk), &
>                             dsnown      (i,j,:,iblk), &
>                             lmask_n     (i,j,  iblk), lmask_s     (i,j,  iblk), &
>                             mlt_onset   (i,j,  iblk), frz_onset   (i,j,  iblk), &
>                             yday,                     prescribed_ice)
504,542c455,478
<          call icepack_step_therm2(dt=dt, ncat=ncat, n_aero=n_aero, &
<                       nltrcr=nltrcr, nilyr=nilyr, nslyr=nslyr, nblyr=nblyr, &
<                       hin_max    = hin_max   (:),          &   
<                       aicen      = aicen     (i,j,:,iblk), &
<                       vicen      = vicen     (i,j,:,iblk), &
<                       vsnon      = vsnon     (i,j,:,iblk), &
<                       aicen_init = aicen_init(i,j,:,iblk), &
<                       vicen_init = vicen_init(i,j,:,iblk), &
<                       trcrn      = trcrn     (i,j,:,:,iblk), &
<                       aice0      = aice0     (i,j,  iblk), &
<                       aice       = aice      (i,j,  iblk), &
<                       trcr_depend= trcr_depend(:),         &
<                       trcr_base  = trcr_base(:,:),         &
<                       n_trcr_strata = n_trcr_strata(:),    &
<                       nt_strata  = nt_strata(:,:),         &
<                       Tf         = Tf        (i,j,  iblk), &
<                       sss        = sss       (i,j,  iblk), &
<                       salinz     = salinz    (i,j,:,iblk), &
<                       rside      = rside     (i,j,  iblk), &
<                       meltl      = meltl     (i,j,  iblk), &
<                       frzmlt     = frzmlt    (i,j,  iblk), &
<                       frazil     = frazil    (i,j,  iblk), &
<                       frain      = frain     (i,j,  iblk), &
<                       fpond      = fpond     (i,j,  iblk), &
<                       fresh      = fresh     (i,j,  iblk), &
<                       fsalt      = fsalt     (i,j,  iblk), &
<                       fhocn      = fhocn     (i,j,  iblk), &
<                       update_ocn_f = update_ocn_f,          &
<                       bgrid      = bgrid,                  &
<                       cgrid      = cgrid,                  &
<                       igrid      = igrid,                  &
<                       faero_ocn  = faero_ocn (i,j,:,iblk), &
<                       first_ice  = first_ice (i,j,:,iblk), &
<                       fzsal      = fzsal     (i,j,  iblk), &
<                       flux_bio   = flux_bio  (i,j,1:nbtrcr,iblk), &
<                       ocean_bio  = ocean_bio (i,j,1:nbtrcr,iblk), &
<                       frazil_diag = frazil_diag(i,j,iblk), &
<                       frz_onset  = frz_onset (i,j,  iblk), &
<                       yday = yday)
---
>          call icepack_step_therm2(dt, ncat, n_aero, nltrcr,                &
>                            nilyr,                  nslyr,                  &
>                            hin_max   (:),          nblyr,                  &   
>                            aicen     (i,j,:,iblk),                         &
>                            vicen     (i,j,:,iblk), vsnon     (i,j,:,iblk), &
>                            aicen_init(i,j,:,iblk), vicen_init(i,j,:,iblk), &
>                            trcrn     (i,j,:,:,iblk),                       &
>                            aice0     (i,j,  iblk), aice      (i,j,  iblk), &
>                            trcr_depend(:),         trcr_base(:,:),         &
>                            n_trcr_strata(:),       nt_strata(:,:),         &
>                            Tf        (i,j,  iblk), sss       (i,j,  iblk), &
>                            salinz    (i,j,:,iblk),                         &
>                            rside     (i,j,  iblk), meltl     (i,j,  iblk), &
>                            frzmlt    (i,j,  iblk), frazil    (i,j,  iblk), &
>                            frain     (i,j,  iblk), fpond     (i,j,  iblk), &
>                            fresh     (i,j,  iblk), fsalt     (i,j,  iblk), &
>                            fhocn     (i,j,  iblk), update_ocn_f,           &
>                            bgrid,                  cgrid,                  &
>                            igrid,                  faero_ocn (i,j,:,iblk), &
>                            first_ice (i,j,:,iblk), fzsal     (i,j,  iblk), &
>                            flux_bio  (i,j,1:nbtrcr,iblk),                  &
>                            ocean_bio (i,j,1:nbtrcr,iblk),                  &
>                            frazil_diag(i,j, iblk),                         &
>                            frz_onset (i,j,  iblk), yday)
548c484
< 
---
>          
619,633c555,566
<             call icepack_aggregate(ncat  = ncat,                  &
<                                    aicen = aicen(i,j,:,iblk),     &
<                                    trcrn = trcrn(i,j,:,:,iblk),   &
<                                    vicen = vicen(i,j,:,iblk),     &
<                                    vsnon = vsnon(i,j,:,iblk),     &
<                                    aice  = aice (i,j,  iblk),     &
<                                    trcr  = trcr (i,j,:,iblk),     &
<                                    vice  = vice (i,j,  iblk),     &
<                                    vsno  = vsno (i,j,  iblk),     &
<                                    aice0 = aice0(i,j,  iblk),     &
<                                    ntrcr = ntrcr,                 &
<                                    trcr_depend   = trcr_depend(:),   &
<                                    trcr_base     = trcr_base(:,:),   &
<                                    n_trcr_strata = n_trcr_strata(:), &
<                                    nt_strata     = nt_strata(:,:))
---
>          call icepack_aggregate (ncat,            aicen(i,j,:,iblk),    &
>                                trcrn(i,j,:,:,iblk),                     &
>                                vicen(i,j,:,iblk), vsnon(i,j,  :,iblk),  &
>                                aice (i,j,  iblk),                       &
>                                trcr (i,j,:,  iblk),                     &
>                                vice (i,j,  iblk), vsno (i,j,    iblk),  &
>                                aice0(i,j,  iblk),                       &
>                                ntrcr,                                   &
>                                trcr_depend(:),                          &
>                                trcr_base    (:,:),                      &
>                                n_trcr_strata(:),                        &
>                                nt_strata    (:,:))
781,816c714,738
<             call icepack_step_ridge (dt=dt, ndtd=ndtd,                 &
<                          nilyr=nilyr, nslyr=nslyr, nblyr=nblyr,        &
<                          ncat=ncat, n_aero=n_aero, hin_max=hin_max(:), &
<                          trcr_depend   = trcr_depend  (:),   &
<                          trcr_base     = trcr_base    (:,:), &
<                          n_trcr_strata = n_trcr_strata(:),   &
<                          nt_strata     = nt_strata    (:,:), &
<                          trcrn     = trcrn    (i,j,:,:,iblk), &
<                          rdg_conv  = rdg_conv (i,j,  iblk), &
<                          rdg_shear = rdg_shear(i,j,  iblk), &
<                          aicen     = aicen    (i,j,:,iblk), &
<                          vicen     = vicen    (i,j,:,iblk), &
<                          vsnon     = vsnon    (i,j,:,iblk), &
<                          aice0     = aice0    (i,j,  iblk), &
<                          dardg1dt  = dardg1dt (i,j,  iblk), &
<                          dardg2dt  = dardg2dt (i,j,  iblk), &
<                          dvirdgdt  = dvirdgdt (i,j,  iblk), &
<                          opening   = opening  (i,j,  iblk), &
<                          fpond     = fpond    (i,j,  iblk), &
<                          fresh     = fresh    (i,j,  iblk), &
<                          fhocn     = fhocn    (i,j,  iblk), &
<                          faero_ocn = faero_ocn(i,j,:,iblk), &
<                          aparticn  = aparticn (i,j,:,iblk), &
<                          krdgn     = krdgn    (i,j,:,iblk), &
<                          aredistn  = aredistn (i,j,:,iblk), &
<                          vredistn  = vredistn (i,j,:,iblk), &
<                          dardg1ndt = dardg1ndt(i,j,:,iblk), &
<                          dardg2ndt = dardg2ndt(i,j,:,iblk), &
<                          dvirdgndt = dvirdgndt(i,j,:,iblk), &
<                          araftn    = araftn   (i,j,:,iblk), &
<                          vraftn    = vraftn   (i,j,:,iblk), &
<                          aice      = aice     (i,j,  iblk), &
<                          fsalt     = fsalt    (i,j,  iblk), &
<                          first_ice = first_ice(i,j,:,iblk), &
<                          fzsal     = fzsal    (i,j,  iblk), &
<                          flux_bio  = flux_bio (i,j,1:nbtrcr,iblk))
---
>             call icepack_step_ridge (dt,        ndtd,                  &
>                          nilyr,                 nslyr,                 &
>                          nblyr,                                        &
>                          ncat,                  hin_max  (:),          &
>                          rdg_conv (i,j,  iblk), rdg_shear(i,j,  iblk), &
>                          aicen    (i,j,:,iblk),                        &
>                          trcrn    (i,j,:,:,iblk),                      &
>                          vicen    (i,j,:,iblk), vsnon    (i,j,:,iblk), &
>                          aice0    (i,j,  iblk), trcr_depend(:),        &
>                          trcr_base(:,:),        n_trcr_strata(:),      &
>                          nt_strata(:,:),                               &
>                          dardg1dt (i,j,  iblk), dardg2dt (i,j,  iblk), &
>                          dvirdgdt (i,j,  iblk), opening  (i,j,  iblk), &
>                          fpond    (i,j,  iblk),                        &
>                          fresh    (i,j,  iblk), fhocn    (i,j,  iblk), &
>                          n_aero,                                       &
>                          faero_ocn(i,j,:,iblk),                        &
>                          aparticn (i,j,:,iblk), krdgn    (i,j,:,iblk), &
>                          aredistn (i,j,:,iblk), vredistn (i,j,:,iblk), &
>                          dardg1ndt(i,j,:,iblk), dardg2ndt(i,j,:,iblk), &
>                          dvirdgndt(i,j,:,iblk),                        &
>                          araftn   (i,j,:,iblk), vraftn   (i,j,:,iblk), &
>                          aice     (i,j,  iblk), fsalt    (i,j,  iblk), &
>                          first_ice(i,j,:,iblk), fzsal    (i,j,  iblk), &
>                          flux_bio (i,j,1:nbtrcr,iblk)                  )
949,991c871,910
<             call icepack_step_radiation (dt=dt,   ncat=ncat,                  &
<                          n_algae=n_algae, tr_zaero=tr_zaero, nblyr=nblyr,     &
<                          ntrcr=ntrcr, nbtrcr_sw=nbtrcr_sw,                    &
<                          nilyr=nilyr, nslyr=nslyr, n_aero=n_aero,             &
<                          n_zaero=n_zaero, nlt_chl_sw=nlt_chl_sw,              &
<                          nlt_zaero_sw=nlt_zaero_sw(:),                        &
<                          dEdd_algae=dEdd_algae,                               &
<                          swgrid=swgrid(:),        igrid=igrid(:),             &
<                          fbri=fbri(:),                                        &
<                          aicen=aicen(i,j,        :,iblk),                     &
<                          vicen=vicen(i,j,        :,iblk),                     &
<                          vsnon=vsnon(i,j,        :,iblk),                     &
<                          Tsfcn=trcrn(i,j,nt_Tsfc,:,iblk),                     &
<                          alvln=trcrn(i,j,nt_alvl,:,iblk),                     &
<                          apndn=trcrn(i,j,nt_apnd,:,iblk),                     &
<                          hpndn=trcrn(i,j,nt_hpnd,:,iblk),                     &
<                          ipndn=trcrn(i,j,nt_ipnd,:,iblk),                     &
<                          aeron=trcrn(i,j,nt_aero:nt_aero+4*n_aero-1,:,iblk),  &
<                          zbion=ztrcr_sw,                                      &
<                          trcrn=ztrcr,                                         &
<                          TLAT=TLAT(i,j,iblk),     TLON=TLON(i,j,iblk),        &
<                          calendar_type=calendar_type,                         &
<                          days_per_year=days_per_year,                         &
<                          nextsw_cday=nextsw_cday, yday=yday,                  &
<                          sec=sec,                                             &
<                          kaer_tab=kaer_tab, kaer_bc_tab=kaer_bc_tab(:,:),     &
<                          waer_tab=waer_tab, waer_bc_tab=waer_bc_tab(:,:),     &
<                          gaer_tab=gaer_tab, gaer_bc_tab=gaer_bc_tab(:,:),     &
<                          bcenh=bcenh(:,:,:),                                  &
<                          modal_aero=modal_aero,                               &
<                          swvdr    =swvdr    (i,j    ,iblk), swvdf   =swvdf   (i,j    ,iblk), &
<                          swidr    =swidr    (i,j    ,iblk), swidf   =swidf   (i,j    ,iblk), &
<                          coszen   =coszen   (i,j    ,iblk), fsnow   =fsnow   (i,j    ,iblk), &
<                          alvdrn   =alvdrn   (i,j,:  ,iblk), alvdfn  =alvdfn  (i,j,:  ,iblk), &
<                          alidrn   =alidrn   (i,j,:  ,iblk), alidfn  =alidfn  (i,j,:  ,iblk), &
<                          fswsfcn  =fswsfcn  (i,j,:  ,iblk), fswintn =fswintn (i,j,:  ,iblk), &
<                          fswthrun =fswthrun (i,j,:  ,iblk), fswpenln=fswpenln(i,j,:,:,iblk), &
<                          Sswabsn  =Sswabsn  (i,j,:,:,iblk), Iswabsn =Iswabsn (i,j,:,:,iblk), &
<                          albicen  =albicen  (i,j,:  ,iblk), albsnon =albsnon (i,j,:  ,iblk), &
<                          albpndn  =albpndn  (i,j,:  ,iblk), apeffn  =apeffn  (i,j,:  ,iblk), &
<                          snowfracn=snowfracn(i,j,:  ,iblk),                                  &
<                          dhsn     =dhsn     (i,j,:  ,iblk), ffracn  =ffracn(i,j,:,iblk),     &
<                          l_print_point=l_print_point)
---
>             call icepack_step_radiation (dt,   ncat,                      &
>                           n_algae,   tr_zaero, nblyr,                     &
>                           ntrcr,     nbtrcr_sw,                           &
>                           nilyr,    nslyr,       n_aero,                  &
>                           n_zaero,  dEdd_algae,  nlt_chl_sw,              &
>                           nlt_zaero_sw(:),                                &
>                           swgrid(:),           igrid(:),                  &
>                           fbri(:),                                        &
>                           aicen(i,j,:,iblk),     vicen(i,j,:,iblk),       &
>                           vsnon(i,j,:,iblk),                              &
>                           trcrn(i,j,nt_Tsfc,:,iblk),                      &
>                           trcrn(i,j,nt_alvl,:,iblk),                      &
>                           trcrn(i,j,nt_apnd,:,iblk),                      &
>                           trcrn(i,j,nt_hpnd,:,iblk),                      &
>                           trcrn(i,j,nt_ipnd,:,iblk),                      &
>                           trcrn(i,j,nt_aero:nt_aero+4*n_aero-1,:,iblk),   &
>                           ztrcr_sw,                                       &
>                           ztrcr,                                          &
>                           TLAT(i,j,iblk),        TLON(i,j,iblk),          &
>                           calendar_type,         days_per_year,           &
>                           nextsw_cday,           yday,                    &
>                           sec,                                            &
>                           kaer_tab, waer_tab,                             &
>                           gaer_tab,                                       &
>                           kaer_bc_tab(:,:),      waer_bc_tab(:,:),        &
>                           gaer_bc_tab(:,:),      bcenh(:,:,:),            &
>                           modal_aero,                                     &
>                           swvdr(i,j,iblk),       swvdf(i,j,iblk),         &
>                           swidr(i,j,iblk),       swidf(i,j,iblk),         &
>                           coszen(i,j,iblk),      fsnow(i,j,iblk),         &
>                           alvdrn(i,j,:,iblk),    alvdfn(i,j,:,iblk),      &
>                           alidrn(i,j,:,iblk),    alidfn(i,j,:,iblk),      &
>                           fswsfcn(i,j,:,iblk),   fswintn(i,j,:,iblk),     &
>                           fswthrun(i,j,:,iblk),  fswpenln(i,j,:,:,iblk),  &
>                           Sswabsn(i,j,:,:,iblk), Iswabsn(i,j,:,:,iblk),   &
>                           albicen(i,j,:,iblk),   albsnon(i,j,:,iblk),     &
>                           albpndn(i,j,:,iblk),   apeffn(i,j,:,iblk),      &
>                           snowfracn(i,j,:,iblk),                          &
>                           dhsn(i,j,:,iblk),      ffracn(i,j,:,iblk),      &
>                           l_print_point)
1111,1129c1030,1048
<             call icepack_atm_boundary(sfctype = 'ocn',    &
<                          Tsf     = sst        (i,j,iblk), &    
<                          potT    = potT       (i,j,iblk), &
<                          uatm    = uatm       (i,j,iblk), &   
<                          vatm    = vatm       (i,j,iblk), &   
<                          wind    = wind       (i,j,iblk), &   
<                          zlvl    = zlvl       (i,j,iblk), &   
<                          Qa      = Qa         (i,j,iblk), &     
<                          rhoa    = rhoa       (i,j,iblk), &
<                          strx    = strairx_ocn(i,j,iblk), & 
<                          stry    = strairy_ocn(i,j,iblk), & 
<                          Tref    = Tref_ocn   (i,j,iblk), & 
<                          Qref    = Qref_ocn   (i,j,iblk), & 
<                          delt    = delt       (i,j),      &    
<                          delq    = delq       (i,j),      &
<                          lhcoef  = lhcoef     (i,j),      &
<                          shcoef  = shcoef     (i,j),      &
<                          Cdn_atm = Cdn_atm    (i,j,iblk), & 
<                          Cdn_atm_ratio_n = Cdn_atm_ratio(i,j,iblk))    
---
>             call icepack_atm_boundary( 'ocn',               &
>                                      sst        (i,j,iblk), &    
>                                      potT       (i,j,iblk), &
>                                      uatm       (i,j,iblk), &   
>                                      vatm       (i,j,iblk), &   
>                                      wind       (i,j,iblk), &   
>                                      zlvl       (i,j,iblk), &   
>                                      Qa         (i,j,iblk), &     
>                                      rhoa       (i,j,iblk), &
>                                      strairx_ocn(i,j,iblk), & 
>                                      strairy_ocn(i,j,iblk), & 
>                                      Tref_ocn   (i,j,iblk), & 
>                                      Qref_ocn   (i,j,iblk), & 
>                                      delt       (i,j),      &    
>                                      delq       (i,j),      &
>                                      lhcoef     (i,j),      &
>                                      shcoef     (i,j),      &
>                                      Cdn_atm    (i,j,iblk), & 
>                                      Cdn_atm_ratio(i,j,iblk))    
1157,1169c1076,1088
<          call icepack_ocn_mixed_layer(alvdr_ocn=alvdr_ocn(i,j,iblk), swvdr =swvdr (i,j,iblk), &
<                                       alidr_ocn=alidr_ocn(i,j,iblk), swidr =swidr (i,j,iblk), &
<                                       alvdf_ocn=alvdf_ocn(i,j,iblk), swvdf =swvdf (i,j,iblk), &
<                                       alidf_ocn=alidf_ocn(i,j,iblk), swidf =swidf (i,j,iblk), &
<                                       sst      =sst      (i,j,iblk), flwout_ocn=flwout_ocn(i,j,iblk), &
<                                       fsens_ocn=fsens_ocn(i,j,iblk), shcoef=shcoef(i,j), &
<                                       flat_ocn =flat_ocn (i,j,iblk), lhcoef=lhcoef(i,j), &
<                                       evap_ocn =evap_ocn (i,j,iblk), flw   =flw   (i,j,iblk), &
<                                       delt     =delt     (i,j),      delq  =delq  (i,j), &
<                                       aice     =aice     (i,j,iblk), fhocn =fhocn (i,j,iblk), &
<                                       fswthru  =fswthru  (i,j,iblk), hmix  =hmix  (i,j,iblk), &
<                                       Tf       =Tf       (i,j,iblk), qdp   =qdp   (i,j,iblk), &
<                                       frzmlt   =frzmlt   (i,j,iblk), dt    =dt)
---
>          call icepack_ocn_mixed_layer (alvdr_ocn(i,j,iblk), swvdr     (i,j,iblk), &
>                                       alidr_ocn(i,j,iblk), swidr     (i,j,iblk), &
>                                       alvdf_ocn(i,j,iblk), swvdf     (i,j,iblk), &
>                                       alidf_ocn(i,j,iblk), swidf     (i,j,iblk), &
>                                       sst      (i,j,iblk), flwout_ocn(i,j,iblk), &
>                                       fsens_ocn(i,j,iblk), shcoef    (i,j),      &
>                                       flat_ocn (i,j,iblk), lhcoef    (i,j),      &
>                                       evap_ocn (i,j,iblk), flw       (i,j,iblk), &
>                                       delt     (i,j),      delq      (i,j),      &
>                                       aice     (i,j,iblk), fhocn     (i,j,iblk), &
>                                       fswthru  (i,j,iblk), hmix      (i,j,iblk), &
>                                       Tf       (i,j,iblk), qdp       (i,j,iblk), &
>                                       frzmlt   (i,j,iblk), dt)
1256,1267c1175,1185
<          call icepack_init_OceanConcArray(max_nbtrcr = icepack_max_nbtrcr, &
<                 max_algae = icepack_max_algae, max_don = icepack_max_don, &
<                 max_doc   = icepack_max_doc,   max_dic = icepack_max_dic, &
<                 max_aero  = icepack_max_aero,  max_fe  = icepack_max_fe,  &
<                 nit = nit(i,j,  iblk), amm    = amm   (i,j,  iblk), &
<                 sil = sil(i,j,  iblk), dmsp   = dmsp  (i,j,  iblk), &
<                 dms = dms(i,j,  iblk), algalN = algalN(i,j,:,iblk), &
<                 doc = doc(i,j,:,iblk), don    = don   (i,j,:,iblk), &
<                 dic = dic(i,j,:,iblk), fed    = fed   (i,j,:,iblk), &
<                 fep = fep(i,j,:,iblk), zaeros = zaeros(i,j,:,iblk), &
<                 hum = hum(i,j,  iblk),                              &
<                 ocean_bio_all = ocean_bio_all(i,j,:,iblk))
---
>          call icepack_init_OceanConcArray(icepack_max_nbtrcr, &
>                 icepack_max_algae, icepack_max_don,  icepack_max_doc,        &
>                 icepack_max_dic,   icepack_max_aero, icepack_max_fe,         &
>                 nit(i,j,  iblk), amm   (i,j,  iblk), &
>                 sil(i,j,  iblk), dmsp  (i,j,  iblk), &
>                 dms(i,j,  iblk), algalN(i,j,:,iblk), &
>                 doc(i,j,:,iblk), don   (i,j,:,iblk), &
>                 dic(i,j,:,iblk), fed   (i,j,:,iblk), &
>                 fep(i,j,:,iblk), zaeros(i,j,:,iblk), &
>                 ocean_bio_all(i,j,:,iblk), &
>                 hum(i,j,  iblk))
1278,1328c1196,1246
<          call icepack_biogeochemistry(dt=dt, ntrcr=ntrcr, nbtrcr=nbtrcr,&
<                               bgrid=bgrid, igrid=igrid, icgrid=icgrid, cgrid=cgrid,             &
<                               nblyr=nblyr, nilyr=nilyr, nslyr=nslyr, n_algae=n_algae, n_zaero=n_zaero,   &
<                               ncat=ncat, n_doc=n_doc, n_dic=n_dic, n_don=n_don, n_fed=n_fed, n_fep=n_fep, &
<                               upNO         = upNO        (i,j,          iblk), &
<                               upNH         = upNH        (i,j,          iblk), &
<                               iDi          = iDi         (i,j,:,:,      iblk), &
<                               iki          = iki         (i,j,:,:,      iblk), &
<                               zfswin       = zfswin      (i,j,:,:,      iblk), &
<                               zsal_tot     = zsal_tot    (i,j,          iblk), &
<                               darcy_V      = darcy_V     (i,j,:,        iblk), &
<                               grow_net     = grow_net    (i,j,          iblk), &
<                               PP_net       = PP_net      (i,j,          iblk), &
<                               hbri         = hbri        (i,j,          iblk), &
<                               dhbr_bot     = dhbr_bot    (i,j,:,        iblk), &
<                               dhbr_top     = dhbr_top    (i,j,:,        iblk), &
<                               Zoo          = Zoo         (i,j,:,:,      iblk), &
<                               fbio_snoice  = fbio_snoice (i,j,:,        iblk), &
<                               fbio_atmice  = fbio_atmice (i,j,:,        iblk), &
<                               ocean_bio    = ocean_bio   (i,j,1:nbtrcr, iblk), &
<                               first_ice    = first_ice   (i,j,:,        iblk), &
<                               fswpenln     = fswpenln    (i,j,:,:,      iblk), &
<                               bphi         = bphi        (i,j,:,:,      iblk), &
<                               bTiz         = bTiz        (i,j,:,:,      iblk), &
<                               ice_bio_net  = ice_bio_net (i,j,1:nbtrcr, iblk), &
<                               snow_bio_net = snow_bio_net(i,j,1:nbtrcr, iblk), &
<                               fswthrun     = fswthrun    (i,j,:,        iblk), &
<                               sice_rho     = sice_rho    (i,j,:,        iblk), &
<                               fzsal        = fzsal       (i,j,          iblk), &   
<                               fzsal_g      = fzsal_g     (i,j,          iblk), &
<                               meltbn       = meltbn      (i,j,:,        iblk), &
<                               melttn       = melttn      (i,j,:,        iblk), &
<                               congeln      = congeln     (i,j,:,        iblk), &
<                               snoicen      = snoicen     (i,j,:,        iblk), & 
<                               sst          = sst         (i,j,          iblk), &    
<                               sss          = sss         (i,j,          iblk), &
<                               fsnow        = fsnow       (i,j,          iblk), &
<                               meltsn       = meltsn      (i,j,:,        iblk), &
<                               hin_old      = hin_old     (i,j,:,        iblk), &
<                               flux_bio     = flux_bio    (i,j,1:nbtrcr, iblk), &
<                               flux_bio_atm = flux_bio_atm(i,j,1:nbtrcr, iblk), &
<                               aicen_init   = aicen_init  (i,j,:,        iblk), &
<                               vicen_init   = vicen_init  (i,j,:,        iblk), &
<                               aicen        = aicen       (i,j,:,        iblk), &
<                               vicen        = vicen       (i,j,:,        iblk), &
<                               vsnon        = vsnon       (i,j,:,        iblk), &
<                               aice0        = aice0       (i,j,          iblk), &
<                               trcrn        = trcrn       (i,j,:,:,      iblk), &
<                               vsnon_init   = vsnon_init  (i,j,:,        iblk), &
<                               Rayleigh_criteria = Rayleigh_criteria(i,j,iblk), &
<                               skl_bgc      = skl_bgc)
---
>          call icepack_biogeochemistry(dt, ntrcr, nbtrcr,&
>                               upNO        (i,j,          iblk),        &
>                               upNH        (i,j,          iblk),        &
>                               iDi         (i,j,:,:,      iblk),        &
>                               iki         (i,j,:,:,      iblk),        &
>                               zfswin      (i,j,:,:,      iblk),        &
>                               zsal_tot    (i,j,          iblk),        &
>                               darcy_V     (i,j,:,        iblk),        &
>                               grow_net    (i,j,          iblk),        &
>                               PP_net      (i,j,          iblk),        &
>                               hbri        (i,j,          iblk),        &
>                               dhbr_bot    (i,j,:,        iblk),        &
>                               dhbr_top    (i,j,:,        iblk),        &
>                               Zoo         (i,j,:,:,      iblk),        &
>                               fbio_snoice (i,j,:,        iblk),        &
>                               fbio_atmice (i,j,:,        iblk),        &
>                               ocean_bio   (i,j,1:nbtrcr, iblk),        &
>                               first_ice   (i,j,:,        iblk),        &
>                               fswpenln    (i,j,:,:,      iblk),        &
>                               bphi        (i,j,:,:,      iblk),        &
>                               bTiz        (i,j,:,:,      iblk),        &
>                               ice_bio_net (i,j,1:nbtrcr, iblk),        &
>                               snow_bio_net(i,j,1:nbtrcr, iblk),        &
>                               fswthrun    (i,j,:,        iblk),        &
>                               Rayleigh_criteria(i,j,     iblk),        &
>                               sice_rho    (i,j,:,        iblk),        &
>                               fzsal       (i,j,          iblk),        &   
>                               fzsal_g     (i,j,          iblk),        &
>                               bgrid, igrid, icgrid, cgrid,             &
>                               nblyr, nilyr, nslyr, n_algae, n_zaero,   &
>                               ncat, n_doc, n_dic, n_don, n_fed, n_fep, &
>                               meltbn      (i,j,:,        iblk),        &
>                               melttn      (i,j,:,        iblk),        &
>                               congeln     (i,j,:,        iblk),        &
>                               snoicen     (i,j,:,        iblk),        & 
>                               sst         (i,j,          iblk),        &    
>                               sss         (i,j,          iblk),        &
>                               fsnow       (i,j,          iblk),        &
>                               meltsn      (i,j,:,        iblk),        &
>                               hin_old     (i,j,:,        iblk),        &
>                               flux_bio    (i,j,1:nbtrcr, iblk),        &
>                               flux_bio_atm(i,j,1:nbtrcr, iblk),        &
>                               aicen_init  (i,j,:,        iblk),        &
>                               vicen_init  (i,j,:,        iblk),        &
>                               aicen       (i,j,:,        iblk),        &
>                               vicen       (i,j,:,        iblk),        &
>                               vsnon       (i,j,:,        iblk),        &
>                               aice0       (i,j,          iblk),        &
>                               trcrn       (i,j,:,:,iblk),              &
>                               vsnon_init  (i,j,:,        iblk),        &
>                               skl_bgc)
diff -r ./cicecore/cicedynB/infrastructure/ice_restart_driver.F90 /data/tar/git_cice/CICE/cicecore/cicedynB/infrastructure/ice_restart_driver.F90
496,510c496,510
<             call icepack_aggregate(ncat  = ncat,                  &
<                                    aicen = aicen(i,j,:,iblk),     &
<                                    trcrn = trcrn(i,j,:,:,iblk),   &
<                                    vicen = vicen(i,j,:,iblk),     &
<                                    vsnon = vsnon(i,j,:,iblk),     &
<                                    aice  = aice (i,j,  iblk),     &
<                                    trcr  = trcr (i,j,:,iblk),     &
<                                    vice  = vice (i,j,  iblk),     &
<                                    vsno  = vsno (i,j,  iblk),     &
<                                    aice0 = aice0(i,j,  iblk),     &
<                                    ntrcr = ntrcr,                 &
<                                    trcr_depend   = trcr_depend,   &
<                                    trcr_base     = trcr_base,     &
<                                    n_trcr_strata = n_trcr_strata, &
<                                    nt_strata     = nt_strata)
---
>          call icepack_aggregate (ncat,               &
>                                 aicen(i,j,:,iblk),  &
>                                 trcrn(i,j,:,:,iblk),&
>                                 vicen(i,j,:,iblk),  &
>                                 vsnon(i,j,:,iblk),  &
>                                 aice (i,j,  iblk),  &
>                                 trcr (i,j,:,iblk),  &
>                                 vice (i,j,  iblk),  &
>                                 vsno (i,j,  iblk),  &
>                                 aice0(i,j,  iblk),  &
>                                 ntrcr,              &
>                                 trcr_depend,        &
>                                 trcr_base,          &
>                                 n_trcr_strata,      &
>                                 nt_strata)
859,873c859,873
<             call icepack_aggregate(ncat  = ncat,                  &
<                                    aicen = aicen(i,j,:,iblk),     &
<                                    trcrn = trcrn(i,j,:,:,iblk),   &
<                                    vicen = vicen(i,j,:,iblk),     &
<                                    vsnon = vsnon(i,j,:,iblk),     &
<                                    aice  = aice (i,j,  iblk),     &
<                                    trcr  = trcr (i,j,:,iblk),     &
<                                    vice  = vice (i,j,  iblk),     &
<                                    vsno  = vsno (i,j,  iblk),     &
<                                    aice0 = aice0(i,j,  iblk),     &
<                                    ntrcr = ntrcr,                 &
<                                    trcr_depend   = trcr_depend,   &
<                                    trcr_base     = trcr_base,     &
<                                    n_trcr_strata = n_trcr_strata, &
<                                    nt_strata     = nt_strata)
---
>          call icepack_aggregate (ncat,               &
>                                 aicen(i,j,:,iblk),  &
>                                 trcrn(i,j,:,:,iblk),&
>                                 vicen(i,j,:,iblk),  &
>                                 vsnon(i,j,:,iblk),  &
>                                 aice (i,j,  iblk),  &
>                                 trcr (i,j,:,iblk),  &
>                                 vice (i,j,  iblk),  &
>                                 vsno (i,j,  iblk),  &
>                                 aice0(i,j,  iblk),  &
>                                 ntrcr,              &
>                                 trcr_depend,        &
>                                 trcr_base,          &
>                                 n_trcr_strata,      &
>                                 nt_strata)
diff -r ./cicecore/cicedynB/infrastructure/ice_restoring.F90 /data/tar/git_cice/CICE/cicecore/cicedynB/infrastructure/ice_restoring.F90
514,519c514,518
<                call icepack_init_trcr(Tair=Tair(i,j),    Tf=Tf(i,j),  &
<                                       Sprofile=salinz(i,j,:),         &
<                                       Tprofile=Tmltz(i,j,:),          &
<                                       Tsfc=Tsfc,                      &
<                                       nilyr=nilyr,       nslyr=nslyr, &
<                                       qin=qin(:),        qsn=qsn(:))
---
>                call icepack_init_trcr(Tair(i,j),     Tf(i,j),      &
>                                      salinz(i,j,:), Tmltz(i,j,:), &
>                                      Tsfc,                        &
>                                      nilyr,         nslyr,        &
>                                      qin(:),        qsn(:))
diff -r ./cicecore/drivers/direct/hadgem3/CICE_InitMod.F90 /data/tar/git_cice/CICE/cicecore/drivers/direct/hadgem3/CICE_InitMod.F90
135c135
<       call icepack_init_itd(ncat=ncat, hin_max=hin_max)  ! ice thickness distribution
---
>       call icepack_init_itd(ncat, hin_max)  ! ice thickness distribution
137c137
<          call icepack_init_itd_hist(ncat=ncat, hin_max=hin_max, c_hi_range=c_hi_range) ! output
---
>          call icepack_init_itd_hist(ncat, hin_max, c_hi_range) ! output
398,412c398,412
<             call icepack_aggregate(ncat  = ncat,                  &
<                                    aicen = aicen(i,j,:,iblk),     &
<                                    trcrn = trcrn(i,j,:,:,iblk),   &
<                                    vicen = vicen(i,j,:,iblk),     &
<                                    vsnon = vsnon(i,j,:,iblk),     &
<                                    aice  = aice (i,j,  iblk),     &
<                                    trcr  = trcr (i,j,:,iblk),     &
<                                    vice  = vice (i,j,  iblk),     &
<                                    vsno  = vsno (i,j,  iblk),     &
<                                    aice0 = aice0(i,j,  iblk),     &
<                                    ntrcr = ntrcr,                 &
<                                    trcr_depend   = trcr_depend,   &
<                                    trcr_base     = trcr_base,     &
<                                    n_trcr_strata = n_trcr_strata, &
<                                    nt_strata     = nt_strata)
---
>             call icepack_aggregate (ncat,               &
>                                    aicen(i,j,:,iblk),  &
>                                    trcrn(i,j,:,:,iblk),&
>                                    vicen(i,j,:,iblk),  &
>                                    vsnon(i,j,:,iblk),  &
>                                    aice (i,j,  iblk),  &
>                                    trcr (i,j,:,iblk),  &
>                                    vice (i,j,  iblk),  &
>                                    vsno (i,j,  iblk),  &
>                                    aice0(i,j,  iblk),  &
>                                    ntrcr,          &
>                                    trcr_depend,        &
>                                    trcr_base,          &
>                                    n_trcr_strata,      &
>                                    nt_strata)
diff -r ./cicecore/drivers/mct/cesm1/CICE_InitMod.F90 /data/tar/git_cice/CICE/cicecore/drivers/mct/cesm1/CICE_InitMod.F90
139c139
<       call icepack_init_itd(ncat=ncat, hin_max=hin_max)  ! ice thickness distribution
---
>       call icepack_init_itd(ncat, hin_max)  ! ice thickness distribution
141c141
<          call icepack_init_itd_hist(ncat=ncat, hin_max=hin_max, c_hi_range=c_hi_range) ! output
---
>          call icepack_init_itd_hist(ncat, hin_max, c_hi_range) ! output
398,412c398,412
<             call icepack_aggregate(ncat  = ncat,                  &
<                                    aicen = aicen(i,j,:,iblk),     &
<                                    trcrn = trcrn(i,j,:,:,iblk),   &
<                                    vicen = vicen(i,j,:,iblk),     &
<                                    vsnon = vsnon(i,j,:,iblk),     &
<                                    aice  = aice (i,j,  iblk),     &
<                                    trcr  = trcr (i,j,:,iblk),     &
<                                    vice  = vice (i,j,  iblk),     &
<                                    vsno  = vsno (i,j,  iblk),     &
<                                    aice0 = aice0(i,j,  iblk),     &
<                                    ntrcr = ntrcr,                 &
<                                    trcr_depend   = trcr_depend,   &
<                                    trcr_base     = trcr_base,     &
<                                    n_trcr_strata = n_trcr_strata, &
<                                    nt_strata     = nt_strata)
---
>             call icepack_aggregate (ncat,               &
>                                    aicen(i,j,:,iblk),  &
>                                    trcrn(i,j,:,:,iblk),&
>                                    vicen(i,j,:,iblk),  &
>                                    vsnon(i,j,:,iblk),  &
>                                    aice (i,j,  iblk),  &
>                                    trcr (i,j,:,iblk),  &
>                                    vice (i,j,  iblk),  &
>                                    vsno (i,j,  iblk),  &
>                                    aice0(i,j,  iblk),  &
>                                    ntrcr,              &
>                                    trcr_depend,        &
>                                    trcr_base,          &
>                                    n_trcr_strata,      &
>                                    nt_strata)
diff -r ./cicecore/drivers/mct/cesm1/ice_prescribed_mod.F90 /data/tar/git_cice/CICE/cicecore/drivers/mct/cesm1/ice_prescribed_mod.F90
547,561c547,557
<          call icepack_aggregate(ncat  = ncat,                      &
<                                 aicen = aicen(i,j,:,iblk),         &
<                                 trcrn = trcrn(i,j,1:ntrcr,:,iblk), &
<                                 vicen = vicen(i,j,:,iblk),         &
<                                 vsnon = vsnon(i,j,:,iblk),         &
<                                 aice  = aice (i,j,  iblk),         &
<                                 trcr  = trcr (i,j,1:ntrcr,iblk),   &
<                                 vice  = vice (i,j,  iblk),         &
<                                 vsno  = vsno (i,j,  iblk),         &
<                                 aice0 = aice0(i,j,  iblk),         &
<                                 ntrcr = ntrcr,                     &
<                                 trcr_depend   = trcr_depend(1:ntrcr),   &
<                                 trcr_base     = trcr_base(1:ntrcr,:),   &
<                                 n_trcr_strata = n_trcr_strata(1:ntrcr), &
<                                 nt_strata     = nt_strata(1:ntrcr,:))
---
>       call icepack_aggregate (ncat,                                         &
>                              aicen(i,j,:,iblk), trcrn(i,j,1:ntrcr,:,iblk), &
>                              vicen(i,j,:,iblk), vsnon(i,j,  :,iblk),       &
>                              aice (i,j,  iblk), trcr (i,j,1:ntrcr,  iblk), &
>                              vice (i,j,  iblk), vsno (i,j,    iblk),       &
>                              aice0(i,j,  iblk),                            &
>                              ntrcr,                                        &
>                              trcr_depend(1:ntrcr),                         &
>                              trcr_base(1:ntrcr,:),                         &
>                              n_trcr_strata(1:ntrcr),                       &
>                              nt_strata(1:ntrcr,:))
diff -r ./cicecore/drivers/nuopc/cmeps/CICE_InitMod.F90 /data/tar/git_cice/CICE/cicecore/drivers/nuopc/cmeps/CICE_InitMod.F90
139c139
<       call icepack_init_itd(ncat=ncat, hin_max=hin_max)  ! ice thickness distribution
---
>       call icepack_init_itd(ncat, hin_max)  ! ice thickness distribution
141c141
<          call icepack_init_itd_hist(ncat=ncat, hin_max=hin_max, c_hi_range=c_hi_range) ! output
---
>          call icepack_init_itd_hist(ncat, hin_max, c_hi_range) ! output
398,412c398,412
<             call icepack_aggregate(ncat  = ncat,                  &
<                                    aicen = aicen(i,j,:,iblk),     &
<                                    trcrn = trcrn(i,j,:,:,iblk),   &
<                                    vicen = vicen(i,j,:,iblk),     &
<                                    vsnon = vsnon(i,j,:,iblk),     &
<                                    aice  = aice (i,j,  iblk),     &
<                                    trcr  = trcr (i,j,:,iblk),     &
<                                    vice  = vice (i,j,  iblk),     &
<                                    vsno  = vsno (i,j,  iblk),     &
<                                    aice0 = aice0(i,j,  iblk),     &
<                                    ntrcr = ntrcr,                 &
<                                    trcr_depend   = trcr_depend,   &
<                                    trcr_base     = trcr_base,     &
<                                    n_trcr_strata = n_trcr_strata, &
<                                    nt_strata     = nt_strata)
---
>             call icepack_aggregate (ncat,               &
>                                    aicen(i,j,:,iblk),  &
>                                    trcrn(i,j,:,:,iblk),&
>                                    vicen(i,j,:,iblk),  &
>                                    vsnon(i,j,:,iblk),  &
>                                    aice (i,j,  iblk),  &
>                                    trcr (i,j,:,iblk),  &
>                                    vice (i,j,  iblk),  &
>                                    vsno (i,j,  iblk),  &
>                                    aice0(i,j,  iblk),  &
>                                    ntrcr,              &
>                                    trcr_depend,        &
>                                    trcr_base,          &
>                                    n_trcr_strata,      &
>                                    nt_strata)
diff -r ./cicecore/drivers/nuopc/cmeps/ice_prescribed_mod.F90 /data/tar/git_cice/CICE/cicecore/drivers/nuopc/cmeps/ice_prescribed_mod.F90
495,509c495,508
<                 call icepack_aggregate(ncat  = ncat,                  &
<                                        aicen = aicen(i,j,:,iblk),     &
<                                        trcrn = trcrn(i,j,1:ntrcr,:,iblk), &
<                                        vicen = vicen(i,j,:,iblk),     &
<                                        vsnon = vsnon(i,j,:,iblk),     &
<                                        aice  = aice (i,j,  iblk),     &
<                                        trcr  = trcr (i,j,1:ntrcr,iblk), &
<                                        vice  = vice (i,j,  iblk),     &
<                                        vsno  = vsno (i,j,  iblk),     &
<                                        aice0 = aice0(i,j,  iblk),     &
<                                        ntrcr = ntrcr,                 &
<                                        trcr_depend   = trcr_depend(1:ntrcr),   &
<                                        trcr_base     = trcr_base(1:ntrcr,:),   &
<                                        n_trcr_strata = n_trcr_strata(1:ntrcr), &
<                                        nt_strata     = nt_strata(1:ntrcr,:))
---
>                 call icepack_aggregate (ncat, &
>                      aicen(i,j,:,iblk),                       &
>                      trcrn(i,j,1:ntrcr,:,iblk),               &
>                      vicen(i,j,:,iblk), vsnon(i,j,  :,iblk),  &
>                      aice (i,j,  iblk),                       &
>                      trcr (i,j,1:ntrcr,  iblk),               &
>                      vice (i,j,  iblk), vsno (i,j,    iblk),  &
>                      aice0(i,j,  iblk),                       &
>                      ntrcr,                                   &
>                      trcr_depend(1:ntrcr),                    &
>                      trcr_base(1:ntrcr,:),                    &
>                      n_trcr_strata(1:ntrcr),                  &
>                      nt_strata(1:ntrcr,:))
> 
Only in /data/tar/git_cice/CICE/cicecore/drivers/nuopc/dmi: cice_cap.F90_info
diff -r ./cicecore/drivers/standalone/cice/CICE_InitMod.F90 /data/tar/git_cice/CICE/cicecore/drivers/standalone/cice/CICE_InitMod.F90
138c138
<       call icepack_init_itd(ncat=ncat, hin_max=hin_max)  ! ice thickness distribution
---
>       call icepack_init_itd(ncat, hin_max)  ! ice thickness distribution
140c140
<          call icepack_init_itd_hist(ncat=ncat, hin_max=hin_max, c_hi_range=c_hi_range) ! output
---
>          call icepack_init_itd_hist(ncat, hin_max, c_hi_range) ! output
402,416c402,416
<             call icepack_aggregate(ncat  = ncat,                  &
<                                    aicen = aicen(i,j,:,iblk),     &
<                                    trcrn = trcrn(i,j,:,:,iblk),   &
<                                    vicen = vicen(i,j,:,iblk),     &
<                                    vsnon = vsnon(i,j,:,iblk),     &
<                                    aice  = aice (i,j,  iblk),     &
<                                    trcr  = trcr (i,j,:,iblk),     &
<                                    vice  = vice (i,j,  iblk),     &
<                                    vsno  = vsno (i,j,  iblk),     &
<                                    aice0 = aice0(i,j,  iblk),     &
<                                    ntrcr = ntrcr,                 &
<                                    trcr_depend   = trcr_depend,   &
<                                    trcr_base     = trcr_base,     &
<                                    n_trcr_strata = n_trcr_strata, &
<                                    nt_strata     = nt_strata)
---
>             call icepack_aggregate (ncat,               &
>                                    aicen(i,j,:,iblk),  &
>                                    trcrn(i,j,:,:,iblk),&
>                                    vicen(i,j,:,iblk),  &
>                                    vsnon(i,j,:,iblk),  &
>                                    aice (i,j,  iblk),  &
>                                    trcr (i,j,:,iblk),  &
>                                    vice (i,j,  iblk),  &
>                                    vsno (i,j,  iblk),  &
>                                    aice0(i,j,  iblk),  &
>                                    ntrcr,              &
>                                    trcr_depend,        &
>                                    trcr_base,          &
>                                    n_trcr_strata,      &
>                                    nt_strata)
diff -r ./cicecore/shared/ice_init_column.F90 /data/tar/git_cice/CICE/cicecore/shared/ice_init_column.F90
149c149
<       call icepack_init_thermo(nilyr=nilyr, sprofile=sprofile)
---
>       call icepack_init_thermo(nilyr, sprofile)
334,376c334,373
<                call icepack_step_radiation (dt=dt, ncat=ncat,                  &
<                           n_algae=n_algae, tr_zaero=tr_zaero, nblyr=nblyr,     &
<                           ntrcr=ntrcr, nbtrcr_sw=nbtrcr_sw,                    &
<                           nilyr=nilyr, nslyr=nslyr, n_aero=n_aero,             &
<                           n_zaero=n_zaero,  nlt_chl_sw=nlt_chl_sw,             &
<                           nlt_zaero_sw=nlt_zaero_sw(:),                        &
<                           dEdd_algae=dEdd_algae,                               &
<                           swgrid=swgrid(:), igrid=igrid(:),                    &
<                           fbri=fbri(:),                                        &
<                           aicen=aicen(i,j,:,iblk),                             &
<                           vicen=vicen(i,j,:,iblk),                             &
<                           vsnon=vsnon(i,j,:,iblk),                             &
<                           Tsfcn=trcrn(i,j,nt_Tsfc,:,iblk),                     &
<                           alvln=trcrn(i,j,nt_alvl,:,iblk),                     &
<                           apndn=trcrn(i,j,nt_apnd,:,iblk),                     &
<                           hpndn=trcrn(i,j,nt_hpnd,:,iblk),                     &
<                           ipndn=trcrn(i,j,nt_ipnd,:,iblk),                     &
<                           aeron=trcrn(i,j,nt_aero:nt_aero+4*n_aero-1,:,iblk),  &
<                           zbion=ztrcr_sw,                                      &
<                           trcrn=ztrcr,                                         &
<                           TLAT=TLAT(i,j,iblk), TLON=TLON(i,j,iblk),            &
<                           calendar_type=calendar_type,                         &
<                           days_per_year=days_per_year,                         &
<                           nextsw_cday=nextsw_cday, yday=yday,                  &
<                           sec=sec,                                             &
<                           kaer_tab=kaer_tab, kaer_bc_tab=kaer_bc_tab(:,:),     &
<                           waer_tab=waer_tab, waer_bc_tab=waer_bc_tab(:,:),     &
<                           gaer_tab=gaer_tab, gaer_bc_tab=gaer_bc_tab(:,:),     &
<                           bcenh=bcenh(:,:,:),                                  &
<                           modal_aero=modal_aero,                               &
<                           swvdr=swvdr(i,j,iblk),         swvdf=swvdf(i,j,iblk),&
<                           swidr=swidr(i,j,iblk),         swidf=swidf(i,j,iblk),&
<                           coszen=coszen(i,j,iblk),       fsnow=fsnow(i,j,iblk),&
<                           alvdrn=alvdrn(i,j,:,iblk),     alvdfn=alvdfn(i,j,:,iblk), &
<                           alidrn=alidrn(i,j,:,iblk),     alidfn=alidfn(i,j,:,iblk), &
<                           fswsfcn=fswsfcn(i,j,:,iblk),   fswintn=fswintn(i,j,:,iblk), &
<                           fswthrun=fswthrun(i,j,:,iblk), fswpenln=fswpenln(i,j,:,:,iblk), &
<                           Sswabsn=Sswabsn(i,j,:,:,iblk), Iswabsn=Iswabsn(i,j,:,:,iblk), &
<                           albicen=albicen(i,j,:,iblk),   albsnon=albsnon(i,j,:,iblk), &
<                           albpndn=albpndn(i,j,:,iblk),   apeffn=apeffn(i,j,:,iblk), &
<                           snowfracn=snowfracn(i,j,:,iblk),                     &
<                           dhsn=dhsn(i,j,:,iblk),         ffracn=ffracn(i,j,:,iblk), &
<                           l_print_point=l_print_point,                         &
---
>                call icepack_step_radiation (dt,         ncat,             &
>                           n_algae,   tr_zaero, nblyr,                     &
>                           ntrcr,     nbtrcr_sw,                           &
>                           nilyr,    nslyr,       n_aero,                  &
>                           n_zaero,  dEdd_algae,  nlt_chl_sw,              &
>                           nlt_zaero_sw(:),                                &
>                           swgrid(:),           igrid(:),                  &
>                           fbri(:),                                        &
>                           aicen(i,j,:,iblk),     vicen(i,j,:,iblk),       &
>                           vsnon(i,j,:,iblk),                              &
>                           trcrn(i,j,nt_Tsfc,:,iblk),                      &
>                           trcrn(i,j,nt_alvl,:,iblk),                      &
>                           trcrn(i,j,nt_apnd,:,iblk),                      &
>                           trcrn(i,j,nt_hpnd,:,iblk),                      &
>                           trcrn(i,j,nt_ipnd,:,iblk),                      &
>                           trcrn(i,j,nt_aero:nt_aero+4*n_aero-1,:,iblk),   &
>                           ztrcr_sw,                                       &
>                           ztrcr,                                          &
>                           TLAT(i,j,iblk),        TLON(i,j,iblk),          &
>                           calendar_type,         days_per_year,           &
>                           nextsw_cday,           yday,                    &
>                           sec,                                            &
>                           kaer_tab, waer_tab,                             &
>                           gaer_tab,                                       &
>                           kaer_bc_tab(:,:),      waer_bc_tab(:,:),        &
>                           gaer_bc_tab(:,:),      bcenh(:,:,:),            &
>                           modal_aero,                                     &
>                           swvdr(i,j,iblk),       swvdf(i,j,iblk),         &
>                           swidr(i,j,iblk),       swidf(i,j,iblk),         &
>                           coszen(i,j,iblk),      fsnow(i,j,iblk),         &
>                           alvdrn(i,j,:,iblk),    alvdfn(i,j,:,iblk),      &
>                           alidrn(i,j,:,iblk),    alidfn(i,j,:,iblk),      &
>                           fswsfcn(i,j,:,iblk),   fswintn(i,j,:,iblk),     &
>                           fswthrun(i,j,:,iblk),  fswpenln(i,j,:,:,iblk),  &
>                           Sswabsn(i,j,:,:,iblk), Iswabsn(i,j,:,:,iblk),   &
>                           albicen(i,j,:,iblk),   albsnon(i,j,:,iblk),     &
>                           albpndn(i,j,:,iblk),   apeffn(i,j,:,iblk),      &
>                           snowfracn(i,j,:,iblk),                          &
>                           dhsn(i,j,:,iblk),      ffracn(i,j,:,iblk),      &
>                           l_print_point,                                  &
683,689c680,681
<                call icepack_init_zsalinity(nblyr=nblyr, ntrcr_o=ntrcr_o, &
<                             Rayleigh_criteria = RayleighC, &
<                             Rayleigh_real     = RayleighR, &
<                             trcrn             = trcrn_bgc, &
<                             nt_bgc_S          = nt_bgc_S,  &
<                             ncat              = ncat,      &
<                             sss               = sss(i,j,iblk))
---
>                call icepack_init_zsalinity(nblyr, ntrcr_o, RayleighC, &
>                       RayleighR, trcrn_bgc, nt_bgc_S, ncat, sss(i,j,iblk))
731,737c723,727
<                     amm=amm      (i,j,  iblk), dmsp=dmsp(i,j,  iblk), dms=dms(i,j,  iblk), &
<                     algalN=algalN(i,j,:,iblk), doc=doc  (i,j,:,iblk), dic=dic(i,j,:,iblk), &
<                     don=don      (i,j,:,iblk), fed=fed  (i,j,:,iblk), fep=fep(i,j,:,iblk), &
<                     hum=hum      (i,j,  iblk), nit=nit  (i,j,  iblk), sil=sil(i,j,  iblk), &
<                     zaeros=zaeros(i,j,:,iblk), &
<                     max_dic = icepack_max_dic, max_don  = icepack_max_don, &
<                     max_fe  = icepack_max_fe,  max_aero = icepack_max_aero)
---
>                     amm   (i,j,  iblk), dmsp(i,j,  iblk), dms(i,j,  iblk), &
>                     algalN(i,j,:,iblk), doc (i,j,:,iblk), dic(i,j,:,iblk), &
>                     don   (i,j,:,iblk), fed (i,j,:,iblk), fep(i,j,:,iblk), &
>                     hum   (i,j,  iblk), nit (i,j,  iblk), sil(i,j,  iblk), &
>                     zaeros(i,j,:,iblk), icepack_max_dic, icepack_max_don, icepack_max_fe, icepack_max_aero)
773,781c763,770
<             call icepack_init_OceanConcArray(max_nbtrcr=icepack_max_nbtrcr,      &
<                          max_algae=icepack_max_algae, max_don=icepack_max_don,   &
<                          max_doc=icepack_max_doc,     max_fe=icepack_max_fe,     &
<                          max_dic=icepack_max_dic,     max_aero=icepack_max_aero, &
<                          nit =nit (i,j,  iblk), amm=amm(i,j,  iblk), sil   =sil   (i,j,  iblk), &
<                          dmsp=dmsp(i,j,  iblk), dms=dms(i,j,  iblk), algalN=algalN(i,j,:,iblk), &
<                          doc =doc (i,j,:,iblk), don=don(i,j,:,iblk), dic   =dic   (i,j,:,iblk), &  
<                          fed =fed (i,j,:,iblk), fep=fep(i,j,:,iblk), zaeros=zaeros(i,j,:,iblk), &
<                          hum=hum  (i,j,  iblk), ocean_bio_all=ocean_bio_all(i,j,:,iblk))
---
>             call icepack_init_OceanConcArray(icepack_max_nbtrcr,         &
>                                  icepack_max_algae, icepack_max_don,  icepack_max_doc,   &
>                                  icepack_max_dic,   icepack_max_aero, icepack_max_fe,    &
>                                  nit (i,j,  iblk), amm(i,j,  iblk), sil   (i,j,  iblk), &
>                                  dmsp(i,j,  iblk), dms(i,j,  iblk), algalN(i,j,:,iblk), &
>                                  doc (i,j,:,iblk), don(i,j,:,iblk), dic   (i,j,:,iblk), &  
>                                  fed (i,j,:,iblk), fep(i,j,:,iblk), zaeros(i,j,:,iblk), &
>                                  ocean_bio_all(i,j,:,iblk),         hum   (i,j,  iblk))
805,808c794,797
<             call icepack_init_bgc(ncat=ncat, nblyr=nblyr, nilyr=nilyr, ntrcr_o=ntrcr_o,  &
<                          cgrid=cgrid, igrid=igrid, ntrcr=ntrcr, nbtrcr=nbtrcr,           &
<                          sicen=sicen(:,:), trcrn=trcrn_bgc(:,:), sss=sss(i,j, iblk), &
<                          ocean_bio_all=ocean_bio_all(i,j,:,iblk))
---
>             call icepack_init_bgc(ncat, nblyr, nilyr, ntrcr_o, &
>                cgrid, igrid, ntrcr, nbtrcr, &
>                sicen(:,:), trcrn_bgc(:,:), sss(i,j, iblk), &
>                ocean_bio_all(i,j,:,iblk))
849,850c838,839
<       call icepack_init_hbrine(bgrid=bgrid, igrid=igrid, cgrid=cgrid, icgrid=icgrid, &
<             swgrid=swgrid, nblyr=nblyr, nilyr=nilyr, phi_snow=phi_snow)
---
>       call icepack_init_hbrine(bgrid, igrid, cgrid, icgrid, &
>             swgrid, nblyr, nilyr, phi_snow)
Only in ./configuration/scripts/tests: nothread_quicksuite.ts
diff -r ./.git/COMMIT_EDITMSG /data/tar/git_cice/CICE/.git/COMMIT_EDITMSG
1c1
< remove dum.dat
---
> Added a cice cap for info. It is not desirable for DMI in the current setup to put the cice nuopc cap here as it requires building of esmf at the same time
diff -r ./.git/config /data/tar/git_cice/CICE/.git/config
12,16d11
< [submodule "Icepack"]
< 	url = https://github.com/TillRasmussen/Icepack
< [remote "upstream"]
< 	url = https://github.com/CICE-Consortium/CICE.git
< 	fetch = +refs/heads/*:refs/remotes/upstream/*
diff -r ./.git/FETCH_HEAD /data/tar/git_cice/CICE/.git/FETCH_HEAD
1,2c1
< 333a5a28ccd0bfc3059a1b35a290509ee6513102	not-for-merge	branch 'cice6.0' of https://github.com/CICE-Consortium/CICE
< 38816bac934df4582ed21fc7cb0fcb7dd57773f5	not-for-merge	branch 'master' of https://github.com/CICE-Consortium/CICE
---
> c4bccda069cf600dd1a94f649601ff55ff213abc		branch 'master' of github.com:TillRasmussen/CICE
Binary files ./.git/index and /data/tar/git_cice/CICE/.git/index differ
diff -r ./.git/logs/HEAD /data/tar/git_cice/CICE/.git/logs/HEAD
1,6c1,13
< 0000000000000000000000000000000000000000 0fea6c427ffc4dd3071ddab4ed527e14ecb24c11 TillRasmussen <tillrasmussen@gmail.com> 1575069727 +0000	clone: from git@github.com:TillRasmussen/CICE.git
< 0fea6c427ffc4dd3071ddab4ed527e14ecb24c11 0fea6c427ffc4dd3071ddab4ed527e14ecb24c11 TillRasmussen <tillrasmussen@gmail.com> 1575070183 +0000	checkout: moving from master to master
< 0fea6c427ffc4dd3071ddab4ed527e14ecb24c11 451d91addd6ffaff3bf60167748b79d710dea52e TillRasmussen <tillrasmussen@gmail.com> 1575072239 +0000	commit (merge): test
< 451d91addd6ffaff3bf60167748b79d710dea52e 98df1b2ca479e562eacf9968565f2271aae197da TillRasmussen <tillrasmussen@gmail.com> 1575072420 +0000	commit: remove dum.dat
< 98df1b2ca479e562eacf9968565f2271aae197da 98df1b2ca479e562eacf9968565f2271aae197da TillRasmussen <tillrasmussen@gmail.com> 1575109106 +0000	checkout: moving from master to master
< 98df1b2ca479e562eacf9968565f2271aae197da 38816bac934df4582ed21fc7cb0fcb7dd57773f5 TillRasmussen <tillrasmussen@gmail.com> 1575109179 +0000	reset: moving to upstream/master
---
> 0000000000000000000000000000000000000000 6fa1cbb33699738d63dc0bbdd555a69e6940f5c1 TillRasmussen <tillrasmussen@gmail.com> 1566829468 +0000	clone: from git@github.com:TillRasmussen/CICE.git
> 6fa1cbb33699738d63dc0bbdd555a69e6940f5c1 3fbb2cd308be4555767367d5c40b8fd980c4c080 TillRasmussen <tillrasmussen@gmail.com> 1566829964 +0000	pull origin master: Fast-forward
> 3fbb2cd308be4555767367d5c40b8fd980c4c080 3fbb2cd308be4555767367d5c40b8fd980c4c080 TillRasmussen <tillrasmussen@gmail.com> 1566889393 +0000	checkout: moving from master to coupled
> 3fbb2cd308be4555767367d5c40b8fd980c4c080 bca1df5c4950db0b08bf887ef5e9a2c5181b13a6 TillRasmussen <tillrasmussen@gmail.com> 1566889716 +0000	commit: added driver_dmi
> bca1df5c4950db0b08bf887ef5e9a2c5181b13a6 33594a5ed37d4beb3fdc2677b7115c2c8430d46b TillRasmussen <tillrasmussen@gmail.com> 1566996437 +0000	commit: added CICE.F90
> 33594a5ed37d4beb3fdc2677b7115c2c8430d46b 8eca24bc6805c2ddb6ab0611758cee22c9b56d9c TillRasmussen <tillrasmussen@gmail.com> 1573046975 +0000	commit: correct integer division and message spaces
> 8eca24bc6805c2ddb6ab0611758cee22c9b56d9c 3fbb2cd308be4555767367d5c40b8fd980c4c080 TillRasmussen <tillrasmussen@gmail.com> 1573047044 +0000	checkout: moving from coupled to master
> 3fbb2cd308be4555767367d5c40b8fd980c4c080 74a6b63a23a06d4127e502a82e7da854ebb16070 TillRasmussen <tillrasmussen@gmail.com> 1573047704 +0000	pull: Fast-forward
> 74a6b63a23a06d4127e502a82e7da854ebb16070 bb3673e5273b5759911e67cbb4eb7308b1059d8e TillRasmussen <tillrasmussen@gmail.com> 1573229522 +0000	commit: Fix for bug in ice_Grid and anglet
> bb3673e5273b5759911e67cbb4eb7308b1059d8e 506642e6f4e827c59a3fed2684e0163d5bc1d5ea TillRasmussen <tillrasmussen@gmail.com> 1573230789 +0000	pull: Merge made by the 'recursive' strategy.
> 506642e6f4e827c59a3fed2684e0163d5bc1d5ea cf012428173d99654eefe37777d52326edb68e5d TillRasmussen <tillrasmussen@gmail.com> 1573233532 +0000	commit: merged changes from branch (coupled)
> cf012428173d99654eefe37777d52326edb68e5d c4bccda069cf600dd1a94f649601ff55ff213abc TillRasmussen <tillrasmussen@gmail.com> 1574327995 +0000	pull origin master: Fast-forward
> c4bccda069cf600dd1a94f649601ff55ff213abc fcae2e828ad137e22d27a5ba1e76635810622f27 TillRasmussen <tillrasmussen@gmail.com> 1574328442 +0000	commit: Added a cice cap for info. It is not desirable for DMI in the current setup to put the cice nuopc cap here as it requires building of esmf at the same time
Only in /data/tar/git_cice/CICE/.git/logs/refs/heads: coupled
diff -r ./.git/logs/refs/heads/master /data/tar/git_cice/CICE/.git/logs/refs/heads/master
1,4c1,8
< 0000000000000000000000000000000000000000 0fea6c427ffc4dd3071ddab4ed527e14ecb24c11 TillRasmussen <tillrasmussen@gmail.com> 1575069727 +0000	clone: from git@github.com:TillRasmussen/CICE.git
< 0fea6c427ffc4dd3071ddab4ed527e14ecb24c11 451d91addd6ffaff3bf60167748b79d710dea52e TillRasmussen <tillrasmussen@gmail.com> 1575072239 +0000	commit (merge): test
< 451d91addd6ffaff3bf60167748b79d710dea52e 98df1b2ca479e562eacf9968565f2271aae197da TillRasmussen <tillrasmussen@gmail.com> 1575072420 +0000	commit: remove dum.dat
< 98df1b2ca479e562eacf9968565f2271aae197da 38816bac934df4582ed21fc7cb0fcb7dd57773f5 TillRasmussen <tillrasmussen@gmail.com> 1575109179 +0000	reset: moving to upstream/master
---
> 0000000000000000000000000000000000000000 6fa1cbb33699738d63dc0bbdd555a69e6940f5c1 TillRasmussen <tillrasmussen@gmail.com> 1566829468 +0000	clone: from git@github.com:TillRasmussen/CICE.git
> 6fa1cbb33699738d63dc0bbdd555a69e6940f5c1 3fbb2cd308be4555767367d5c40b8fd980c4c080 TillRasmussen <tillrasmussen@gmail.com> 1566829964 +0000	pull origin master: Fast-forward
> 3fbb2cd308be4555767367d5c40b8fd980c4c080 74a6b63a23a06d4127e502a82e7da854ebb16070 TillRasmussen <tillrasmussen@gmail.com> 1573047704 +0000	pull: Fast-forward
> 74a6b63a23a06d4127e502a82e7da854ebb16070 bb3673e5273b5759911e67cbb4eb7308b1059d8e TillRasmussen <tillrasmussen@gmail.com> 1573229522 +0000	commit: Fix for bug in ice_Grid and anglet
> bb3673e5273b5759911e67cbb4eb7308b1059d8e 506642e6f4e827c59a3fed2684e0163d5bc1d5ea TillRasmussen <tillrasmussen@gmail.com> 1573230789 +0000	pull: Merge made by the 'recursive' strategy.
> 506642e6f4e827c59a3fed2684e0163d5bc1d5ea cf012428173d99654eefe37777d52326edb68e5d TillRasmussen <tillrasmussen@gmail.com> 1573233532 +0000	commit: merged changes from branch (coupled)
> cf012428173d99654eefe37777d52326edb68e5d c4bccda069cf600dd1a94f649601ff55ff213abc TillRasmussen <tillrasmussen@gmail.com> 1574327995 +0000	pull origin master: Fast-forward
> c4bccda069cf600dd1a94f649601ff55ff213abc fcae2e828ad137e22d27a5ba1e76635810622f27 TillRasmussen <tillrasmussen@gmail.com> 1574328442 +0000	commit: Added a cice cap for info. It is not desirable for DMI in the current setup to put the cice nuopc cap here as it requires building of esmf at the same time
Only in /data/tar/git_cice/CICE/.git/logs/refs/remotes/origin: coupled
diff -r ./.git/logs/refs/remotes/origin/HEAD /data/tar/git_cice/CICE/.git/logs/refs/remotes/origin/HEAD
1c1
< 0000000000000000000000000000000000000000 0fea6c427ffc4dd3071ddab4ed527e14ecb24c11 TillRasmussen <tillrasmussen@gmail.com> 1575069727 +0000	clone: from git@github.com:TillRasmussen/CICE.git
---
> 0000000000000000000000000000000000000000 6fa1cbb33699738d63dc0bbdd555a69e6940f5c1 TillRasmussen <tillrasmussen@gmail.com> 1566829468 +0000	clone: from git@github.com:TillRasmussen/CICE.git
diff -r ./.git/logs/refs/remotes/origin/master /data/tar/git_cice/CICE/.git/logs/refs/remotes/origin/master
1,3c1,6
< 0fea6c427ffc4dd3071ddab4ed527e14ecb24c11 451d91addd6ffaff3bf60167748b79d710dea52e TillRasmussen <tillrasmussen@gmail.com> 1575072319 +0000	update by push
< 451d91addd6ffaff3bf60167748b79d710dea52e 98df1b2ca479e562eacf9968565f2271aae197da TillRasmussen <tillrasmussen@gmail.com> 1575072434 +0000	update by push
< 98df1b2ca479e562eacf9968565f2271aae197da 38816bac934df4582ed21fc7cb0fcb7dd57773f5 TillRasmussen <tillrasmussen@gmail.com> 1575109230 +0000	update by push
---
> 6fa1cbb33699738d63dc0bbdd555a69e6940f5c1 3fbb2cd308be4555767367d5c40b8fd980c4c080 TillRasmussen <tillrasmussen@gmail.com> 1566829963 +0000	pull origin master: fast-forward
> 3fbb2cd308be4555767367d5c40b8fd980c4c080 74a6b63a23a06d4127e502a82e7da854ebb16070 TillRasmussen <tillrasmussen@gmail.com> 1573047681 +0000	pull: fast-forward
> 74a6b63a23a06d4127e502a82e7da854ebb16070 d1927fd4632e9750019bf72f84172f79e3d706ba TillRasmussen <tillrasmussen@gmail.com> 1573230764 +0000	fetch: fast-forward
> d1927fd4632e9750019bf72f84172f79e3d706ba 506642e6f4e827c59a3fed2684e0163d5bc1d5ea TillRasmussen <tillrasmussen@gmail.com> 1573231244 +0000	update by push
> 506642e6f4e827c59a3fed2684e0163d5bc1d5ea cf012428173d99654eefe37777d52326edb68e5d TillRasmussen <tillrasmussen@gmail.com> 1573233540 +0000	update by push
> cf012428173d99654eefe37777d52326edb68e5d c4bccda069cf600dd1a94f649601ff55ff213abc TillRasmussen <tillrasmussen@gmail.com> 1574327994 +0000	pull origin master: fast-forward
Only in ./.git/logs/refs/remotes: upstream
Only in ./.git: modules
Only in ./.git/objects: 00
Only in /data/tar/git_cice/CICE/.git/objects: 02
Only in ./.git/objects/03: 8e76bbe70944f8de41c0e52d8cf6eedb5bd8fe
Only in /data/tar/git_cice/CICE/.git/objects/03: 911d68d064460d2edf7f7aed609b503d7af829
Only in /data/tar/git_cice/CICE/.git/objects: 04
Only in ./.git/objects: 08
Only in /data/tar/git_cice/CICE/.git/objects/0c: 0ea6f7b7649072b941f236af25468e0c2b64ff
Only in ./.git/objects/0c: ce18f21810331b542e147389d267bdebdc2b5e
Only in /data/tar/git_cice/CICE/.git/objects: 0d
Only in /data/tar/git_cice/CICE/.git/objects: 10
Only in ./.git/objects: 15
Only in /data/tar/git_cice/CICE/.git/objects: 17
Only in /data/tar/git_cice/CICE/.git/objects: 1d
Only in /data/tar/git_cice/CICE/.git/objects: 21
Only in /data/tar/git_cice/CICE/.git/objects: 26
Only in /data/tar/git_cice/CICE/.git/objects: 27
Only in ./.git/objects: 29
Only in /data/tar/git_cice/CICE/.git/objects/2d: 99a64761439dad1ef78abc08dc6063cb8cb9e6
Only in ./.git/objects/2d: b47fae76194aff50d4f21818c2298e78e3d5f6
Only in /data/tar/git_cice/CICE/.git/objects: 2e
Only in /data/tar/git_cice/CICE/.git/objects: 30
Only in /data/tar/git_cice/CICE/.git/objects: 33
Only in /data/tar/git_cice/CICE/.git/objects: 36
Only in ./.git/objects: 38
Only in ./.git/objects: 3a
Only in /data/tar/git_cice/CICE/.git/objects: 44
Only in ./.git/objects: 45
Only in /data/tar/git_cice/CICE/.git/objects: 47
Only in ./.git/objects: 4b
Only in /data/tar/git_cice/CICE/.git/objects: 4e
Only in /data/tar/git_cice/CICE/.git/objects: 4f
Only in /data/tar/git_cice/CICE/.git/objects: 50
Only in /data/tar/git_cice/CICE/.git/objects: 51
Only in ./.git/objects: 53
Only in ./.git/objects: 54
Only in ./.git/objects: 60
Only in ./.git/objects/61: 89a1fb297709f8897640cd353bf50a00fd3bf6
Only in /data/tar/git_cice/CICE/.git/objects/61: dd66fb0e4db34c79b7fb5e8aeee14e8d9d597b
Only in /data/tar/git_cice/CICE/.git/objects: 66
Only in /data/tar/git_cice/CICE/.git/objects: 67
Only in /data/tar/git_cice/CICE/.git/objects: 6a
Only in ./.git/objects: 6d
Only in /data/tar/git_cice/CICE/.git/objects: 70
Only in /data/tar/git_cice/CICE/.git/objects: 78
Only in /data/tar/git_cice/CICE/.git/objects: 7e
Only in /data/tar/git_cice/CICE/.git/objects: 80
Only in ./.git/objects: 82
Only in /data/tar/git_cice/CICE/.git/objects: 85
Only in ./.git/objects: 87
Only in ./.git/objects: 8a
Only in /data/tar/git_cice/CICE/.git/objects: 8e
Only in /data/tar/git_cice/CICE/.git/objects: 8f
Only in ./.git/objects: 92
Only in /data/tar/git_cice/CICE/.git/objects: 95
Only in ./.git/objects: 98
Only in /data/tar/git_cice/CICE/.git/objects: 9b
Only in ./.git/objects/9d: 6deac3df97bada538718584b34d0fe23021536
Only in /data/tar/git_cice/CICE/.git/objects/9d: ef9fb46b383634d4508e546394abbca517e411
Only in ./.git/objects: 9e
Only in ./.git/objects: a1
Only in ./.git/objects: af
Only in /data/tar/git_cice/CICE/.git/objects: b2
Only in /data/tar/git_cice/CICE/.git/objects: b5
Only in /data/tar/git_cice/CICE/.git/objects/b7: 4d7faef3de192f2ef5a6e2edec69b42c6647f2
Only in ./.git/objects/b7: fb0f4b879d6504769759684d46e5d40b4960de
Only in /data/tar/git_cice/CICE/.git/objects: b8
Only in ./.git/objects/b9: 45feeb6779303c590ebfb84b43ed332905224e
Only in ./.git/objects/b9: c797a9fae16c9c4a3fc34ae403ceabb0378283
Only in /data/tar/git_cice/CICE/.git/objects/b9: e0032e19d541e0dea4313ab58fdcd9fdbb5b07
Only in ./.git/objects: ba
Only in /data/tar/git_cice/CICE/.git/objects: bb
Only in /data/tar/git_cice/CICE/.git/objects/bc: a1df5c4950db0b08bf887ef5e9a2c5181b13a6
Only in ./.git/objects/bc: a8c7ab7304313a12732c2acde176e4aad7857e
Only in /data/tar/git_cice/CICE/.git/objects: bd
Only in ./.git/objects/bf: 12157bac41edd4a9c877d489f795cca8c113a5
Only in /data/tar/git_cice/CICE/.git/objects/bf: e506c332e1ef05660d639db4b49d571f1adccb
Only in /data/tar/git_cice/CICE/.git/objects: c0
Only in ./.git/objects/c4: 715fa61bae455fca02c117e8cb8062ed1b9b2e
Only in /data/tar/git_cice/CICE/.git/objects/c4: bccda069cf600dd1a94f649601ff55ff213abc
Only in /data/tar/git_cice/CICE/.git/objects: c5
Only in ./.git/objects/c6: 9f70d6043bc0b37f6173fb1277a344488914b2
Only in /data/tar/git_cice/CICE/.git/objects/c6: f6f20c2554214e1e230829f47ffe6fc81bd9d7
Only in ./.git/objects: ca
Only in /data/tar/git_cice/CICE/.git/objects: cb
Only in /data/tar/git_cice/CICE/.git/objects: cc
Only in /data/tar/git_cice/CICE/.git/objects: cf
Only in /data/tar/git_cice/CICE/.git/objects: d1
Only in /data/tar/git_cice/CICE/.git/objects: d3
Only in ./.git/objects: d6
Only in /data/tar/git_cice/CICE/.git/objects: d9
Only in ./.git/objects: dc
Only in /data/tar/git_cice/CICE/.git/objects: dd
Only in /data/tar/git_cice/CICE/.git/objects: e6
Only in ./.git/objects: e7
Only in /data/tar/git_cice/CICE/.git/objects: e8
Only in /data/tar/git_cice/CICE/.git/objects: e9
Only in /data/tar/git_cice/CICE/.git/objects: eb
Only in ./.git/objects: ee
Only in /data/tar/git_cice/CICE/.git/objects: ef
Only in /data/tar/git_cice/CICE/.git/objects/fc: ae2e828ad137e22d27a5ba1e76635810622f27
Only in ./.git/objects/fc: bea1debf77c0442f5ed6e91036bf301089f33d
Only in ./.git/objects/ff: 3909107b41dcb7032956d12da0b1f8b5878225
Only in /data/tar/git_cice/CICE/.git/objects/ff: ef0b615bcfc035ac2b38a15b03b88cfbbe40a8
Only in ./.git/objects/pack: pack-4c722f8c542ad03655ba1bd53c7e38fd8e5f4a71.idx
Only in ./.git/objects/pack: pack-4c722f8c542ad03655ba1bd53c7e38fd8e5f4a71.pack
Only in /data/tar/git_cice/CICE/.git/objects/pack: pack-82a1cb39120044f6ac0fc88e03ddee85730daacb.idx
Only in /data/tar/git_cice/CICE/.git/objects/pack: pack-82a1cb39120044f6ac0fc88e03ddee85730daacb.pack
Only in /data/tar/git_cice/CICE/.git/objects/pack: pack-a42829fda20506953f90d0a5ba43c6bdee0420df.idx
Only in /data/tar/git_cice/CICE/.git/objects/pack: pack-a42829fda20506953f90d0a5ba43c6bdee0420df.pack
Only in /data/tar/git_cice/CICE/.git/objects/pack: pack-e699070aa71de864c72892fb7465e1fe58cc0742.idx
Only in /data/tar/git_cice/CICE/.git/objects/pack: pack-e699070aa71de864c72892fb7465e1fe58cc0742.pack
diff -r ./.git/ORIG_HEAD /data/tar/git_cice/CICE/.git/ORIG_HEAD
1c1
< 98df1b2ca479e562eacf9968565f2271aae197da
---
> cf012428173d99654eefe37777d52326edb68e5d
diff -r ./.git/packed-refs /data/tar/git_cice/CICE/.git/packed-refs
3,4c3
< b554968d8aa2456bdabb8a953f4b5efb68453189 refs/remotes/origin/coupled
< 0fea6c427ffc4dd3071ddab4ed527e14ecb24c11 refs/remotes/origin/master
---
> 6fa1cbb33699738d63dc0bbdd555a69e6940f5c1 refs/remotes/origin/master
Only in /data/tar/git_cice/CICE/.git/refs/heads: coupled
diff -r ./.git/refs/heads/master /data/tar/git_cice/CICE/.git/refs/heads/master
1c1
< 38816bac934df4582ed21fc7cb0fcb7dd57773f5
---
> fcae2e828ad137e22d27a5ba1e76635810622f27
Only in /data/tar/git_cice/CICE/.git/refs/remotes/origin: coupled
diff -r ./.git/refs/remotes/origin/master /data/tar/git_cice/CICE/.git/refs/remotes/origin/master
1c1
< 38816bac934df4582ed21fc7cb0fcb7dd57773f5
---
> c4bccda069cf600dd1a94f649601ff55ff213abc
Only in ./.git/refs/remotes: upstream
Only in ./.git/refs/tags: CICE6.0.0
Only in ./.git/refs/tags: CICE6.0.1
Only in ./.git/refs/tags: CICE6.0.2
diff -r ./.gitmodules /data/tar/git_cice/CICE/.gitmodules
1,4d0
< [submodule "icepack"]
< 	path = icepack
< 	url = https://github.com/cice-consortium/icepack.git
< 	branch = master
Only in .: icepack
diff -r ./Icepack/columnphysics/icepack_atmo.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_atmo.F90
800,801d799
< !autodocument_start icepack_atm_boundary
< ! 
854,857d851
< !autodocument_end
< 
<       ! local variables
< 
910,912c904,906
< !------------------------------------------------------------
< ! Define functions
< !------------------------------------------------------------
---
>       !------------------------------------------------------------
>       ! Define functions
>       !------------------------------------------------------------
diff -r ./Icepack/columnphysics/icepack_brine.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_brine.F90
913c913
< !autodocument_start icepack_init_hbrine
---
> 
937,940d936
< !autodocument_end
< 
<       ! local variables
< 
1009c1005
< !autodocument_start icepack_init_zsalinity
---
> 
1032,1035d1027
< 
< !autodocument_end
< 
<       ! local variables
diff -r ./Icepack/columnphysics/icepack_itd.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_itd.F90
819c819
<       logical (kind=log_kind), dimension(ncat), intent(inout) :: &
---
>       logical (kind=log_kind), dimension(ncat),intent(inout) :: &
834c834,835
<       real (kind=dbl_kind), dimension (:), intent(inout), optional :: &
---
>       real (kind=dbl_kind), dimension (:), &
>          intent(inout), optional :: &
1075c1076
<       logical (kind=log_kind), dimension (:), intent(inout) :: &
---
>       logical (kind=log_kind), dimension (:),intent(inout) :: &
1441c1442
<       real (kind=dbl_kind), dimension (:), intent(inout) :: &
---
>       real (kind=dbl_kind), dimension (:),intent(inout) :: &
1672d1672
< !autodocument_start icepack_init_itd
1686,1687d1685
< !autodocument_end
< 
1853c1851
< !autodocument_start icepack_init_itd_hist
---
> 
1870,1871d1867
< !autodocument_end
< 
1908c1904
< !autodocument_start icepack_aggregate
---
> 
1935c1931,1932
<       real (kind=dbl_kind), dimension (:,:), intent(inout) :: &
---
>       real (kind=dbl_kind), dimension (:,:), &
>          intent(inout) :: &
1955c1952,1953
<       real (kind=dbl_kind), dimension (:), intent(out) :: &
---
>       real (kind=dbl_kind), dimension (:),  &
>          intent(out) :: &
1957,1958d1954
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_mechred.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_mechred.F90
1561c1561
< !autodocument_start icepack_ice_strength
---
> 
1597,1598d1596
< !autodocument_end
< 
1693c1691
< !autodocument_start icepack_step_ridge
---
> !
1795,1796d1792
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_ocean.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_ocean.F90
24d23
< !autodocument_start icepack_ocn_mixed_layer
73,74d71
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_orbital.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_orbital.F90
42d41
< !autodocument_start icepack_init_orbit
62,63d60
< !autodocument_end
< 
91d87
< !autodocument_start icepack_query_orbit
110,111d105
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_parameters.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_parameters.F90
344d343
< !autodocument_start icepack_init_parameters
648,649d646
< !autodocument_end
< 
798d794
< !autodocument_start icepack_query_parameters
1116,1117d1111
< !autodocument_end
< 
1310d1303
< !autodocument_start icepack_write_parameters
1318,1319d1310
< !autodocument_end
< 
1473,1475d1463
< !autodocument_start icepack_recompute_constants
< ! subroutine to reinitialize some derived constants
< 
1477,1478d1464
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_shortwave.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_shortwave.F90
3735c3735
< !autodocument_start icepack_prep_radiation
---
> !
3784,3785d3783
< !autodocument_end
< 
3837c3835
< !autodocument_start icepack_step_radiation
---
> !
3994,3995d3991
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_therm_itd.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_therm_itd.F90
1496d1495
< !autodocument_start icepack_step_therm2
1606,1607d1604
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_therm_shared.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_therm_shared.F90
218c218
< !autodocument_start icepack_init_thermo
---
> !
232,233d231
< !autodocument_end
< 
279,280c277
< !autodocument_start icepack_init_trcr
< !
---
> 
306,307d302
< !autodocument_end
< 
356,357d350
< !autodocument_start icepack_liquidus_temperature
< ! compute liquidus temperature
364,365d356
< !autodocument_end
< 
381,382d371
< !autodocument_start icepack_sea_freezing_temperature
< ! compute ocean freezing temperature
389,390d377
< !autodocument_end
< 
410,411d396
< !autodocument_start icepack_ice_temperature
< ! compute ice temperature
418,419d402
< !autodocument_end
< 
438,439d420
< !autodocument_start icepack_snow_temperature
< ! compute snow temperature
446,447d426
< !autodocument_end
< 
463,464d441
< !autodocument_start icepack_enthalpy_snow
< ! compute snow enthalpy
470,471d446
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_therm_vertical.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_therm_vertical.F90
2011c2011
< !autodocument_start icepack_step_therm1
---
> 
2225,2226d2224
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_tracers.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_tracers.F90
189d188
< !autodocument_start icepack_query_tracer_sizes
208,209d206
< !autodocument_end
< 
223d219
< !autodocument_start icepack_write_tracer_sizes
230,231d225
< !autodocument_end
< 
246d239
< !autodocument_start icepack_init_tracer_flags
280,281d272
< !autodocument_end
< 
307d297
< !autodocument_start icepack_query_tracer_flags
341,342d330
< !autodocument_end
< 
368d355
< !autodocument_start icepack_write_tracer_flags
375,376d361
< !autodocument_end
< 
403d387
< !autodocument_start icepack_init_tracer_indices
502,503d485
< !autodocument_end
< 
619d600
< !autodocument_start icepack_query_tracer_indices
707,708d687
< !autodocument_end
< 
767d745
< !autodocument_start icepack_write_tracer_indices
774,775d751
< !autodocument_end
< 
865d840
< !autodocument_start icepack_init_tracer_numbers
877,878d851
< !autodocument_end
< 
887d859
< !autodocument_start icepack_query_tracer_numbers
899,900d870
< !autodocument_end
< 
909d878
< !autodocument_start icepack_write_tracer_numbers
916,917d884
< !autodocument_end
< 
926c893
< !autodocument_start icepack_compute_tracers
---
> 
928a896,897
> !
> ! author: William H. Lipscomb, LANL
960,961d928
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_warnings.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_warnings.F90
38,40d37
< !autodocument_start icepack_warnings_aborted
< ! turn on the abort flag in the icepack warnings package
< ! pass in an optional error message
45,47d41
< 
< !autodocument_end
< 
81,82d74
< !autodocument_start icepack_warnings_clear
< ! clear all warning messages from the icepack warning buffer
86,87d77
< !autodocument_end
< 
114,115d103
< !autodocument_start icepack_warnings_print
< ! print all warning messages from the icepack warning buffer
121,122d108
< !autodocument_end
< 
138,139d123
< !autodocument_start icepack_warnings_flush
< ! print and clear all warning messages from the icepack warning buffer
144,145d127
< 
< !autodocument_end
diff -r ./Icepack/columnphysics/icepack_zbgc.F90 /data/tar/git_cice/CICE/Icepack/columnphysics/icepack_zbgc.F90
538,539d537
< !autodocument_start icepack_init_bgc
< !
571,572d568
< !autodocument_end
< 
666,667d661
< !autodocument_start icepack_init_zbgc
< !
740,741d733
< !autodocument_end
< 
807,808d798
< !autodocument_start icepack_biogeochemistry
< !
914,915d903
< !autodocument_end
< 
1162c1150
< !autodocument_start icepack_init_OceanConcArray
---
> 
1208,1209d1195
< !autodocument_end
< 
1274c1260
< !autodocument_start icepack_init_ocean_conc
---
> 
1307,1310d1292
< 
< !autodocument_end
< 
<       ! local variables
diff -r ./Icepack/columnphysics/version.txt /data/tar/git_cice/CICE/Icepack/columnphysics/version.txt
1c1
< ICEPACK 1.1.2
---
> ICEPACK 1.1.1
diff -r ./Icepack/configuration/driver/icedrv_init_column.F90 /data/tar/git_cice/CICE/Icepack/configuration/driver/icedrv_init_column.F90
72c72
<       call icepack_init_thermo(nilyr=nilyr, sprofile=sprofile)
---
>       call icepack_init_thermo(nilyr, sprofile)
156c156
<               nbtrcr_sw_out=nbtrcr_sw)
---
>             nbtrcr_sw_out=nbtrcr_sw)
158c158
<               tr_zaero_out=tr_zaero, tr_bgc_n_out=tr_bgc_n)
---
>             tr_zaero_out=tr_zaero, tr_bgc_n_out=tr_bgc_n)
160,163c160,163
<               nt_apnd_out=nt_apnd, nt_hpnd_out=nt_hpnd, &
<               nt_ipnd_out=nt_ipnd, nt_aero_out=nt_aero, &
<               nt_fbri_out=nt_fbri, nt_tsfc_out=nt_tsfc, &
<               nlt_chl_sw_out=nlt_chl_sw, nlt_zaero_sw_out=nlt_zaero_sw)
---
>             nt_apnd_out=nt_apnd, nt_hpnd_out=nt_hpnd, &
>             nt_ipnd_out=nt_ipnd, nt_aero_out=nt_aero, &
>             nt_fbri_out=nt_fbri, nt_tsfc_out=nt_tsfc, &
>             nlt_chl_sw_out=nlt_chl_sw, nlt_zaero_sw_out=nlt_zaero_sw)
231,277c231,266
<             call icepack_step_radiation (              &
<                          dt=dt,           ncat=ncat,           &
<                          n_algae=n_algae, nblyr=nblyr,         &
<                          ntrcr=ntrcr,     nbtrcr_sw=nbtrcr_sw, &
<                          nilyr=nilyr,     nslyr=nslyr,         &
<                          n_aero=n_aero,   n_zaero=n_zaero,     &
<                          tr_zaero=tr_zaero,                    &
<                          dEdd_algae=dEdd_algae,                &
<                          nlt_chl_sw=nlt_chl_sw,                &
<                          nlt_zaero_sw=nlt_zaero_sw(:),         &
<                          swgrid=swgrid(:),                     &
<                          igrid=igrid(:),                       &
<                          fbri=fbri(:),                         &
<                          aicen=aicen(i,:),                     &
<                          vicen=vicen(i,:),                     &
<                          vsnon=vsnon(i,:),                     &
<                          Tsfcn=trcrn(i,nt_Tsfc,:),             &
<                          alvln=trcrn(i,nt_alvl,:),             &
<                          apndn=trcrn(i,nt_apnd,:),             &
<                          hpndn=trcrn(i,nt_hpnd,:),             &
<                          ipndn=trcrn(i,nt_ipnd,:),             &
<                          aeron=trcrn(i,nt_aero:nt_aero+4*n_aero-1,:), &
<                          zbion=ztrcr_sw,                       &
<                          trcrn=ztrcr,                          &
<                          TLAT=TLAT(i), TLON=TLON(i),           &
<                          calendar_type=calendar_type,          &
<                          days_per_year=days_per_year,          &
<                          nextsw_cday=nextsw_cday, yday=yday, sec=sec,      &
<                          kaer_tab=kaer_tab, kaer_bc_tab=kaer_bc_tab(:,:),  &
<                          waer_tab=waer_tab, waer_bc_tab=waer_bc_tab(:,:),  &
<                          gaer_tab=gaer_tab, gaer_bc_tab=gaer_bc_tab(:,:),  &
<                          bcenh=bcenh(:,:,:),                               &
<                          modal_aero=modal_aero,                            &
<                          swvdr=swvdr(i),         swvdf=swvdf(i),           &
<                          swidr=swidr(i),         swidf=swidf(i),           &
<                          coszen=coszen(i),       fsnow=fsnow(i),           &
<                          alvdrn=alvdrn(i,:),     alvdfn=alvdfn(i,:),       &
<                          alidrn=alidrn(i,:),     alidfn=alidfn(i,:),       &
<                          fswsfcn=fswsfcn(i,:),   fswintn=fswintn(i,:),     &
<                          fswthrun=fswthrun(i,:), fswpenln=fswpenln(i,:,:), &
<                          Sswabsn=Sswabsn(i,:,:), Iswabsn=Iswabsn(i,:,:),   &
<                          albicen=albicen(i,:),   albsnon=albsnon(i,:),     &
<                          albpndn=albpndn(i,:),   apeffn=apeffn(i,:),       &
<                          snowfracn=snowfracn(i,:),                         &
<                          dhsn=dhsn(i,:),         ffracn=ffracn(i,:),       &
<                          l_print_point=l_print_point,                      &
<                          initonly = .true.)
---
>             call icepack_step_radiation ( dt,         ncat,        &
>                           n_algae,        tr_zaero,   nblyr,       &
>                           ntrcr,          nbtrcr_sw,               &
>                           nilyr,          nslyr,      n_aero,      &
>                           n_zaero,        dEdd_algae, nlt_chl_sw,  &
>                           nlt_zaero_sw(:),                         &
>                           swgrid(:),      igrid(:),   fbri(:),     &
>                           aicen(i,:),     vicen(i,:),              &
>                           vsnon(i,:),                              &
>                           trcrn(i,nt_Tsfc,:),                      &
>                           trcrn(i,nt_alvl,:),                      &
>                           trcrn(i,nt_apnd,:),                      &
>                           trcrn(i,nt_hpnd,:),                      &
>                           trcrn(i,nt_ipnd,:),                      &
>                           trcrn(i,nt_aero:nt_aero+4*n_aero-1,:),   &
>                           ztrcr_sw,       ztrcr,                   &
>                           TLAT(i),        TLON(i),                 &
>                           calendar_type,  days_per_year,           &
>                           nextsw_cday,    yday,       sec,         &
>                           kaer_tab,       waer_tab,   gaer_tab,    &
>                           kaer_bc_tab(:,:),      waer_bc_tab(:,:), &
>                           gaer_bc_tab(:,:),      bcenh(:,:,:),     &
>                           modal_aero,                              &
>                           swvdr(i),       swvdf(i),         &
>                           swidr(i),       swidf(i),         &
>                           coszen(i),      fsnow(i),         &
>                           alvdrn(i,:),    alvdfn(i,:),      &
>                           alidrn(i,:),    alidfn(i,:),      &
>                           fswsfcn(i,:),   fswintn(i,:),     &
>                           fswthrun(i,:),  fswpenln(i,:,:),  &
>                           Sswabsn(i,:,:), Iswabsn(i,:,:),   &
>                           albicen(i,:),   albsnon(i,:),     &
>                           albpndn(i,:),   apeffn(i,:),      &
>                           snowfracn(i,:),                   &
>                           dhsn(i,:),      ffracn(i,:),      &
>                           l_print_point,  initonly = .true.)
427,433c416,417
<             call icepack_init_zsalinity(ncat=ncat, nblyr=nblyr,        &
<                                         ntrcr_o           = ntrcr_o,   &
<                                         Rayleigh_criteria = RayleighC, &
<                                         Rayleigh_real     = RayleighR, &
<                                         trcrn             = trcrn_bgc, &
<                                         nt_bgc_S          = nt_bgc_S,  &
<                                         sss               = sss(i))
---
>             call icepack_init_zsalinity(nblyr, ntrcr_o, RayleighC, &
>                           RayleighR, trcrn_bgc, nt_bgc_S, ncat, sss(i))
456,463c440,444
<                       amm=amm(i),   dmsp=dmsp(i),  dms=dms(i),   &
<                       doc=doc(i,:), dic =dic(i,:), don=don(i,:), &
<                       fed=fed(i,:), fep =fep(i,:), hum=hum(i),   &
<                       nit=nit(i),   sil =sil(i),                 &
<                       zaeros=zaeros(i,:),                        &
<                       algalN=algalN(i,:),                        &
<                       max_dic=max_dic, max_don =max_don,         &
<                       max_fe =max_fe,  max_aero=max_aero)
---
>                     amm   (i  ), dmsp(i  ), dms(i  ), &
>                     algalN(i,:), doc (i,:), dic(i,:), &
>                     don   (i,:), fed (i,:), fep(i,:), &
>                     hum   (i  ), nit (i  ), sil(i  ), &
>                     zaeros(i,:), max_dic, max_don, max_fe, max_aero)
482,489c463,470
<          call icepack_init_OceanConcArray(max_nbtrcr=max_nbtrcr,              &
<                       max_algae=max_algae, max_don=max_don,  max_doc=max_doc, &
<                       max_aero =max_aero,  max_dic=max_dic,  max_fe =max_fe,  &
<                       nit =nit(i),   amm=amm(i),   sil   =sil(i),             &
<                       dmsp=dmsp(i),  dms=dms(i),   algalN=algalN(i,:),        &
<                       doc =doc(i,:), don=don(i,:), dic   =dic(i,:),           &  
<                       fed =fed(i,:), fep=fep(i,:), zaeros=zaeros(i,:),        &
<                       ocean_bio_all=ocean_bio_all(i,:),  hum=hum(i))
---
>          call icepack_init_OceanConcArray(max_nbtrcr,               &
>                                  max_algae, max_don,  max_doc,      &
>                                  max_dic,   max_aero, max_fe,       &
>                                  nit(i),    amm(i),   sil(i),       &
>                                  dmsp(i),   dms(i),   algalN(i,:),  &
>                                  doc(i,:),  don(i,:), dic(i,:),     &  
>                                  fed(i,:),  fep(i,:), zaeros(i,:),  &
>                                  ocean_bio_all(i,:),  hum(i))
497,500c478,481
<          call icepack_init_bgc(ncat=ncat, nblyr=nblyr, nilyr=nilyr, ntrcr_o=ntrcr_o, &
<                       cgrid=cgrid, igrid=igrid, ntrcr=ntrcr, nbtrcr=nbtrcr,          &
<                       sicen=sicen(:,:), trcrn=trcrn_bgc(:,:),                        &
<                       sss=sss(i), ocean_bio_all=ocean_bio_all(i,:))
---
>          call icepack_init_bgc(ncat, nblyr, nilyr, ntrcr_o, &
>                cgrid, igrid, ntrcr, nbtrcr, &
>                sicen(:,:), trcrn_bgc(:,:),  &
>                sss(i), ocean_bio_all(i,:))
536,537c517,518
<       call icepack_init_hbrine(bgrid=bgrid, igrid=igrid, cgrid=cgrid, icgrid=icgrid, &
<            swgrid=swgrid, nblyr=nblyr, nilyr=nilyr, phi_snow=phi_snow)
---
>       call icepack_init_hbrine(bgrid, igrid, cgrid, icgrid, &
>             swgrid, nblyr, nilyr, phi_snow)
851,862c832,843
<            scale_bgc_out=scale_bgc, skl_bgc_out=skl_bgc, z_tracers_out=z_tracers, &
<            dEdd_algae_out=dEdd_algae, solve_zbgc_out=solve_zbgc, phi_snow_out=phi_snow, &
<            bgc_flux_type_out=bgc_flux_type, grid_o_out=grid_o, l_sk_out=l_sk, &
<            initbio_frac_out=initbio_frac, frazil_scav_out=frazil_scav, &
<            algal_vel_out=algal_vel, R_dFe2dust_out=R_dFe2dust, &
<            dustFe_sol_out=dustFe_sol, T_max_out=T_max, fsal_out=fsal, &
<            op_dep_min_out=op_dep_min, fr_graze_s_out=fr_graze_s, &
<            fr_graze_e_out=fr_graze_e, fr_mort2min_out=fr_mort2min, &
<            fr_dFe_out=fr_dFe, k_nitrif_out=k_nitrif, t_iron_conv_out=t_iron_conv, &
<            max_loss_out=max_loss, max_dfe_doc1_out=max_dfe_doc1, &
<            fr_resp_s_out=fr_resp_s, y_sk_DMS_out=y_sk_DMS, t_sk_conv_out=t_sk_conv, &
<            t_sk_ox_out=t_sk_ox)
---
>          scale_bgc_out=scale_bgc, skl_bgc_out=skl_bgc, z_tracers_out=z_tracers, &
>          dEdd_algae_out=dEdd_algae, solve_zbgc_out=solve_zbgc, phi_snow_out=phi_snow, &
>          bgc_flux_type_out=bgc_flux_type, grid_o_out=grid_o, l_sk_out=l_sk, &
>          initbio_frac_out=initbio_frac, frazil_scav_out=frazil_scav, &
>          algal_vel_out=algal_vel, R_dFe2dust_out=R_dFe2dust, &
>          dustFe_sol_out=dustFe_sol, T_max_out=T_max, fsal_out=fsal, &
>          op_dep_min_out=op_dep_min, fr_graze_s_out=fr_graze_s, &
>          fr_graze_e_out=fr_graze_e, fr_mort2min_out=fr_mort2min, &
>          fr_dFe_out=fr_dFe, k_nitrif_out=k_nitrif, t_iron_conv_out=t_iron_conv, &
>          max_loss_out=max_loss, max_dfe_doc1_out=max_dfe_doc1, &
>          fr_resp_s_out=fr_resp_s, y_sk_DMS_out=y_sk_DMS, t_sk_conv_out=t_sk_conv, &
>          t_sk_ox_out=t_sk_ox)
1206,1218c1187,1199
<            scale_bgc_in=scale_bgc, skl_bgc_in=skl_bgc, z_tracers_in=z_tracers, &
<            dEdd_algae_in=dEdd_algae, solve_zbgc_in=solve_zbgc, &
<            bgc_flux_type_in=bgc_flux_type, grid_o_in=grid_o, l_sk_in=l_sk, &
<            initbio_frac_in=initbio_frac, frazil_scav_in=frazil_scav, &
<            grid_oS_in=grid_oS, l_skS_in=l_skS, phi_snow_in=phi_snow, &
<            algal_vel_in=algal_vel, R_dFe2dust_in=R_dFe2dust, &
<            dustFe_sol_in=dustFe_sol, T_max_in=T_max, fsal_in=fsal, &
<            op_dep_min_in=op_dep_min, fr_graze_s_in=fr_graze_s, &
<            fr_graze_e_in=fr_graze_e, fr_mort2min_in=fr_mort2min, &
<            fr_dFe_in=fr_dFe, k_nitrif_in=k_nitrif, t_iron_conv_in=t_iron_conv, &
<            max_loss_in=max_loss, max_dfe_doc1_in=max_dfe_doc1, fr_resp_in=fr_resp, &
<            fr_resp_s_in=fr_resp_s, y_sk_DMS_in=y_sk_DMS, t_sk_conv_in=t_sk_conv, &
<            t_sk_ox_in=t_sk_ox, modal_aero_in=modal_aero)
---
>          scale_bgc_in=scale_bgc, skl_bgc_in=skl_bgc, z_tracers_in=z_tracers, &
>          dEdd_algae_in=dEdd_algae, solve_zbgc_in=solve_zbgc, &
>          bgc_flux_type_in=bgc_flux_type, grid_o_in=grid_o, l_sk_in=l_sk, &
>          initbio_frac_in=initbio_frac, frazil_scav_in=frazil_scav, &
>          grid_oS_in=grid_oS, l_skS_in=l_skS, phi_snow_in=phi_snow, &
>          algal_vel_in=algal_vel, R_dFe2dust_in=R_dFe2dust, &
>          dustFe_sol_in=dustFe_sol, T_max_in=T_max, fsal_in=fsal, &
>          op_dep_min_in=op_dep_min, fr_graze_s_in=fr_graze_s, &
>          fr_graze_e_in=fr_graze_e, fr_mort2min_in=fr_mort2min, &
>          fr_dFe_in=fr_dFe, k_nitrif_in=k_nitrif, t_iron_conv_in=t_iron_conv, &
>          max_loss_in=max_loss, max_dfe_doc1_in=max_dfe_doc1, fr_resp_in=fr_resp, &
>          fr_resp_s_in=fr_resp_s, y_sk_DMS_in=y_sk_DMS, t_sk_conv_in=t_sk_conv, &
>          t_sk_ox_in=t_sk_ox, modal_aero_in=modal_aero)
1440,1459c1421,1440
<            R_Si2N_in=R_Si2N, &
<            R_S2N_in=R_S2N, R_Fe2C_in=R_Fe2C, R_Fe2N_in=R_Fe2N, R_C2N_in=R_C2N, &
<            R_chl2N_in=R_chl2N, F_abs_chl_in=F_abs_chl, R_Fe2DON_in=R_Fe2DON, &
<            R_C2N_DON_in=R_C2N_DON, &
<            R_Fe2DOC_in=R_Fe2DOC, &
<            chlabs_in=chlabs, alpha2max_low_in=alpha2max_low, beta2max_in=beta2max, &
<            mu_max_in=mu_max, grow_Tdep_in=grow_Tdep, fr_graze_in=fr_graze, &
<            mort_pre_in=mort_pre, &
<            mort_Tdep_in=mort_Tdep, k_exude_in=k_exude, &
<            K_Nit_in=K_Nit, K_Am_in=K_Am, K_sil_in=K_Sil, K_Fe_in=K_Fe, &
<            f_don_in=f_don, kn_bac_in=kn_bac, f_don_Am_in=f_don_Am, f_exude_in=f_exude, &
<            k_bac_in=k_bac, &
<            fr_resp_in=fr_resp, algal_vel_in=algal_vel, R_dFe2dust_in=R_dFe2dust, &
<            dustFe_sol_in=dustFe_sol, T_max_in=T_max, fr_mort2min_in=fr_mort2min, &
<            fr_dFe_in=fr_dFe, op_dep_min_in=op_dep_min, &
<            fr_graze_s_in=fr_graze_s, fr_graze_e_in=fr_graze_e, &
<            k_nitrif_in=k_nitrif, t_iron_conv_in=t_iron_conv, &
<            max_loss_in=max_loss, max_dfe_doc1_in=max_dfe_doc1, &
<            fr_resp_s_in=fr_resp_s, y_sk_DMS_in=y_sk_DMS, &
<            t_sk_conv_in=t_sk_conv, t_sk_ox_in=t_sk_ox, fsal_in=fsal)
---
>          R_Si2N_in=R_Si2N, &
>          R_S2N_in=R_S2N, R_Fe2C_in=R_Fe2C, R_Fe2N_in=R_Fe2N, R_C2N_in=R_C2N, &
>          R_chl2N_in=R_chl2N, F_abs_chl_in=F_abs_chl, R_Fe2DON_in=R_Fe2DON, &
>          R_C2N_DON_in=R_C2N_DON, &
>          R_Fe2DOC_in=R_Fe2DOC, &
>          chlabs_in=chlabs, alpha2max_low_in=alpha2max_low, beta2max_in=beta2max, &
>          mu_max_in=mu_max, grow_Tdep_in=grow_Tdep, fr_graze_in=fr_graze, &
>          mort_pre_in=mort_pre, &
>          mort_Tdep_in=mort_Tdep, k_exude_in=k_exude, &
>          K_Nit_in=K_Nit, K_Am_in=K_Am, K_sil_in=K_Sil, K_Fe_in=K_Fe, &
>          f_don_in=f_don, kn_bac_in=kn_bac, f_don_Am_in=f_don_Am, f_exude_in=f_exude, &
>          k_bac_in=k_bac, &
>          fr_resp_in=fr_resp, algal_vel_in=algal_vel, R_dFe2dust_in=R_dFe2dust, &
>          dustFe_sol_in=dustFe_sol, T_max_in=T_max, fr_mort2min_in=fr_mort2min, &
>          fr_dFe_in=fr_dFe, op_dep_min_in=op_dep_min, &
>          fr_graze_s_in=fr_graze_s, fr_graze_e_in=fr_graze_e, &
>          k_nitrif_in=k_nitrif, t_iron_conv_in=t_iron_conv, &
>          max_loss_in=max_loss, max_dfe_doc1_in=max_dfe_doc1, &
>          fr_resp_s_in=fr_resp_s, y_sk_DMS_in=y_sk_DMS, &
>          t_sk_conv_in=t_sk_conv, t_sk_ox_in=t_sk_ox, fsal_in=fsal)
1753,1754c1734,1735
<            zbgc_init_frac_in=zbgc_init_frac, tau_ret_in=tau_ret, tau_rel_in=tau_rel, &
<            zbgc_frac_init_in=zbgc_frac_init, bgc_tracer_type_in=bgc_tracer_type)
---
>          zbgc_init_frac_in=zbgc_init_frac, tau_ret_in=tau_ret, tau_rel_in=tau_rel, &
>          zbgc_frac_init_in=zbgc_frac_init, bgc_tracer_type_in=bgc_tracer_type)
1760c1741
<            ntrcr_in=ntrcr, ntrcr_o_in=ntrcr_o, nbtrcr_in=nbtrcr, nbtrcr_sw_in=nbtrcr_sw)
---
>           ntrcr_in=ntrcr, ntrcr_o_in=ntrcr_o, nbtrcr_in=nbtrcr, nbtrcr_sw_in=nbtrcr_sw)
1766,1771c1747,1752
<            tr_brine_in  =tr_brine, &
<            tr_bgc_Nit_in=tr_bgc_Nit, tr_bgc_Am_in =tr_bgc_Am,  tr_bgc_Sil_in=tr_bgc_Sil,   &
<            tr_bgc_DMS_in=tr_bgc_DMS, tr_bgc_PON_in=tr_bgc_PON,                             &
<            tr_bgc_N_in  =tr_bgc_N,   tr_bgc_C_in  =tr_bgc_C,   tr_bgc_chl_in=tr_bgc_chl,   &
<            tr_bgc_DON_in=tr_bgc_DON, tr_bgc_Fe_in =tr_bgc_Fe,  tr_zaero_in  =tr_zaero,     &
<            tr_bgc_hum_in=tr_bgc_hum)
---
>           tr_brine_in  =tr_brine, &
>           tr_bgc_Nit_in=tr_bgc_Nit, tr_bgc_Am_in =tr_bgc_Am,  tr_bgc_Sil_in=tr_bgc_Sil,   &
>           tr_bgc_DMS_in=tr_bgc_DMS, tr_bgc_PON_in=tr_bgc_PON,                             &
>           tr_bgc_N_in  =tr_bgc_N,   tr_bgc_C_in  =tr_bgc_C,   tr_bgc_chl_in=tr_bgc_chl,   &
>           tr_bgc_DON_in=tr_bgc_DON, tr_bgc_Fe_in =tr_bgc_Fe,  tr_zaero_in  =tr_zaero,     &
>           tr_bgc_hum_in=tr_bgc_hum)
1777,1794c1758,1776
<            nbtrcr_in=nbtrcr,           nt_fbri_in=nt_fbri,                                       &  
<            nt_bgc_Nit_in=nt_bgc_Nit,   nt_bgc_Am_in=nt_bgc_Am,       nt_bgc_Sil_in=nt_bgc_Sil,   &
<            nt_bgc_DMS_in=nt_bgc_DMS,   nt_bgc_PON_in=nt_bgc_PON,     nt_bgc_S_in=nt_bgc_S,       &
<            nt_bgc_N_in=nt_bgc_N,       nt_bgc_chl_in=nt_bgc_chl,     nt_bgc_hum_in=nt_bgc_hum,   &
<            nt_bgc_DOC_in=nt_bgc_DOC,   nt_bgc_DON_in=nt_bgc_DON,     nt_bgc_DIC_in=nt_bgc_DIC,   &
<            nt_zaero_in=nt_zaero,       nt_bgc_DMSPp_in=nt_bgc_DMSPp, nt_bgc_DMSPd_in=nt_bgc_DMSPd, &
<            nt_bgc_Fed_in=nt_bgc_Fed,   nt_bgc_Fep_in=nt_bgc_Fep,     nt_zbgc_frac_in=nt_zbgc_frac, &
<            nlt_chl_sw_in=nlt_chl_sw,   nlt_bgc_Sil_in=nlt_bgc_Sil,   nlt_zaero_sw_in=nlt_zaero_sw, &
<            nlt_bgc_N_in=nlt_bgc_N,     nlt_bgc_Nit_in=nlt_bgc_Nit,   nlt_bgc_Am_in=nlt_bgc_Am,   &
<            nlt_bgc_DMS_in=nlt_bgc_DMS, nlt_bgc_DMSPp_in=nlt_bgc_DMSPp,                           &
<            nlt_bgc_DMSPd_in=nlt_bgc_DMSPd,                                                       &
<            nlt_bgc_DIC_in=nlt_bgc_DIC, nlt_bgc_DOC_in=nlt_bgc_DOC,   nlt_bgc_PON_in=nlt_bgc_PON, &
<            nlt_bgc_DON_in=nlt_bgc_DON, nlt_bgc_Fed_in=nlt_bgc_Fed,   nlt_bgc_Fep_in=nlt_bgc_Fep, &
<            nlt_bgc_chl_in=nlt_bgc_chl, nlt_bgc_hum_in=nlt_bgc_hum,   nlt_zaero_in=nlt_zaero,     &
<            n_algae_in=n_algae,                                                                   &
<            n_DOC_in=n_DOC,             n_DON_in=n_DON,               n_DIC_in=n_DIC,             &
<            n_fed_in=n_fed,             n_fep_in=n_fep,               n_zaero_in=n_zaero,         &
<            bio_index_o_in=bio_index_o, bio_index_in=bio_index)
---
>           nbtrcr_in=nbtrcr,        &
>           nt_fbri_in=nt_fbri,      &  
>           nt_bgc_Nit_in=nt_bgc_Nit,   nt_bgc_Am_in=nt_bgc_Am,       nt_bgc_Sil_in=nt_bgc_Sil,   &
>           nt_bgc_DMS_in=nt_bgc_DMS,   nt_bgc_PON_in=nt_bgc_PON,     nt_bgc_S_in=nt_bgc_S,     &
>           nt_bgc_N_in=nt_bgc_N,       nt_bgc_chl_in=nt_bgc_chl,   &
>           nt_bgc_DOC_in=nt_bgc_DOC,   nt_bgc_DON_in=nt_bgc_DON,     nt_bgc_DIC_in=nt_bgc_DIC,   &
>           nt_zaero_in=nt_zaero,       nt_bgc_DMSPp_in=nt_bgc_DMSPp, nt_bgc_DMSPd_in=nt_bgc_DMSPd, &
>           nt_bgc_Fed_in=nt_bgc_Fed,   nt_bgc_Fep_in=nt_bgc_Fep,     nt_zbgc_frac_in=nt_zbgc_frac, &
>           nlt_zaero_sw_in=nlt_zaero_sw,  nlt_chl_sw_in=nlt_chl_sw,  nlt_bgc_Sil_in=nlt_bgc_Sil, &
>           nlt_bgc_N_in=nlt_bgc_N,     nlt_bgc_Nit_in=nlt_bgc_Nit,   nlt_bgc_Am_in=nlt_bgc_Am, &
>           nlt_bgc_DMS_in=nlt_bgc_DMS, nlt_bgc_DMSPp_in=nlt_bgc_DMSPp, nlt_bgc_DMSPd_in=nlt_bgc_DMSPd, &
>           nlt_bgc_chl_in=nlt_bgc_chl,   nlt_zaero_in=nlt_zaero, &
>           nlt_bgc_DIC_in=nlt_bgc_DIC, nlt_bgc_DOC_in=nlt_bgc_DOC,   nlt_bgc_PON_in=nlt_bgc_PON, &
>           nlt_bgc_DON_in=nlt_bgc_DON, nlt_bgc_Fed_in=nlt_bgc_Fed,   nlt_bgc_Fep_in=nlt_bgc_Fep, &
>           nt_bgc_hum_in=nt_bgc_hum,   nlt_bgc_hum_in=nlt_bgc_hum, &
>           n_algae_in=n_algae,         &
>           n_DOC_in=n_DOC,             n_DON_in=n_DON,               n_DIC_in=n_DIC, &
>           n_fed_in=n_fed,             n_fep_in=n_fep,               n_zaero_in=n_zaero, &
>           bio_index_o_in=bio_index_o, bio_index_in=bio_index)
diff -r ./Icepack/configuration/driver/icedrv_init.F90 /data/tar/git_cice/CICE/Icepack/configuration/driver/icedrv_init.F90
169,192c169,192
<            albicev_out=albicev, albicei_out=albicei, &
<            albsnowv_out=albsnowv, albsnowi_out=albsnowi, &
<            natmiter_out=natmiter, ahmax_out=ahmax, shortwave_out=shortwave, &
<            albedo_type_out=albedo_type, R_ice_out=R_ice, R_pnd_out=R_pnd, &
<            R_snw_out=R_snw, dT_mlt_out=dT_mlt, rsnw_mlt_out=rsnw_mlt, &
<            kstrength_out=kstrength, krdg_partic_out=krdg_partic, &
<            krdg_redist_out=krdg_redist, mu_rdg_out=mu_rdg, &
<            atmbndy_out=atmbndy, calc_strair_out=calc_strair, &
<            formdrag_out=formdrag, highfreq_out=highfreq, &
<            emissivity_out=emissivity, &
<            kitd_out=kitd, kcatbound_out=kcatbound, hs0_out=hs0, & 
<            dpscale_out=dpscale, frzpnd_out=frzpnd, &
<            rfracmin_out=rfracmin, rfracmax_out=rfracmax, &
<            pndaspect_out=pndaspect, hs1_out=hs1, hp1_out=hp1, &
<            ktherm_out=ktherm, calc_Tsfc_out=calc_Tsfc, &
<            update_ocn_f_out = update_ocn_f, &
<            conduct_out=conduct, a_rapid_mode_out=a_rapid_mode, &
<            Rac_rapid_mode_out=Rac_rapid_mode, &
<            aspect_rapid_mode_out=aspect_rapid_mode, &
<            dSdt_slow_mode_out=dSdt_slow_mode, &
<            phi_c_slow_mode_out=phi_c_slow_mode, &
<            phi_i_mushy_out=phi_i_mushy, &
<            tfrz_option_out=tfrz_option, kalg_out=kalg, &
<            fbot_xfer_type_out=fbot_xfer_type, puny_out=puny)
---
>          albicev_out=albicev, albicei_out=albicei, &
>          albsnowv_out=albsnowv, albsnowi_out=albsnowi, &
>          natmiter_out=natmiter, ahmax_out=ahmax, shortwave_out=shortwave, &
>          albedo_type_out=albedo_type, R_ice_out=R_ice, R_pnd_out=R_pnd, &
>          R_snw_out=R_snw, dT_mlt_out=dT_mlt, rsnw_mlt_out=rsnw_mlt, &
>          kstrength_out=kstrength, krdg_partic_out=krdg_partic, &
>          krdg_redist_out=krdg_redist, mu_rdg_out=mu_rdg, &
>          atmbndy_out=atmbndy, calc_strair_out=calc_strair, &
>          formdrag_out=formdrag, highfreq_out=highfreq, &
>          emissivity_out=emissivity, &
>          kitd_out=kitd, kcatbound_out=kcatbound, hs0_out=hs0, & 
>          dpscale_out=dpscale, frzpnd_out=frzpnd, &
>          rfracmin_out=rfracmin, rfracmax_out=rfracmax, &
>          pndaspect_out=pndaspect, hs1_out=hs1, hp1_out=hp1, &
>          ktherm_out=ktherm, calc_Tsfc_out=calc_Tsfc, &
>          update_ocn_f_out = update_ocn_f, &
>          conduct_out=conduct, a_rapid_mode_out=a_rapid_mode, &
>          Rac_rapid_mode_out=Rac_rapid_mode, &
>          aspect_rapid_mode_out=aspect_rapid_mode, &
>          dSdt_slow_mode_out=dSdt_slow_mode, &
>          phi_c_slow_mode_out=phi_c_slow_mode, &
>          phi_i_mushy_out=phi_i_mushy, &
>          tfrz_option_out=tfrz_option, kalg_out=kalg, &
>          fbot_xfer_type_out=fbot_xfer_type, puny_out=puny)
692,714c692,714
<            albicev_in=albicev, albicei_in=albicei, &
<            albsnowv_in=albsnowv, albsnowi_in=albsnowi, &
<            natmiter_in=natmiter, ahmax_in=ahmax, shortwave_in=shortwave, &
<            albedo_type_in=albedo_type, R_ice_in=R_ice, R_pnd_in=R_pnd, &
<            R_snw_in=R_snw, dT_mlt_in=dT_mlt, rsnw_mlt_in=rsnw_mlt, &
<            kstrength_in=kstrength, krdg_partic_in=krdg_partic, &
<            krdg_redist_in=krdg_redist, mu_rdg_in=mu_rdg, &
<            atmbndy_in=atmbndy, calc_strair_in=calc_strair, &
<            formdrag_in=formdrag, highfreq_in=highfreq, &
<            emissivity_in=emissivity, &
<            kitd_in=kitd, kcatbound_in=kcatbound, hs0_in=hs0, &
<            dpscale_in=dpscale, frzpnd_in=frzpnd, &
<            rfracmin_in=rfracmin, rfracmax_in=rfracmax, &
<            pndaspect_in=pndaspect, hs1_in=hs1, hp1_in=hp1, &
<            ktherm_in=ktherm, calc_Tsfc_in=calc_Tsfc, &
<            conduct_in=conduct, a_rapid_mode_in=a_rapid_mode, &
<            Rac_rapid_mode_in=Rac_rapid_mode, &
<            aspect_rapid_mode_in=aspect_rapid_mode, &
<            dSdt_slow_mode_in=dSdt_slow_mode, &
<            phi_c_slow_mode_in=phi_c_slow_mode, &
<            phi_i_mushy_in=phi_i_mushy, &
<            tfrz_option_in=tfrz_option, kalg_in=kalg, &
<            fbot_xfer_type_in=fbot_xfer_type)
---
>          albicev_in=albicev, albicei_in=albicei, &
>          albsnowv_in=albsnowv, albsnowi_in=albsnowi, &
>          natmiter_in=natmiter, ahmax_in=ahmax, shortwave_in=shortwave, &
>          albedo_type_in=albedo_type, R_ice_in=R_ice, R_pnd_in=R_pnd, &
>          R_snw_in=R_snw, dT_mlt_in=dT_mlt, rsnw_mlt_in=rsnw_mlt, &
>          kstrength_in=kstrength, krdg_partic_in=krdg_partic, &
>          krdg_redist_in=krdg_redist, mu_rdg_in=mu_rdg, &
>          atmbndy_in=atmbndy, calc_strair_in=calc_strair, &
>          formdrag_in=formdrag, highfreq_in=highfreq, &
>          emissivity_in=emissivity, &
>          kitd_in=kitd, kcatbound_in=kcatbound, hs0_in=hs0, &
>          dpscale_in=dpscale, frzpnd_in=frzpnd, &
>          rfracmin_in=rfracmin, rfracmax_in=rfracmax, &
>          pndaspect_in=pndaspect, hs1_in=hs1, hp1_in=hp1, &
>          ktherm_in=ktherm, calc_Tsfc_in=calc_Tsfc, &
>          conduct_in=conduct, a_rapid_mode_in=a_rapid_mode, &
>          Rac_rapid_mode_in=Rac_rapid_mode, &
>          aspect_rapid_mode_in=aspect_rapid_mode, &
>          dSdt_slow_mode_in=dSdt_slow_mode, &
>          phi_c_slow_mode_in=phi_c_slow_mode, &
>          phi_i_mushy_in=phi_i_mushy, &
>          tfrz_option_in=tfrz_option, kalg_in=kalg, &
>          fbot_xfer_type_in=fbot_xfer_type)
717,720c717,720
<            tr_FY_in=tr_FY, tr_lvl_in=tr_lvl, tr_aero_in=tr_aero, &
<            tr_pond_in=tr_pond, tr_pond_cesm_in=tr_pond_cesm, &
<            tr_pond_lvl_in=tr_pond_lvl, &
<            tr_pond_topo_in=tr_pond_topo)
---
>          tr_FY_in=tr_FY, tr_lvl_in=tr_lvl, tr_aero_in=tr_aero, &
>          tr_pond_in=tr_pond, tr_pond_cesm_in=tr_pond_cesm, &
>          tr_pond_lvl_in=tr_pond_lvl, &
>          tr_pond_topo_in=tr_pond_topo)
722,726c722,726
<            nt_sice_in=nt_sice, nt_qice_in=nt_qice, &
<            nt_qsno_in=nt_qsno, nt_iage_in=nt_iage, &
<            nt_fy_in=nt_fy, nt_alvl_in=nt_alvl, nt_vlvl_in=nt_vlvl, &
<            nt_apnd_in=nt_apnd, nt_hpnd_in=nt_hpnd, nt_ipnd_in=nt_ipnd, &
<            nt_aero_in=nt_aero)
---
>          nt_sice_in=nt_sice, nt_qice_in=nt_qice, &
>          nt_qsno_in=nt_qsno, nt_iage_in=nt_iage, &
>          nt_fy_in=nt_fy, nt_alvl_in=nt_alvl, nt_vlvl_in=nt_vlvl, &
>          nt_apnd_in=nt_apnd, nt_hpnd_in=nt_hpnd, nt_ipnd_in=nt_ipnd, &
>          nt_aero_in=nt_aero)
822,824c822,824
<               tr_FY_out=tr_FY, tr_lvl_out=tr_lvl, tr_aero_out=tr_aero, &
<               tr_pond_cesm_out=tr_pond_cesm, tr_pond_lvl_out=tr_pond_lvl, &
<               tr_pond_topo_out=tr_pond_topo)
---
>             tr_FY_out=tr_FY, tr_lvl_out=tr_lvl, tr_aero_out=tr_aero, &
>             tr_pond_cesm_out=tr_pond_cesm, tr_pond_lvl_out=tr_pond_lvl, &
>             tr_pond_topo_out=tr_pond_topo)
826,830c826,830
<               nt_sice_out=nt_sice, nt_qice_out=nt_qice, &
<               nt_qsno_out=nt_qsno, nt_iage_out=nt_iage, nt_fy_out=nt_fy, &
<               nt_alvl_out=nt_alvl, nt_vlvl_out=nt_vlvl, &
<               nt_apnd_out=nt_apnd, nt_hpnd_out=nt_hpnd, &
<               nt_ipnd_out=nt_ipnd, nt_aero_out=nt_aero)
---
>             nt_sice_out=nt_sice, nt_qice_out=nt_qice, &
>             nt_qsno_out=nt_qsno, nt_iage_out=nt_iage, nt_fy_out=nt_fy, &
>             nt_alvl_out=nt_alvl, nt_vlvl_out=nt_vlvl, &
>             nt_apnd_out=nt_apnd, nt_hpnd_out=nt_hpnd, &
>             nt_ipnd_out=nt_ipnd, nt_aero_out=nt_aero)
976,990c976,990
<          call icepack_aggregate(ncat=ncat,                    &
<                                 trcrn=trcrn(i,1:ntrcr,:),     &
<                                 aicen=aicen(i,:),             &
<                                 vicen=vicen(i,:),             &
<                                 vsnon=vsnon(i,:),             &
<                                 trcr=trcr (i,1:ntrcr),        &
<                                 aice=aice (i),                &
<                                 vice=vice (i),                &
<                                 vsno=vsno (i),                &
<                                 aice0=aice0(i),               &
<                                 ntrcr=ntrcr,                  &
<                                 trcr_depend=trcr_depend(1:ntrcr),     &
<                                 trcr_base=trcr_base    (1:ntrcr,:),   &
<                                 n_trcr_strata=n_trcr_strata(1:ntrcr), &
<                                 nt_strata=nt_strata    (1:ntrcr,:))
---
>          call icepack_aggregate (ncat,                    &
>                                 aicen(i,:),               &
>                                 trcrn(i,1:ntrcr,:),       &
>                                 vicen(i,:),               &
>                                 vsnon(i,:),               &
>                                 aice (i),                 &
>                                 trcr (i,1:ntrcr),         &
>                                 vice (i),                 &
>                                 vsno (i),                 &
>                                 aice0(i),                 &
>                                 ntrcr,                    &
>                                 trcr_depend  (1:ntrcr),   &
>                                 trcr_base    (1:ntrcr,:), &
>                                 n_trcr_strata(1:ntrcr),   &
>                                 nt_strata    (1:ntrcr,:))
1082,1083c1082,1083
<            nt_qsno_out=nt_qsno, nt_sice_out=nt_sice, &
<            nt_fbri_out=nt_fbri, nt_alvl_out=nt_alvl, nt_vlvl_out=nt_vlvl)
---
>         nt_qsno_out=nt_qsno, nt_sice_out=nt_sice, &
>         nt_fbri_out=nt_fbri, nt_alvl_out=nt_alvl, nt_vlvl_out=nt_vlvl)
1146,1153c1146,1151
<          call icepack_init_trcr(Tair     = Tair(i),     &
<                                 Tf       = Tf(i),       &
<                                 Sprofile = salinz(i,:), &
<                                 Tprofile = Tmltz(i,:),  &
<                                 Tsfc     = Tsfc,        &
<                                 nilyr=nilyr, nslyr=nslyr, &
<                                 qin=qin(:), qsn=qsn(:))
< 
---
>          call icepack_init_trcr(Tair  (i  ), Tf   (i  ), &
>                                 salinz(i,:), Tmltz(i,:), &
>                                 Tsfc,                    &
>                                 nilyr,       nslyr,      &
>                                 qin   (  :), qsn  (  :))
>         
1202,1209c1200,1205
<          call icepack_init_trcr(Tair     = Tair(i),     &
<                                 Tf       = Tf(i),       &
<                                 Sprofile = salinz(i,:), &
<                                 Tprofile = Tmltz(i,:),  &
<                                 Tsfc     = Tsfc,        &
<                                 nilyr=nilyr, nslyr=nslyr, &
<                                 qin=qin(:), qsn=qsn(:))
< 
---
>          call icepack_init_trcr(Tair  (i  ), Tf   (i  ), &
>                                 salinz(i,:), Tmltz(i,:), &
>                                 Tsfc,                    &
>                                 nilyr,       nslyr,      &
>                                 qin   (  :), qsn  (  :))
>         
diff -r ./Icepack/configuration/driver/icedrv_InitMod.F90 /data/tar/git_cice/CICE/Icepack/configuration/driver/icedrv_InitMod.F90
66c66
<       call icepack_init_itd(ncat=ncat, hin_max=hin_max)
---
>       call icepack_init_itd(ncat, hin_max)
73c73
<       call icepack_init_itd_hist(ncat=ncat, c_hi_range=c_hi_range, hin_max=hin_max) ! output
---
>       call icepack_init_itd_hist(ncat, hin_max, c_hi_range) ! output
181,195c181,195
<          call icepack_aggregate(ncat=ncat,          &
<                                 aicen=aicen(i,:),   &
<                                 vicen=vicen(i,:),   &
<                                 vsnon=vsnon(i,:),   &
<                                 trcrn=trcrn(i,:,:), &
<                                 aice=aice (i),      &
<                                 vice=vice (i),      &
<                                 vsno=vsno (i),      &
<                                 trcr=trcr (i,:),    &
<                                 aice0=aice0(i),     &
<                                 ntrcr=max_ntrcr,    &
<                                 trcr_depend=trcr_depend, &
<                                 trcr_base=trcr_base,     &
<                                 n_trcr_strata=n_trcr_strata, &
<                                 nt_strata=nt_strata)
---
>          call icepack_aggregate(ncat,          &
>                                 aicen(i,:),    &
>                                 trcrn(i,:,:),  &
>                                 vicen(i,:),    &
>                                 vsnon(i,:),    &
>                                 aice (i),      &
>                                 trcr (i,:),    &
>                                 vice (i),      &
>                                 vsno (i),      &
>                                 aice0(i),      &
>                                 max_ntrcr,     &
>                                 trcr_depend,   &
>                                 trcr_base,     &
>                                 n_trcr_strata, &
>                                 nt_strata)
diff -r ./Icepack/configuration/driver/icedrv_restart.F90 /data/tar/git_cice/CICE/Icepack/configuration/driver/icedrv_restart.F90
79c79
<            nt_qice_out=nt_qice, nt_qsno_out=nt_qsno)
---
>          nt_qice_out=nt_qice, nt_qsno_out=nt_qsno)
81,83c81,83
<            tr_lvl_out=tr_lvl, tr_aero_out=tr_aero, tr_brine_out=tr_brine, &
<            tr_pond_topo_out=tr_pond_topo, tr_pond_cesm_out=tr_pond_cesm, &
<            tr_pond_lvl_out=tr_pond_lvl)
---
>          tr_lvl_out=tr_lvl, tr_aero_out=tr_aero, tr_brine_out=tr_brine, &
>          tr_pond_topo_out=tr_pond_topo, tr_pond_cesm_out=tr_pond_cesm, &
>          tr_pond_lvl_out=tr_pond_lvl)
195c195
<            nt_qice_out=nt_qice, nt_qsno_out=nt_qsno)
---
>          nt_qice_out=nt_qice, nt_qsno_out=nt_qsno)
197,199c197,199
<            tr_lvl_out=tr_lvl, tr_aero_out=tr_aero, tr_brine_out=tr_brine, &
<            tr_pond_topo_out=tr_pond_topo, tr_pond_cesm_out=tr_pond_cesm, &
<            tr_pond_lvl_out=tr_pond_lvl)
---
>          tr_lvl_out=tr_lvl, tr_aero_out=tr_aero, tr_brine_out=tr_brine, &
>          tr_pond_topo_out=tr_pond_topo, tr_pond_cesm_out=tr_pond_cesm, &
>          tr_pond_lvl_out=tr_pond_lvl)
280,294c280,294
<          call icepack_aggregate (ncat=ncat,          &
<                                  aicen=aicen(i,:),   &
<                                  trcrn=trcrn(i,:,:), &
<                                  vicen=vicen(i,:),   &
<                                  vsnon=vsnon(i,:),   &
<                                  aice=aice (i),      &
<                                  trcr=trcr (i,:),    &
<                                  vice=vice (i),      &
<                                  vsno=vsno (i),      &
<                                  aice0=aice0(i),     &
<                                  ntrcr=max_ntrcr,    &
<                                  trcr_depend=trcr_depend, &
<                                  trcr_base=trcr_base,     &
<                                  n_trcr_strata=n_trcr_strata, &
<                                  nt_strata=nt_strata)
---
>          call icepack_aggregate (ncat,               &
>                                 aicen(i,:),  &
>                                 trcrn(i,:,:),&
>                                 vicen(i,:),  &
>                                 vsnon(i,:),  &
>                                 aice (i),  &
>                                 trcr (i,:),  &
>                                 vice (i),  &
>                                 vsno (i),  &
>                                 aice0(i),  &
>                                 max_ntrcr,          &
>                                 trcr_depend,        &
>                                 trcr_base,          &
>                                 n_trcr_strata,      &
>                                 nt_strata)
diff -r ./Icepack/configuration/driver/icedrv_step.F90 /data/tar/git_cice/CICE/Icepack/configuration/driver/icedrv_step.F90
70,79c70,79
<             call icepack_prep_radiation(ncat=ncat, nilyr=nilyr, nslyr=nslyr, &
<                          aice=aice(i),   aicen=aicen(i,:), &
<                          swvdr=swvdr(i), swvdf=swvdf(i),   &
<                          swidr=swidr(i), swidf=swidf(i),   &
<                          alvdr_ai=alvdr_ai(i), alvdf_ai=alvdf_ai(i), &
<                          alidr_ai=alidr_ai(i), alidf_ai=alidf_ai(i), &
<                          scale_factor=scale_factor(i),     &
<                          fswsfcn=fswsfcn(i,:),   fswintn=fswintn(i,:),     &
<                          fswthrun=fswthrun(i,:), fswpenln=fswpenln(i,:,:), &
<                          Sswabsn=Sswabsn(i,:,:), Iswabsn=Iswabsn(i,:,:))
---
>             call icepack_prep_radiation (ncat, nilyr, nslyr,             &
>                         aice    (i), aicen   (i,:), &
>                         swvdr   (i), swvdf   (i), &
>                         swidr   (i), swidf   (i), &
>                         alvdr_ai(i), alvdf_ai(i), &
>                         alidr_ai(i), alidf_ai(i), &
>                         scale_factor(i),                         &
>                         fswsfcn (i,:), fswintn (i,:), &
>                         fswthrun(i,:), fswpenln(i,:,:), &
>                         Sswabsn (i,:,:), Iswabsn (i,:,:))
165c165
<            ntrcr_out=ntrcr)
---
>          ntrcr_out=ntrcr)
171,173c171,173
<            tr_iage_out=tr_iage, tr_FY_out=tr_FY, &
<            tr_aero_out=tr_aero, tr_pond_out=tr_pond, tr_pond_cesm_out=tr_pond_cesm, &
<            tr_pond_lvl_out=tr_pond_lvl, tr_pond_topo_out=tr_pond_topo)
---
>          tr_iage_out=tr_iage, tr_FY_out=tr_FY, &
>          tr_aero_out=tr_aero, tr_pond_out=tr_pond, tr_pond_cesm_out=tr_pond_cesm, &
>          tr_pond_lvl_out=tr_pond_lvl, tr_pond_topo_out=tr_pond_topo)
179,183c179,183
<            nt_apnd_out=nt_apnd, nt_hpnd_out=nt_hpnd, nt_ipnd_out=nt_ipnd, &
<            nt_alvl_out=nt_alvl, nt_vlvl_out=nt_vlvl, nt_Tsfc_out=nt_Tsfc, &
<            nt_iage_out=nt_iage, nt_FY_out=nt_FY, &
<            nt_qice_out=nt_qice, nt_sice_out=nt_sice, &
<            nt_aero_out=nt_aero, nt_qsno_out=nt_qsno)
---
>          nt_apnd_out=nt_apnd, nt_hpnd_out=nt_hpnd, nt_ipnd_out=nt_ipnd, &
>          nt_alvl_out=nt_alvl, nt_vlvl_out=nt_vlvl, nt_Tsfc_out=nt_Tsfc, &
>          nt_iage_out=nt_iage, nt_FY_out=nt_FY, &
>          nt_qice_out=nt_qice, nt_sice_out=nt_sice, &
>          nt_aero_out=nt_aero, nt_qsno_out=nt_qsno)
226,303c226,298
< 
<         call icepack_step_therm1(dt=dt, ncat=ncat, nilyr=nilyr, nslyr=nslyr, n_aero=n_aero, &
<             aicen_init = aicen_init(i,:), &
<             vicen_init = vicen_init(i,:), &
<             vsnon_init = vsnon_init(i,:), &
<             aice = aice(i),   aicen = aicen(i,:), &
<             vice = vice(i),   vicen = vicen(i,:), &
<             vsno = vsno(i),   vsnon = vsnon(i,:), &
<             uvel = uvel(i),   vvel  = vvel(i),    &
<             Tsfc = trcrn(i,nt_Tsfc,:),                 &
<             zqsn = trcrn(i,nt_qsno:nt_qsno+nslyr-1,:), & 
<             zqin = trcrn(i,nt_qice:nt_qice+nilyr-1,:), & 
<             zSin = trcrn(i,nt_sice:nt_sice+nilyr-1,:), & 
<             alvl = trcrn(i,nt_alvl,:),                 & 
<             vlvl = trcrn(i,nt_vlvl,:),                 & 
<             apnd = trcrn(i,nt_apnd,:),                 & 
<             hpnd = trcrn(i,nt_hpnd,:),                 & 
<             ipnd = trcrn(i,nt_ipnd,:),                 & 
<             iage = trcrn(i,nt_iage,:),                 &
<             FY   = trcrn(i,nt_FY,:),                   & 
<             aerosno = aerosno(:,:,:),        &
<             aeroice = aeroice(:,:,:),        &
<             uatm = uatm(i), vatm = vatm(i),  &
<             wind = wind(i), zlvl = zlvl(i),  &
<             Qa   = Qa(i),   rhoa = rhoa(i),  &
<             Tair = Tair(i), Tref = Tref(i),  &
<             Qref = Qref(i), Uref = Uref(i),  &
<             Cdn_atm_ratio = Cdn_atm_ratio(i),&
<             Cdn_ocn       = Cdn_ocn(i),      &
<             Cdn_ocn_skin  = Cdn_ocn_skin(i), &
<             Cdn_ocn_floe  = Cdn_ocn_floe(i), &
<             Cdn_ocn_keel  = Cdn_ocn_keel(i), &
<             Cdn_atm       = Cdn_atm(i),      &
<             Cdn_atm_skin  = Cdn_atm_skin(i), &
<             Cdn_atm_floe  = Cdn_atm_floe(i), &
<             Cdn_atm_pond  = Cdn_atm_pond(i), &
<             Cdn_atm_rdg   = Cdn_atm_rdg(i),  &
<             hfreebd  = hfreebd(i),    hkeel     = hkeel(i),       &
<             hdraft   = hdraft(i),     hridge    = hridge(i),      &
<             distrdg  = distrdg(i),    dkeel     = dkeel(i),       &
<             lfloe    = lfloe(i),      dfloe     = dfloe(i),       &
<             strax    = strax(i),      stray     = stray(i),       &
<             strairxT = strairxT(i),   strairyT  = strairyT(i),    &
<             potT     = potT(i),       sst       = sst(i),         &
<             sss      = sss(i),        Tf        = Tf(i),          &
<             strocnxT = strocnxT(i),   strocnyT  = strocnyT(i),    &
<             fbot     = fbot(i),       frzmlt    = frzmlt(i),      &
<             Tbot     = Tbot(i),       Tsnice    = Tsnice(i),      &
<             rside    = rside(i),                                  &
<             fsnow    = fsnow(i),      frain     = frain(i),       &
<             fpond    = fpond(i),                                  &
<             fsurf    = fsurf(i),      fsurfn    = fsurfn(i,:),    &
<             fcondtop = fcondtop(i),   fcondtopn = fcondtopn(i,:), &
<             fcondbot = fcondbot(i),   fcondbotn = fcondbotn(i,:), &
<             fswsfcn  = fswsfcn(i,:),  fswintn   = fswintn(i,:),   &
<             fswthrun = fswthrun(i,:), fswabs    = fswabs(i),      &
<             flwout   = flwout(i),     flw       = flw(i),         &
<             fsens    = fsens(i),      fsensn    = fsensn(i,:),    &
<             flat     = flat(i),       flatn     = flatn(i,:),     &
<             fresh    = fresh(i),      fsalt     = fsalt(i),       &
<             fhocn    = fhocn(i),      fswthru   = fswthru(i),     &
<             flatn_f  = flatn_f(i,:),  fsensn_f  = fsensn_f(i,:),  &
<             fsurfn_f = fsurfn_f(i,:),                             &
<             fcondtopn_f = fcondtopn_f(i,:),                       &
<             faero_atm   = faero_atm(i,1:n_aero),                  &
<             faero_ocn   = faero_ocn(i,1:n_aero),                  &
<             Sswabsn  = Sswabsn(i,:,:),Iswabsn   = Iswabsn(i,:,:), &
<             evap = evap(i), evaps = evaps(i), evapi = evapi(i),   &
<             dhsn     = dhsn(i,:),     ffracn    = ffracn(i,:),    &
<             meltt    = meltt(i),      melttn    = melttn(i,:),    &
<             meltb    = meltb(i),      meltbn    = meltbn(i,:),    &
<             melts    = melts(i),      meltsn    = meltsn(i,:),    &
<             congel   = congel(i),     congeln   = congeln(i,:),   &
<             snoice   = snoice(i),     snoicen   = snoicen(i,:),   &
<             dsnown   = dsnown(i,:),                               &
<             lmask_n  = lmask_n(i),    lmask_s   = lmask_s(i),     &
<             mlt_onset=mlt_onset(i),   frz_onset = frz_onset(i),   &
<             yday = yday,  prescribed_ice = prescribed_ice)
---
>         
>         call icepack_step_therm1(dt, ncat, nilyr, nslyr, n_aero,                &
>             aicen_init  (i,:),                           &
>             vicen_init  (i,:), vsnon_init  (i,:), &
>             aice        (i), aicen       (i,:), &
>             vice        (i), vicen       (i,:), &
>             vsno        (i), vsnon       (i,:), &
>             uvel        (i), vvel        (i), &
>             trcrn       (i,nt_Tsfc,:),                   &
>             trcrn       (i,nt_qsno:nt_qsno+nslyr-1,:),   & 
>             trcrn       (i,nt_qice:nt_qice+nilyr-1,:),   & 
>             trcrn       (i,nt_sice:nt_sice+nilyr-1,:),   & 
>             trcrn       (i,nt_alvl,:),                   & 
>             trcrn       (i,nt_vlvl,:),                   & 
>             trcrn       (i,nt_apnd,:),                   & 
>             trcrn       (i,nt_hpnd,:),                   & 
>             trcrn       (i,nt_ipnd,:),                   & 
>             trcrn       (i,nt_iage,:),                   &
>             trcrn       (i,nt_FY  ,:),                   & 
>             aerosno     (:,:,:),      aeroice     (:,:,:),      &
>             uatm        (i), vatm        (i), &
>             wind        (i), zlvl        (i), &
>             Qa          (i), rhoa        (i), &
>             Tair        (i), Tref        (i), &
>             Qref        (i), Uref        (i), &
>             Cdn_atm_ratio(i),                           &
>             Cdn_ocn     (i), Cdn_ocn_skin(i), &
>             Cdn_ocn_floe(i), Cdn_ocn_keel(i), &
>             Cdn_atm     (i), Cdn_atm_skin(i), &
>             Cdn_atm_floe(i), Cdn_atm_pond(i), &
>             Cdn_atm_rdg (i), hfreebd     (i), &
>             hdraft      (i), hridge      (i), &
>             distrdg     (i), hkeel       (i), &
>             dkeel       (i), lfloe       (i), &
>             dfloe       (i),                           &
>             strax       (i), stray       (i), &
>             strairxT    (i), strairyT    (i), &
>             potT        (i), sst         (i), &
>             sss         (i), Tf          (i), &
>             strocnxT    (i), strocnyT    (i), &
>             fbot        (i),                  &
>             Tbot        (i), Tsnice       (i), &
>             frzmlt      (i), rside       (i), &
>             fsnow       (i), frain       (i), &
>             fpond       (i),                           &
>             fsurf       (i), fsurfn      (i,:), &
>             fcondtop    (i), fcondtopn   (i,:), &
>             fcondbot    (i), fcondbotn   (i,:), &
>             fswsfcn     (i,:), fswintn     (i,:), &
>             fswthrun    (i,:), fswabs      (i), &
>             flwout      (i),                           &
>             Sswabsn   (i,:,:), Iswabsn   (i,:,:), &
>             flw         (i), &
>             fsens       (i), fsensn      (i,:), &
>             flat        (i), flatn       (i,:), &
>             evap        (i),                           &
>             evaps       (i), evapi       (i), &
>             fresh       (i), fsalt       (i), &
>             fhocn       (i), fswthru     (i), &
>             flatn_f     (i,:), fsensn_f    (i,:), &
>             fsurfn_f    (i,:), fcondtopn_f (i,:), &
>             faero_atm   (i,1:n_aero),                    &
>             faero_ocn   (i,1:n_aero),                    &
>             dhsn        (i,:), ffracn      (i,:), &
>             meltt       (i), melttn      (i,:), &
>             meltb       (i), meltbn      (i,:), &
>             melts       (i), meltsn      (i,:), &
>             congel      (i), congeln     (i,:), &
>             snoice      (i), snoicen     (i,:), &
>             dsnown      (i,:), &
>             lmask_n     (i), lmask_s     (i), &
>             mlt_onset   (i), frz_onset   (i), &
>             yday,  prescribed_ice)
379,409c374,397
<             call icepack_step_therm2(dt=dt, ncat=ncat, n_aero=n_aero, &
<                          nltrcr=nltrcr, nilyr=nilyr, nslyr=nslyr,     &
<                          hin_max=hin_max(:), nblyr=nblyr,             &   
<                          aicen=aicen(i,:),                            &
<                          vicen=vicen(i,:),                            &
<                          vsnon=vsnon(i,:),                            &
<                          aicen_init=aicen_init(i,:),                  &
<                          vicen_init=vicen_init(i,:),                  &
<                          trcrn=trcrn(i,1:ntrcr,:),                    &
<                          aice0=aice0(i),                              &
<                          aice =aice(i),                               &
<                          trcr_depend=trcr_depend(1:ntrcr),            &
<                          trcr_base=trcr_base(1:ntrcr,:),              &
<                          n_trcr_strata=n_trcr_strata(1:ntrcr),        &
<                          nt_strata=nt_strata(1:ntrcr,:),              &
<                          Tf=Tf(i), sss=sss(i),                        &
<                          salinz=salinz(i,:),                          &
<                          rside=rside(i),   meltl=meltl(i),            &
<                          frzmlt=frzmlt(i), frazil=frazil(i),          &
<                          frain=frain(i),   fpond=fpond(i),            &
<                          fresh=fresh(i),   fsalt=fsalt(i),            &
<                          fhocn=fhocn(i),   update_ocn_f=update_ocn_f, &
<                          bgrid=bgrid,      cgrid=cgrid,               &
<                          igrid=igrid,      faero_ocn=faero_ocn(i,:),  &
<                          first_ice=first_ice(i,:),                    &
<                          fzsal=fzsal(i),                              &
<                          flux_bio=flux_bio(i,1:nbtrcr),               &
<                          ocean_bio=ocean_bio(i,1:nbtrcr),             &
<                          frazil_diag=frazil_diag(i),                  &
<                          frz_onset=frz_onset(i),                      &
<                          yday=yday)
---
>             call icepack_step_therm2(dt, ncat, n_aero, nltrcr,                 &
>                            nilyr,                  nslyr,                  &
>                            hin_max   (:),          nblyr,                  &   
>                            aicen     (i,:),                         &
>                            vicen     (i,:), vsnon     (i,:), &
>                            aicen_init(i,:), vicen_init(i,:), &
>                            trcrn     (i,1:ntrcr,:),                 &
>                            aice0     (i), aice      (i), &
>                            trcr_depend(1:ntrcr),   trcr_base(1:ntrcr,:),   &
>                            n_trcr_strata(1:ntrcr), nt_strata(1:ntrcr,:),   &
>                            Tf        (i), sss       (i), &
>                            salinz    (i,:),                         &
>                            rside     (i), meltl     (i), &
>                            frzmlt    (i), frazil    (i), &
>                            frain     (i), fpond     (i), &
>                            fresh     (i), fsalt     (i), &
>                            fhocn     (i), update_ocn_f,           &
>                            bgrid,                  cgrid,                  &
>                            igrid,                  faero_ocn (i,:), &
>                            first_ice (i,:), fzsal     (i), &
>                            flux_bio  (i,1:nbtrcr),                  &
>                            ocean_bio (i,1:nbtrcr),                  &
>                            frazil_diag(i),                         &
>                            frz_onset (i), yday)
483,493c471,482
<             call icepack_aggregate (ncat=ncat,                     &
<                          aicen=aicen(i,:), trcrn=trcrn(i,1:ntrcr,:), &
<                          vicen=vicen(i,:), vsnon=vsnon(i,:),       &
<                          aice =aice (i),   trcr =trcr (i,1:ntrcr), &
<                          vice =vice (i),   vsno =vsno (i),         &
<                          aice0=aice0(i),                           &
<                          ntrcr=ntrcr,                              &
<                          trcr_depend=trcr_depend    (1:ntrcr),     &
<                          trcr_base=trcr_base        (1:ntrcr,:),   &
<                          n_trcr_strata=n_trcr_strata(1:ntrcr),     &
<                          nt_strata=nt_strata        (1:ntrcr,:))
---
>             call icepack_aggregate (ncat,               aicen(i,:),   &
>                                trcrn(i,1:ntrcr,:),               &
>                                vicen(i,:), vsnon(i,:),  &
>                                aice (i),                       &
>                                trcr (i,1:ntrcr),               &
>                                vice (i), vsno (i),  &
>                                aice0(i),                       &
>                                ntrcr,                                   &
>                                trcr_depend(1:ntrcr),                    &
>                                trcr_base    (1:ntrcr,:),                &
>                                n_trcr_strata(1:ntrcr),                  &
>                                nt_strata    (1:ntrcr,:))
582,609c571,596
<             call icepack_step_ridge(dt=dt,         ndtd=ndtd,                &
<                          nilyr=nilyr,              nslyr=nslyr,              &
<                          nblyr=nblyr,                                        &
<                          ncat=ncat,                hin_max=hin_max(:),       &
<                          rdg_conv=rdg_conv(i),     rdg_shear=rdg_shear(i),   &
<                          aicen=aicen(i,:),                                   &
<                          trcrn=trcrn(i,1:ntrcr,:),                           &
<                          vicen=vicen(i,:),         vsnon=vsnon(i,:),         &
<                          aice0=aice0(i),                                     &
<                          trcr_depend=trcr_depend(1:ntrcr),                   &
<                          trcr_base=trcr_base(1:ntrcr,:),                     &
<                          n_trcr_strata=n_trcr_strata(1:ntrcr),               &
<                          nt_strata=nt_strata(1:ntrcr,:),                     &
<                          dardg1dt=dardg1dt(i),     dardg2dt=dardg2dt(i),     &
<                          dvirdgdt=dvirdgdt(i),     opening=opening(i),       &
<                          fpond=fpond(i),                                     &
<                          fresh=fresh(i),           fhocn=fhocn(i),           &
<                          n_aero=n_aero,                                      &
<                          faero_ocn=faero_ocn(i,:),                           &
<                          aparticn=aparticn(i,:),   krdgn=krdgn(i,:),         &
<                          aredistn=aredistn(i,:),   vredistn=vredistn(i,:),   &
<                          dardg1ndt=dardg1ndt(i,:), dardg2ndt=dardg2ndt(i,:), &
<                          dvirdgndt=dvirdgndt(i,:),                           &
<                          araftn=araftn(i,:),       vraftn=vraftn(i,:),       &
<                          aice=aice(i),             fsalt=fsalt(i),           &
<                          first_ice=first_ice(i,:), fzsal=fzsal(i),           &
<                          flux_bio=flux_bio(i,1:nbtrcr),                      &
<                          closing=closing(i) )
---
>             call icepack_step_ridge (dt,            ndtd,                  &
>                          nilyr,                 nslyr,                 &
>                          nblyr,                                        &
>                          ncat,                  hin_max  (:),          &
>                          rdg_conv (i), rdg_shear(i), &
>                          aicen    (i,:),                        &
>                          trcrn    (i,1:ntrcr,:),                &
>                          vicen    (i,:), vsnon    (i,:), &
>                          aice0    (i), trcr_depend(1:ntrcr),  &
>                          trcr_base(1:ntrcr,:),  n_trcr_strata(1:ntrcr),&
>                          nt_strata(1:ntrcr,:),                         &
>                          dardg1dt (i), dardg2dt (i), &
>                          dvirdgdt (i), opening  (i), &
>                          fpond    (i),                        &
>                          fresh    (i), fhocn    (i), &
>                          n_aero,                                       &
>                          faero_ocn(i,:),                        &
>                          aparticn (i,:), krdgn    (i,:), &
>                          aredistn (i,:), vredistn (i,:), &
>                          dardg1ndt(i,:), dardg2ndt(i,:), &
>                          dvirdgndt(i,:),                        &
>                          araftn   (i,:), vraftn   (i,:), &
>                          aice     (i), fsalt    (i), &
>                          first_ice(i,:), fzsal    (i), &
>                          flux_bio (i,1:nbtrcr), &
>                          closing(i) )
625,651c612,636
<             call icepack_step_ridge (dt=dt,        ndtd=ndtd,                &
<                          nilyr=nilyr,              nslyr=nslyr,              &
<                          nblyr=nblyr,                                        &
<                          ncat=ncat,                hin_max=hin_max(:),       &
<                          rdg_conv=rdg_conv(i),     rdg_shear=rdg_shear(i),   &
<                          aicen=aicen(i,:),                                   &
<                          trcrn=trcrn(i,1:ntrcr,:),                           &
<                          vicen=vicen(i,:),         vsnon=vsnon(i,:),         &
<                          aice0=aice0(i),                                     &
<                          trcr_depend=trcr_depend(1:ntrcr),                   &
<                          trcr_base=trcr_base(1:ntrcr,:),                     &
<                          n_trcr_strata=n_trcr_strata(1:ntrcr),               &
<                          nt_strata=nt_strata(1:ntrcr,:),                     &
<                          dardg1dt=dardg1dt(i),     dardg2dt=dardg2dt(i),     &
<                          dvirdgdt=dvirdgdt(i),     opening=opening(i),       &
<                          fpond=fpond(i),                                     &
<                          fresh=fresh(i),           fhocn=fhocn(i),           &
<                          n_aero=n_aero,                                      &
<                          faero_ocn=faero_ocn(i,:),                           &
<                          aparticn=aparticn(i,:),   krdgn=krdgn(i,:),         &
<                          aredistn=aredistn(i,:),   vredistn=vredistn(i,:),   &
<                          dardg1ndt=dardg1ndt(i,:), dardg2ndt=dardg2ndt(i,:), &
<                          dvirdgndt=dvirdgndt(i,:),                           &
<                          araftn=araftn(i,:),       vraftn=vraftn(i,:),       &
<                          aice=aice(i),             fsalt=fsalt(i),           &
<                          first_ice=first_ice(i,:), fzsal=fzsal(i),           &
<                          flux_bio=flux_bio(i,1:nbtrcr))
---
>             call icepack_step_ridge (dt,            ndtd,                  &
>                          nilyr,                 nslyr,                 &
>                          nblyr,                                        &
>                          ncat,                  hin_max  (:),          &
>                          rdg_conv (i), rdg_shear(i), &
>                          aicen    (i,:),                        &
>                          trcrn    (i,1:ntrcr,:),                &
>                          vicen    (i,:), vsnon    (i,:), &
>                          aice0    (i), trcr_depend(1:ntrcr),  &
>                          trcr_base(1:ntrcr,:),  n_trcr_strata(1:ntrcr),&
>                          nt_strata(1:ntrcr,:),                         &
>                          dardg1dt (i), dardg2dt (i), &
>                          dvirdgdt (i), opening  (i), &
>                          fpond    (i),                        &
>                          fresh    (i), fhocn    (i), &
>                          n_aero,                                       &
>                          faero_ocn(i,:),                        &
>                          aparticn (i,:), krdgn    (i,:), &
>                          aredistn (i,:), vredistn (i,:), &
>                          dardg1ndt(i,:), dardg2ndt(i,:), &
>                          dvirdgndt(i,:),                        &
>                          araftn   (i,:), vraftn   (i,:), &
>                          aice     (i), fsalt    (i), &
>                          first_ice(i,:), fzsal    (i), &
>                          flux_bio (i,1:nbtrcr))
725c710
<            max_aero_out=max_aero)
---
>          max_aero_out=max_aero)
738c723
<            tr_brine_out=tr_brine, tr_bgc_N_out=tr_bgc_N, tr_zaero_out=tr_zaero)
---
>          tr_brine_out=tr_brine, tr_bgc_N_out=tr_bgc_N, tr_zaero_out=tr_zaero)
744,747c729,732
<            nt_Tsfc_out=nt_Tsfc, nt_alvl_out=nt_alvl, &
<            nt_apnd_out=nt_apnd, nt_hpnd_out=nt_hpnd, nt_ipnd_out=nt_ipnd, nt_aero_out=nt_aero, &
<            nlt_chl_sw_out=nlt_chl_sw, nlt_zaero_sw_out=nlt_zaero_sw, &
<            nt_fbri_out=nt_fbri, nt_zaero_out=nt_zaero)
---
>          nt_Tsfc_out=nt_Tsfc, nt_alvl_out=nt_alvl, &
>          nt_apnd_out=nt_apnd, nt_hpnd_out=nt_hpnd, nt_ipnd_out=nt_ipnd, nt_aero_out=nt_aero, &
>          nlt_chl_sw_out=nlt_chl_sw, nlt_zaero_sw_out=nlt_zaero_sw, &
>          nt_fbri_out=nt_fbri, nt_zaero_out=nt_zaero)
777,815c762,800
<             call icepack_step_radiation(dt=dt,      ncat=ncat,          &
<                          n_algae=n_algae,           tr_zaero=tr_zaero,  &
<                          nblyr=nblyr,               ntrcr=ntrcr,        &
<                          nbtrcr_sw=nbtrcr_sw,       nilyr=nilyr,        &
<                          nslyr=nslyr,               n_aero=n_aero,      &
<                          n_zaero=n_zaero,           dEdd_algae=dEdd_algae,        &
<                          nlt_chl_sw=nlt_chl_sw,     nlt_zaero_sw=nlt_zaero_sw(:), &
<                          swgrid=swgrid(:),          igrid=igrid(:),     &
<                          fbri=fbri(:),                                  &
<                          aicen=aicen(i,:),          vicen=vicen(i,:),   &
<                          vsnon=vsnon(i,:),                              &
<                          Tsfcn=trcrn(i,nt_Tsfc,:),                      &
<                          alvln=trcrn(i,nt_alvl,:),                      &
<                          apndn=trcrn(i,nt_apnd,:),                      &
<                          hpndn=trcrn(i,nt_hpnd,:),                      &
<                          ipndn=trcrn(i,nt_ipnd,:),                      &
<                          aeron=trcrn(i,nt_aero:nt_aero+4*n_aero-1,:),   &
<                          zbion=ztrcr_sw,            trcrn=ztrcr,        &
<                          TLAT=TLAT(i),              TLON=TLON(i),       &
<                          calendar_type=calendar_type,                   &
<                          days_per_year=days_per_year, sec=sec,          &
<                          nextsw_cday=nextsw_cday,   yday=yday,          &
<                          kaer_tab=kaer_tab,         kaer_bc_tab=kaer_bc_tab(:,:), &
<                          waer_tab=waer_tab,         waer_bc_tab=waer_bc_tab(:,:), &
<                          gaer_tab=gaer_tab,         gaer_bc_tab=gaer_bc_tab(:,:), &
<                          bcenh=bcenh(:,:,:),        modal_aero=modal_aero,    &
<                          swvdr=swvdr(i),            swvdf=swvdf(i),           &
<                          swidr=swidr(i),            swidf=swidf(i),           &
<                          coszen=coszen(i),          fsnow=fsnow(i),           &
<                          alvdrn=alvdrn(i,:),        alvdfn=alvdfn(i,:),       &
<                          alidrn=alidrn(i,:),        alidfn=alidfn(i,:),       &
<                          fswsfcn=fswsfcn(i,:),      fswintn=fswintn(i,:),     &
<                          fswthrun=fswthrun(i,:),    fswpenln=fswpenln(i,:,:), &
<                          Sswabsn=Sswabsn(i,:,:),    Iswabsn=Iswabsn(i,:,:),   &
<                          albicen=albicen(i,:),      albsnon=albsnon(i,:),     &
<                          albpndn=albpndn(i,:),      apeffn=apeffn(i,:),       &
<                          snowfracn=snowfracn(i,:),                            &
<                          dhsn=dhsn(i,:),            ffracn=ffracn(i,:),       &
<                          l_print_point=l_print_point)
---
>             call icepack_step_radiation (dt,     ncat,             &
>                           n_algae,               tr_zaero,         &
>                           nblyr,                 ntrcr,            &
>                           nbtrcr_sw,             nilyr,            &
>                           nslyr,                 n_aero,           &
>                           n_zaero,               dEdd_algae,       &
>                           nlt_chl_sw,            nlt_zaero_sw(:),  &
>                           swgrid(:),             igrid(:),         &
>                           fbri(:),                                 &
>                           aicen(i,:),            vicen(i,:),       &
>                           vsnon(i,:),                              &
>                           trcrn(i,nt_Tsfc,:),                      &
>                           trcrn(i,nt_alvl,:),                      &
>                           trcrn(i,nt_apnd,:),                      &
>                           trcrn(i,nt_hpnd,:),                      &
>                           trcrn(i,nt_ipnd,:),                      &
>                           trcrn(i,nt_aero:nt_aero+4*n_aero-1,:),   &
>                           ztrcr_sw,              ztrcr,            &
>                           TLAT(i),               TLON(i),          &
>                           calendar_type,         days_per_year,    &
>                           nextsw_cday,           yday,             &
>                           sec,                   kaer_tab,         &
>                           waer_tab,              gaer_tab,         &
>                           kaer_bc_tab(:,:),      waer_bc_tab(:,:), &
>                           gaer_bc_tab(:,:),      bcenh(:,:,:),     &
>                           modal_aero,                              &
>                           swvdr(i),              swvdf(i),         &
>                           swidr(i),              swidf(i),         &
>                           coszen(i),             fsnow(i),         &
>                           alvdrn(i,:),           alvdfn(i,:),      &
>                           alidrn(i,:),           alidfn(i,:),      &
>                           fswsfcn(i,:),          fswintn(i,:),     &
>                           fswthrun(i,:),         fswpenln(i,:,:),  &
>                           Sswabsn(i,:,:),        Iswabsn(i,:,:),   &
>                           albicen(i,:),          albsnon(i,:),     &
>                           albpndn(i,:),          apeffn(i,:),      &
>                           snowfracn(i,:),                          &
>                           dhsn(i,:),             ffracn(i,:),      &
>                           l_print_point)
911,929c896,914
<                   call icepack_atm_boundary(sfctype = 'ocn',          &
<                                             Tsf     = sst(i),         &
<                                             potT    = potT(i),        &
<                                             uatm    = uatm(i),        &   
<                                             vatm    = vatm(i),        &   
<                                             wind    = wind(i),        &   
<                                             zlvl    = zlvl(i),        &   
<                                             Qa      = Qa(i),          &     
<                                             rhoa    = rhoa(i),        &
<                                             strx    = strairx_ocn(i), & 
<                                             stry    = strairy_ocn(i), & 
<                                             Tref    = Tref_ocn(i),    & 
<                                             Qref    = Qref_ocn(i),    & 
<                                             delt    = delt(i),        &    
<                                             delq    = delq(i),        &
<                                             lhcoef  = lhcoef(i),      &
<                                             shcoef  = shcoef(i),      &
<                                             Cdn_atm = Cdn_atm(i),     & 
<                                             Cdn_atm_ratio_n = Cdn_atm_ratio(i))    
---
>                   call icepack_atm_boundary( 'ocn',                &
>                                         sst        (i), &    
>                                         potT       (i), &
>                                         uatm       (i), &   
>                                         vatm       (i), &   
>                                         wind       (i), &   
>                                         zlvl       (i), &   
>                                         Qa         (i), &     
>                                         rhoa       (i), &
>                                         strairx_ocn(i), & 
>                                         strairy_ocn(i), & 
>                                         Tref_ocn   (i), & 
>                                         Qref_ocn   (i), & 
>                                         delt       (i),      &    
>                                         delq       (i),      &
>                                         lhcoef     (i),      &
>                                         shcoef     (i),      &
>                                         Cdn_atm    (i), & 
>                                         Cdn_atm_ratio(i))    
951,963c936,948
<             call icepack_ocn_mixed_layer(alvdr_ocn=alvdr_ocn(i),  swvdr=swvdr(i),   &
<                                          alidr_ocn=alidr_ocn(i),  swidr=swidr(i),   &
<                                          alvdf_ocn=alvdf_ocn(i),  swvdf=swvdf(i),   &
<                                          alidf_ocn=alidf_ocn(i),  swidf=swidf(i),   &
<                                          flwout_ocn=flwout_ocn(i),sst=sst(i),       &
<                                          fsens_ocn=fsens_ocn(i),  shcoef=shcoef(i), &
<                                          flat_ocn=flat_ocn(i),    lhcoef=lhcoef(i), &
<                                          evap_ocn=evap_ocn(i),    flw=flw(i),       &
<                                          delt=delt(i),            delq=delq(i),     &
<                                          aice=aice(i),            fhocn=fhocn(i),   &
<                                          fswthru=fswthru(i),      hmix=hmix(i),     &
<                                          Tf=Tf(i),                qdp=qdp(i),       &
<                                          frzmlt=frzmlt(i),        dt=dt)
---
>             call icepack_ocn_mixed_layer (alvdr_ocn(i), swvdr     (i), &
>                                       alidr_ocn(i), swidr     (i), &
>                                       alvdf_ocn(i), swvdf     (i), &
>                                       alidf_ocn(i), swidf     (i), &
>                                       sst      (i), flwout_ocn(i), &
>                                       fsens_ocn(i), shcoef    (i),      &
>                                       flat_ocn (i), lhcoef    (i),      &
>                                       evap_ocn (i), flw       (i), &
>                                       delt     (i),      delq      (i),      &
>                                       aice     (i), fhocn     (i), &
>                                       fswthru  (i), hmix      (i), &
>                                       Tf       (i), qdp       (i), &
>                                       frzmlt   (i), dt)
1040,1041c1025,1026
<            max_algae_out=max_algae, max_nbtrcr_out=max_nbtrcr, max_don_out=max_don, &
<            max_doc_out=max_doc, max_dic_out=max_dic, max_aero_out=max_aero, max_fe_out=max_fe)
---
>          max_algae_out=max_algae, max_nbtrcr_out=max_nbtrcr, max_don_out=max_don, &
>          max_doc_out=max_doc, max_dic_out=max_dic, max_aero_out=max_aero, max_fe_out=max_fe)
1066,1077c1051,1061
<          call icepack_init_OceanConcArray(max_nbtrcr=max_nbtrcr, &
<                       max_algae = max_algae, max_don  = max_don, &
<                       max_doc   = max_doc,   max_dic  = max_dic, &
<                       max_aero  = max_aero,  max_fe   = max_fe,  &
<                       nit = nit(i),   amm    = amm(i),      &
<                       sil = sil(i),   dmsp   = dmsp(i),     &
<                       dms = dms(i),   algalN = algalN(i,:), &
<                       doc = doc(i,:), don    = don(i,:),    &
<                       dic = dic(i,:), fed    = fed(i,:),    &
<                       fep = fep(i,:), zaeros = zaeros(i,:), &
<                       ocean_bio_all=ocean_bio_all(i,:),     &
<                       hum=hum(i))
---
>          call icepack_init_OceanConcArray(max_nbtrcr, &
>                 max_algae, max_don,  max_doc,        &
>                 max_dic,   max_aero, max_fe,         &
>                 nit(i), amm   (i), &
>                 sil(i), dmsp  (i), &
>                 dms(i), algalN(i,:), &
>                 doc(i,:), don   (i,:), &
>                 dic(i,:), fed   (i,:), &
>                 fep(i,:), zaeros(i,:), &
>                 ocean_bio_all(i,:), &
>                 hum(i))
1091,1143c1075,1125
<          call icepack_biogeochemistry(dt=dt, ntrcr=ntrcr, nbtrcr=nbtrcr,    &
<                       ncat=ncat, nblyr=nblyr, nilyr=nilyr, nslyr=nslyr,     &
<                       n_algae=n_algae, n_zaero=n_zaero,                     &
<                       n_doc=n_doc, n_dic=n_dic, n_don=n_don,                &
<                       n_fed=n_fed, n_fep=n_fep,                             &
<                       bgrid=bgrid, igrid=igrid, icgrid=icgrid, cgrid=cgrid, &
<                       upNO         = upNO(i),                   &
<                       upNH         = upNH(i),                   &
<                       iDi          = iDi(i,:,:),                &
<                       iki          = iki(i,:,:),                &
<                       zfswin       = zfswin(i,:,:),             &
<                       zsal_tot     = zsal_tot(i),               &
<                       darcy_V      = darcy_V(i,:),              &
<                       grow_net     = grow_net(i),               &
<                       PP_net       = PP_net(i),                 &
<                       hbri         = hbri(i),                   &
<                       dhbr_bot     = dhbr_bot(i,:),             &
<                       dhbr_top     = dhbr_top(i,:),             &
<                       Zoo          = Zoo(i,:,:),                &
<                       fbio_snoice  = fbio_snoice(i,:),          &
<                       fbio_atmice  = fbio_atmice(i,:),          &
<                       ocean_bio    = ocean_bio(i,1:nbtrcr),     &
<                       first_ice    = first_ice(i,:),            &
<                       fswpenln     = fswpenln(i,:,:),           &
<                       bphi         = bphi(i,:,:),               &
<                       bTiz         = bTiz(i,:,:),               &
<                       ice_bio_net  = ice_bio_net(i,1:nbtrcr),   &
<                       snow_bio_net = snow_bio_net(i,1:nbtrcr),  &
<                       fswthrun     = fswthrun(i,:),             &
<                       Rayleigh_criteria = Rayleigh_criteria(i), &
<                       sice_rho     = sice_rho(i,:),             &
<                       fzsal        = fzsal(i),                  &
<                       fzsal_g      = fzsal_g(i),                &
<                       meltbn       = meltbn(i,:),               &
<                       melttn       = melttn(i,:),               &
<                       congeln      = congeln(i,:),              &
<                       snoicen      = snoicen(i,:),              &
<                       sst          = sst(i),                    &
<                       sss          = sss(i),                    &
<                       fsnow        = fsnow(i),                  &
<                       meltsn       = meltsn(i,:),               &
<                       hin_old      = hin_old(i,:),              &
<                       flux_bio     = flux_bio(i,1:nbtrcr),      &
<                       flux_bio_atm = flux_bio_atm(i,1:nbtrcr),  &
<                       aicen_init   = aicen_init(i,:),           &
<                       vicen_init   = vicen_init(i,:),           &
<                       aicen        = aicen(i,:),                &
<                       vicen        = vicen(i,:),                &
<                       vsnon        = vsnon(i,:),                &
<                       aice0        = aice0(i),                  &
<                       trcrn        = trcrn(i,1:ntrcr,:),        &
<                       vsnon_init   = vsnon_init(i,:),           &
<                       skl_bgc      = skl_bgc)
---
>          call icepack_biogeochemistry(dt, ntrcr, nbtrcr,&
>                               upNO        (i),        &
>                               upNH        (i),        &
>                               iDi         (i,:,:),        &
>                               iki         (i,:,:),        &
>                               zfswin      (i,:,:),        &
>                               zsal_tot    (i),        &
>                               darcy_V     (i,:),        &
>                               grow_net    (i),        &
>                               PP_net      (i),        &
>                               hbri        (i),        &
>                               dhbr_bot    (i,:),        &
>                               dhbr_top    (i,:),        &
>                               Zoo         (i,:,:),        &
>                               fbio_snoice (i,:),        &
>                               fbio_atmice (i,:),        &
>                               ocean_bio   (i,1:nbtrcr),        &
>                               first_ice   (i,:),        &
>                               fswpenln    (i,:,:),        &
>                               bphi        (i,:,:),        &
>                               bTiz        (i,:,:),        &
>                               ice_bio_net (i,1:nbtrcr),        &
>                               snow_bio_net(i,1:nbtrcr),        &
>                               fswthrun    (i,:),        &
>                               Rayleigh_criteria(i),        &
>                               sice_rho    (i,:),        &
>                               fzsal       (i),        &   
>                               fzsal_g     (i),        &
>                               bgrid, igrid, icgrid, cgrid,     &
>                               nblyr, nilyr, nslyr, n_algae, n_zaero,   &
>                               ncat, n_doc, n_dic, n_don, n_fed, n_fep, &
>                               meltbn      (i,:),        &
>                               melttn      (i,:),        &
>                               congeln     (i,:),        &
>                               snoicen     (i,:),        & 
>                               sst         (i),        &    
>                               sss         (i),        &
>                               fsnow       (i),        &
>                               meltsn      (i,:),        &
>                               hin_old     (i,:),        &
>                               flux_bio    (i,1:nbtrcr),        &
>                               flux_bio_atm(i,1:nbtrcr),        &
>                               aicen_init  (i,:),        &
>                               vicen_init  (i,:),        &
>                               aicen       (i,:),        &
>                               vicen       (i,:),        &
>                               vsnon       (i,:),        &
>                               aice0       (i),        &
>                               trcrn       (i,1:ntrcr,:),        &
>                               vsnon_init  (i,:),        &
>                               skl_bgc)
diff -r ./Icepack/configuration/scripts/icepack.batch.csh /data/tar/git_cice/CICE/Icepack/configuration/scripts/icepack.batch.csh
45c45
< #PBS -q ${ICE_MACHINE_QUEUE}
---
> #PBS -q share
67c67
< #PBS -q ${ICE_MACHINE_QUEUE}
---
> #PBS -q short
70d69
< #PBS -l walltime=${ICE_RUNLENGTH}
76c75
< #PBS -q ${ICE_MACHINE_QUEUE}
---
> #PBS -q debug
88c87
< #PBS -q ${ICE_MACHINE_QUEUE}
---
> #PBS -q debug
diff -r ./Icepack/configuration/scripts/icepack.launch.csh /data/tar/git_cice/CICE/Icepack/configuration/scripts/icepack.launch.csh
12,18d11
< if (${ICE_MACHINE} =~ gordon* || ${ICE_MACHINE} =~ conrad* || ${ICE_MACHINE} =~ onyx* ) then
< cat >> ${jobfile} << EOFR
< aprun -n 1 -N 1 -d 1 ./icepack >&! \$ICE_RUNLOG_FILE
< EOFR
< 
< #==========================================
< else
22,23d14
< 
< endif
diff -r ./Icepack/configuration/scripts/machines/env.cheyenne_intel /data/tar/git_cice/CICE/Icepack/configuration/scripts/machines/env.cheyenne_intel
20c20
< setenv ICE_MACHINE_QUEUE "share"
---
> setenv ICE_MACHINE_QUEUE "regular"
Only in ./Icepack/configuration/scripts/machines: env.izumi_gnu
diff -r ./Icepack/configuration/scripts/machines/env.izumi_intel /data/tar/git_cice/CICE/Icepack/configuration/scripts/machines/env.izumi_intel
5d4
< module purge
8,9d6
< setenv OMP_STACKSIZE 64M
< 
17,18d13
< setenv ICE_MACHINE_QSTAT "qstat "
< setenv ICE_MACHINE_QUEUE "short"
20c15,16
< setenv ICE_MACHINE_TPNODE 48
---
> setenv ICE_MACHINE_QUEUE "debug"
> setenv ICE_MACHINE_TPNODE 24
diff -r ./Icepack/configuration/scripts/machines/env.izumi_nag /data/tar/git_cice/CICE/Icepack/configuration/scripts/machines/env.izumi_nag
8,9d7
< setenv OMP_STACKSIZE 64M
< 
18c16
< setenv ICE_MACHINE_QUEUE "short"
---
> setenv ICE_MACHINE_QUEUE "debug"
20c18
< setenv ICE_MACHINE_TPNODE 48
---
> setenv ICE_MACHINE_TPNODE 24
Only in ./Icepack/configuration/scripts/machines: env.izumi_pgi
Only in ./Icepack/configuration/scripts/machines: Macros.izumi_gnu
diff -r ./Icepack/configuration/scripts/machines/Macros.izumi_intel /data/tar/git_cice/CICE/Icepack/configuration/scripts/machines/Macros.izumi_intel
2c2
< # Makefile macros for NCAR izumi, intel compiler
---
> # Makefile macros for NCAR cheyenne, intel compiler
12a13
> FC_AUTO_R8 := -r8
25,30d25
< 
< ifeq ($(ICE_THREADED), true) 
<    LDFLAGS += -qopenmp
<    CFLAGS += -qopenmp
<    FFLAGS += -qopenmp
< endif
diff -r ./Icepack/configuration/scripts/machines/Macros.izumi_nag /data/tar/git_cice/CICE/Icepack/configuration/scripts/machines/Macros.izumi_nag
2c2
< # Makefile macros for NCAR izumi, nag compiler
---
> # Makefile macros for NCAR cheyenne, nag compiler
13a14
> FC_AUTO_R8 := -r8
27,31c28
< ifeq ($(ICE_THREADED), true) 
<    LDFLAGS += -openmp
<    CFLAGS += -openmp
<    FFLAGS += -openmp
< endif
---
> SLIBS   := -L$(COMPILER_PATH)/lib/NAG_Fortran
Only in ./Icepack/configuration/scripts/machines: Macros.izumi_pgi
diff -r ./Icepack/configuration/scripts/tests/report_results.csh /data/tar/git_cice/CICE/Icepack/configuration/scripts/tests/report_results.csh
10c10,11
< set wikirepo = "https://github.com/CICE-Consortium/Test-Results.wiki.git"
---
> set gh_repository = "CICE-Consortium/Test-Results.wiki.git"
> set wikirepo = "https://github.com/${gh_repository}"
14c15,25
< git clone ${wikirepo} ${wikiname}
---
> 
> # If command line argument "--travisCI" is set when running this script, clone
> # the wiki repository using Github access token for the 'ciceconsortium' user.
> if ( "$1" == "--travisCI" ) then
>     git clone "https://ciceconsortium:${GH_TOKEN}@github.com/${gh_repository}" ${wikiname}
>     set res = $status
> else
>     git clone ${wikirepo} ${wikiname}
>     set res = $status
> endif
> 
55c66
< set xcdat = `echo $cdat | cut -c 3-`
---
> set xcdat = `echo $cdat | sed 's|-||g' | cut -c 3-`
61a73,74
> set vfile = "icepack_by_vers"
> set bfile = "icepack_by_bran"
65a79,80
>   set vfile = {$vfile}_forks
>   set bfile = {$bfile}_forks
98d112
< @ tunkn = 0
117c131
<   set fcomp  = `grep " ${case} bfbcomp " results.log | cut -c 1-4`
---
>   set fcomp  = `grep " ${case} " results.log | grep " bfbcomp" | cut -c 1-4`
122c136
<   set vcomp  = `grep " ${case} bfbcomp " results.log | cut -d " " -f 4`
---
>   set vcomp  = `grep " ${case} " results.log | grep " bfbcomp" | cut -d " " -f 4`
162,165d175
<   if (${rbuild} == ${yellow}) set tchkpass = 2
<   if (${rrun}   == ${yellow}) set tchkpass = 2
<   if (${rtest}  == ${yellow}) set tchkpass = 2
< 
173,178c183
<   else
<     if (${tchkpass} == 2) then
<        @ tunkn = $tunkn + 1
<     else
<        @ tfail = $tfail + 1
<     endif
---
>      @ tfail = $tfail + 1
236a242,251
> 
> # If command line argument "--travisCI" is set when running this script, add
> # links to Travis build page and the raw build log.
> if ( "$1" == "--travisCI" ) then
>     cat >> ${outfile} << EOF
> - Travis-CI build page: https://travis-ci.org/${TRAVIS_REPO_SLUG}/builds/${TRAVIS_BUILD_ID}
> - Travis-CI raw log: https://api.travis-ci.org/v3/job/${TRAVIS_JOB_ID}/log.txt
> EOF
> endif
> 
246a262,263
> set versfile = "${wikiname}/${tsubdir}/${vfile}.md"
> set branfile = "${wikiname}/${tsubdir}/${bfile}.md"
248c265
< foreach xfile ($hashfile $machfile)
---
> foreach xfile ($hashfile $machfile $versfile $branfile)
266c283
< | ${mach} | ${compiler} | ${vers} | ${cdat} | ${tcolor} ${tfail}, ${tunkn} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) |
---
> | ${mach} | ${compiler} | ${vers} | ${cdat} | ${tcolor} ${tfail} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) |
274c291,314
<   sed -i "$nline a | ${mach} | ${compiler} | ${vers} | ${cdat} | ${tcolor} ${tfail}, ${tunkn} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) | " ${hashfile}
---
>   sed -i "$nline a | ${mach} | ${compiler} | ${vers} | ${cdat} | ${tcolor} ${tfail} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) | " ${hashfile}
> endif
> 
> #=====================
> # update versfile
> #=====================
> 
> set chk = 0
> if (-e ${versfile}) set chk = `grep "\*\*${vers}" ${versfile} | wc -l`
> if ($chk == 0) then
> cat >! ${versfile} << EOF
> **${vers}** :
> 
> | machine | compiler | hash | date | test fail | comp fail | total |
> | ------ | ------ | ------ | ------  | ------ | ------ | ------ |
> | ${mach} | ${compiler} | ${shhash} | ${cdat} | ${tcolor} ${tfail} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) |
> 
> EOF
> if (-e ${versfile}.prev) cat ${versfile}.prev >> ${versfile}
> 
> else
>   set oline = `grep -n "\*\*${vers}" ${versfile} | head -1 | cut -d : -f 1`
>   @ nline = ${oline} + 3
>   sed -i "$nline a | ${mach} | ${compiler} | ${shhash} | ${cdat} | ${tcolor} ${tfail} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) | " ${versfile}
289c329
< | ${vers} | ${shhash} | ${compiler} | ${cdat} | ${tcolor} ${tfail}, ${tunkn} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) |
---
> | ${vers} | ${shhash} | ${compiler} | ${cdat} | ${tcolor} ${tfail} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) |
297c337
<   sed -i "$nline a | ${vers} | ${shhash} | ${compiler} | ${cdat} | ${tcolor} ${tfail}, ${tunkn} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) | " ${machfile}
---
>   sed -i "$nline a | ${vers} | ${shhash} | ${compiler} | ${cdat} | ${tcolor} ${tfail} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) | " ${machfile}
299a340,361
> #=====================
> # update branfile
> #=====================
> 
> set chk = 0
> if (-e ${branfile}) set chk = `grep "\*\*${bran}" ${branfile} | wc -l`
> if ($chk == 0) then
> cat >! ${branfile} << EOF
> **${bran}** **${repo}**:
> 
> | machine | compiler | hash | date | test fail | comp fail | total |
> | ------ | ------ | ------ | ------  | ------ | ------ | ------ |
> | ${mach} | ${compiler} | ${shhash} | ${cdat} | ${tcolor} ${tfail} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) |
> 
> EOF
> if (-e ${branfile}.prev) cat ${branfile}.prev >> ${branfile}
> 
> else
>   set oline = `grep -n "\*\*${bran}" ${branfile} | head -1 | cut -d : -f 1`
>   @ nline = ${oline} + 3
>   sed -i "$nline a | ${mach} | ${compiler} | ${shhash} | ${cdat} | ${tcolor} ${tfail} | ${rcolor} ${rfail}, ${rothr} | [${ttotl}](${ofile}) | " ${branfile}
> endif
312a375,376
> git add ${tsubdir}/${vfile}.md
> git add ${tsubdir}/${bfile}.md
Only in ./Icepack/doc: generate_interfaces.sh
diff -r ./Icepack/doc/source/conf.py /data/tar/git_cice/CICE/Icepack/doc/source/conf.py
65c65
< version = u'1.1.2' 
---
> version = u'1.1.1' 
67c67
< version = u'1.1.2' 
---
> version = u'1.1.1' 
diff -r ./Icepack/doc/source/developer_guide/dg_about.rst /data/tar/git_cice/CICE/Icepack/doc/source/developer_guide/dg_about.rst
38c38,39
< See https://github.com/CICE-Consortium/About-Us/wiki/Resource-Index#information-for-developers for information on:
---
> See https://github.com/CICE-Consortium/About-Us/wiki/Resource-Index#information-for-developers
> for information on:
41,42c42
<   - git Workflow Guide - including extensive information about the Pull Request 
<     process and requirements
---
>   - git Workflow Guide - including extensive information about the Pull Request process and requirements
diff -r ./Icepack/doc/source/user_guide/index.rst /data/tar/git_cice/CICE/Icepack/doc/source/user_guide/index.rst
18d17
<    ug_library.rst
Only in ./Icepack/doc/source/user_guide: interfaces.rst
Only in ./Icepack/doc/source/user_guide: ug_library.rst
diff -r ./Icepack/doc/source/user_guide/ug_running.rst /data/tar/git_cice/CICE/Icepack/doc/source/user_guide/ug_running.rst
110,113c110
<   Updates the stored value of the Icepack version in the sandbox and exits  See :ref:`version` for more information.
< 
< ``--docintfc``
<   Runs a script that updates the public interfaces in the documentation.  This script parses the source code directly.  See :ref:`docintfc` for more information.
---
>   Updates the stored value of the Icepack version in the sandbox and exits  See :ref:`version` for more information
File ./Icepack/.git is a regular file while file /data/tar/git_cice/CICE/Icepack/.git is a directory
diff -r ./Icepack/.gitignore /data/tar/git_cice/CICE/Icepack/.gitignore
13d12
< caselist*
diff -r ./Icepack/icepack.setup /data/tar/git_cice/CICE/Icepack/icepack.setup
71,72d70
<     --docintfc
< 
89d86
<     --docintfc : update the public interface documentation
203,221d199
<     exit -1
<   endif
<   shift argv
< end
< 
< set argv = ( $initargv[*] )
< # check for --docintfc
< while (1)
<   if ($#argv < 1) break;
<   if ("$argv[1]" =~ "--docintfc" ) then
<     echo "${0}: Running docintfc"
<     echo " "
<     cd ${ICE_SANDBOX}/doc
<     ./generate_interfaces.sh
<     cd ${ICE_SANDBOX}
<     echo " "
<     echo "${0}: docintfc complete, exiting"
<     echo "${0}: remember to add and commit any updated documentation files"
<     echo " "
diff -r ./Icepack/.zenodo.json /data/tar/git_cice/CICE/Icepack/.zenodo.json
4c4
<     "language": "eng", 
---
>     "language": "English", 
40c40
<             "name": "Anthony Craig"
---
>             "name": "Tony Craig"
83c83
<             "affiliation": "Los Alamos National Laboratory", 
---
>             "affiliation": "Naval Research Laboratory Stennis Space Center", 
93a94
>             "scheme": "url", 
97a99
>             "scheme": "doi", 
99c101
<             "relation": "isNewVersionOf"
---
>             "relation": "isVersionOf"
102c104
< }
---
> }
\ No newline at end of file
Only in .: lal.dat
